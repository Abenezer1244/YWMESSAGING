{"file":"C:\\Users\\Windows\\OneDrive - Seattle Colleges\\Desktop\\YWMESSAGING\\backend\\tests\\setup.ts","mappings":";AAAA;;;;;;;;GAQG;;;;;AAoBH,0CAOC;AAzBD,2CAA8C;AAC9C,oDAA4B;AAC5B,gDAAwB;AAExB,kCAAkC;AAClC,gBAAM,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,cAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;AAClE,gBAAM,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,cAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;AAE7D,4BAA4B;AAC5B,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,MAAM,CAAC;AAE9B,qCAAqC;AACrC,IAAI,YAA0B,CAAC;AAE/B;;;GAGG;AACH,SAAgB,eAAe;IAC7B,IAAI,CAAC,YAAY,EAAE,CAAC;QAClB,YAAY,GAAG,IAAI,qBAAY,CAAC;YAC9B,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;SAC9E,CAAC,CAAC;IACL,CAAC;IACD,OAAO,YAAY,CAAC;AACtB,CAAC;AAOD,kCAAkC;AAClC,MAAM,CAAC,MAAM,GAAG,eAAe,EAAE,CAAC","names":[],"sources":["C:\\Users\\Windows\\OneDrive - Seattle Colleges\\Desktop\\YWMESSAGING\\backend\\tests\\setup.ts"],"sourcesContent":["/**\r\n * Jest Global Setup File\r\n * Initializes test database connection and global utilities\r\n *\r\n * This file runs before all tests and sets up:\r\n * - Test environment variables\r\n * - Global Prisma client for database access\r\n * - Test mode configuration\r\n */\r\n\r\nimport { PrismaClient } from '@prisma/client';\r\nimport dotenv from 'dotenv';\r\nimport path from 'path';\r\n\r\n// Load test environment variables\r\ndotenv.config({ path: path.resolve(process.cwd(), '.env.test') });\r\ndotenv.config({ path: path.resolve(process.cwd(), '.env') });\r\n\r\n// Ensure we're in test mode\r\nprocess.env.NODE_ENV = 'test';\r\n\r\n// Initialize Prisma client for tests\r\nlet prismaClient: PrismaClient;\r\n\r\n/**\r\n * Get Prisma client instance for tests\r\n * Reuses singleton connection across all test files\r\n */\r\nexport function getPrismaClient(): PrismaClient {\r\n  if (!prismaClient) {\r\n    prismaClient = new PrismaClient({\r\n      log: process.env.DEBUG_TESTS ? ['query', 'info', 'warn', 'error'] : ['error'],\r\n    });\r\n  }\r\n  return prismaClient;\r\n}\r\n\r\n// Make Prisma client available globally for tests\r\ndeclare global {\r\n  var testDb: PrismaClient;\r\n}\r\n\r\n// Initialize global test database\r\nglobal.testDb = getPrismaClient();\r\n\r\n// Export for use in tests if needed\r\nexport {};\r\n"],"version":3}