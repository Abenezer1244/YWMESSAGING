{"file":"C:\\Users\\Windows\\OneDrive - Seattle Colleges\\Desktop\\YWMESSAGING\\backend\\src\\services\\cache.service.ts","mappings":"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","names":[],"sources":["C:\\Users\\Windows\\OneDrive - Seattle Colleges\\Desktop\\YWMESSAGING\\backend\\src\\services\\cache.service.ts"],"sourcesContent":["import { redisClient } from '../config/redis.config.js';\n\n/**\n * Cache Service - Redis-backed caching with fallback\n * Handles all caching operations with graceful Redis failure handling\n *\n * PATTERN: Cache-Aside (Lazy Loading)\n * 1. Check cache first\n * 2. Cache miss? Fetch from source (database)\n * 3. Store in cache with TTL\n * 4. Return to caller\n *\n * BENEFITS:\n * - Database queries reduced by 70-80%\n * - API response times cut by 50-75%\n * - Simple invalidation strategy\n *\n * PERFORMANCE TARGETS:\n * - Cache hit rate: 70-90%\n * - Cache latency: <5ms\n * - DB query latency reduction: 50-75%\n */\n\n// Global metrics instance for cache performance tracking\nexport const cacheMetrics = {\n  hits: 0,\n  misses: 0,\n  errors: 0,\n\n  recordHit(): void {\n    this.hits++;\n  },\n\n  recordMiss(): void {\n    this.misses++;\n  },\n\n  recordError(): void {\n    this.errors++;\n  },\n\n  getHitRate(): number {\n    const total = this.hits + this.misses;\n    return total === 0 ? 0 : Math.round((this.hits / total) * 100);\n  },\n\n  reset(): void {\n    this.hits = 0;\n    this.misses = 0;\n    this.errors = 0;\n  },\n\n  toString(): string {\n    return `Hits: ${this.hits}, Misses: ${this.misses}, Errors: ${this.errors}, HitRate: ${this.getHitRate()}%`;\n  },\n};\n\n/**\n * Get value from cache with automatic source fetch on miss (Cache-Aside Pattern)\n * @param key - Cache key\n * @param fetchFn - Async function to fetch data on cache miss\n * @param ttl - Time-to-live in seconds (default: 300 = 5 minutes)\n * @returns - Cached or freshly fetched data\n */\nexport async function getCachedWithFallback<T>(\n  key: string,\n  fetchFn: () => Promise<T>,\n  ttl: number = 300\n): Promise<T> {\n  try {\n    if (!redisClient.isOpen) {\n      // Redis not connected, fetch from source directly\n      return fetchFn();\n    }\n\n    // Try to get from cache WITH 2-SECOND TIMEOUT\n    try {\n      const cachePromise = redisClient.get(key);\n      const timeoutPromise = new Promise<string | null>((_, reject) =>\n        setTimeout(() => reject(new Error('Redis cache read timeout')), 2000)\n      );\n\n      const cached = await Promise.race([cachePromise, timeoutPromise]);\n      if (cached) {\n        try {\n          cacheMetrics.recordHit();\n          return JSON.parse(cached) as T;\n        } catch (parseError) {\n          console.warn(`[Cache] Failed to parse JSON for key ${key}, deleting corrupt data`);\n          // Fire-and-forget cache invalidation\n          invalidateCache(key).catch(() => {});\n        }\n      }\n    } catch (cacheError) {\n      console.warn(`[Cache] Cache read failed/timeout for ${key}:`, (cacheError as Error).message);\n      // Fall through to fetch from source\n    }\n\n    // Cache miss - fetch from source\n    cacheMetrics.recordMiss();\n    const data = await fetchFn();\n\n    // Store in cache WITH TIMEOUT (fire-and-forget, non-blocking)\n    const jitteredTtl = ttl + Math.floor(Math.random() * 120 - 60);\n    redisClient\n      .setEx(key, Math.max(jitteredTtl, 60), JSON.stringify(data))\n      .catch((error) => {\n        console.warn(`[Cache] Cache write failed for ${key}:`, (error as Error).message);\n        // Ignore cache write failures - data still returned\n      });\n\n    return data;\n  } catch (error) {\n    console.error(`[Cache] Error for key ${key}:`, (error as Error).message);\n    cacheMetrics.recordError();\n    // Graceful fallback to source\n    return fetchFn();\n  }\n}\n\n/**\n * Get value from cache with timeout protection\n * Returns null if key not found or Redis unavailable\n * @deprecated Use getCachedWithFallback instead for automatic source fetch\n */\nexport async function getCached<T>(key: string): Promise<T | null> {\n  try {\n    if (!redisClient.isOpen) {\n      return null; // Redis not connected, bypass cache\n    }\n\n    // Get with 1-second timeout to prevent hanging\n    const cachePromise = redisClient.get(key);\n    const timeoutPromise = new Promise<string | null>((_, reject) =>\n      setTimeout(() => reject(new Error('Cache read timeout')), 1000)\n    );\n\n    const cached = await Promise.race([cachePromise, timeoutPromise]);\n    if (!cached) {\n      cacheMetrics.recordMiss();\n      return null;\n    }\n\n    try {\n      cacheMetrics.recordHit();\n      return JSON.parse(cached) as T;\n    } catch (parseError) {\n      console.warn(`[Cache] Failed to parse JSON for key ${key}, deleting corrupt data`);\n      // Fire-and-forget invalidation\n      invalidateCache(key).catch(() => {});\n      return null;\n    }\n  } catch (error) {\n    console.error(`[Cache] Failed to get ${key}:`, (error as Error).message);\n    cacheMetrics.recordError();\n    return null; // Graceful fallback\n  }\n}\n\n/**\n * Set value in cache with TTL\n * Returns success status (fire-and-forget, non-blocking)\n */\nexport async function setCached<T>(\n  key: string,\n  data: T,\n  ttlSeconds: number = 3600 // Default 1 hour\n): Promise<boolean> {\n  try {\n    if (!redisClient.isOpen) {\n      return false; // Redis not connected, skip caching\n    }\n\n    const serialized = JSON.stringify(data);\n\n    // Fire-and-forget: Don't await Redis write, return immediately\n    // This prevents blocking on slow/unresponsive Redis\n    redisClient\n      .setEx(key, ttlSeconds, serialized)\n      .catch((error) => {\n        console.warn(`[Cache] Cache write failed for ${key}:`, (error as Error).message);\n        // Ignore cache write failures - data still returned to caller\n      });\n\n    return true; // Return immediately without awaiting Redis\n  } catch (error) {\n    console.error(`[Cache] Failed to set ${key}:`, (error as Error).message);\n    return false; // Graceful fallback, don't fail request\n  }\n}\n\n/**\n * Delete single cache key or pattern\n * Pattern supports * wildcard (e.g., \"church:123:*\")\n */\nexport async function invalidateCache(pattern: string): Promise<boolean> {\n  try {\n    if (!redisClient.isOpen) {\n      return false;\n    }\n\n    // If pattern contains wildcard, scan and delete all matching keys\n    if (pattern.includes('*')) {\n      const keys = await redisClient.keys(pattern);\n      if (keys.length > 0) {\n        await redisClient.del(keys);\n      }\n      return true;\n    }\n\n    // Otherwise delete single key\n    await redisClient.del(pattern);\n    return true;\n  } catch (error) {\n    console.error(`[Cache] Failed to invalidate ${pattern}:`, (error as Error).message);\n    return false;\n  }\n}\n\n/**\n * Clear entire cache (use sparingly!)\n */\nexport async function clearCache(): Promise<boolean> {\n  try {\n    if (!redisClient.isOpen) {\n      return false;\n    }\n\n    await redisClient.flushDb();\n    console.log('[Cache] Cleared entire cache');\n    return true;\n  } catch (error) {\n    console.error('[Cache] Failed to clear cache:', (error as Error).message);\n    return false;\n  }\n}\n\n/**\n * Get cache health status\n */\nexport async function getCacheStats(): Promise<{\n  isConnected: boolean;\n  status: string;\n  ttlInfo?: string;\n}> {\n  try {\n    const isConnected = redisClient.isOpen;\n    const status = isConnected ? 'Connected' : 'Disconnected';\n\n    if (!isConnected) {\n      return { isConnected, status };\n    }\n\n    // Try to get info\n    const info = await redisClient.info('server');\n    return {\n      isConnected,\n      status,\n      ttlInfo: info ? 'Redis operational' : 'Redis not responding',\n    };\n  } catch (error) {\n    return {\n      isConnected: false,\n      status: 'Error',\n      ttlInfo: `Error: ${(error as Error).message}`,\n    };\n  }\n}\n\n/**\n * Cache key generators for consistent key naming\n */\nexport const CACHE_KEYS = {\n  // Church settings (1 hour TTL)\n  churchSettings: (churchId: string) => `church:${churchId}:settings`,\n  churchPlan: (churchId: string) => `church:${churchId}:plan`,\n  churchStats: (churchId: string) => `church:${churchId}:stats`,\n\n  // Admin permissions (30 minutes TTL)\n  adminPermissions: (adminId: string) => `admin:${adminId}:permissions`,\n  adminRole: (adminId: string) => `admin:${adminId}:role`,\n\n  // Contact/Member data (30 minutes TTL)\n  memberDetails: (memberId: string) => `member:${memberId}:details`,\n\n  // Billing data (24 hours TTL)\n  billingPlan: (churchId: string) => `church:${churchId}:billing:plan`,\n  billingUsage: (churchId: string) => `church:${churchId}:billing:usage`,\n  planLimits: (planName: string) => `plan:${planName}:limits`,\n\n  // Planning Center integration (1 hour TTL)\n  planningCenterStatus: (churchId: string) => `church:${churchId}:pco:status`,\n  planningCenterSync: (churchId: string) => `church:${churchId}:pco:sync`,\n\n  // Wildcard patterns for invalidation\n  churchAll: (churchId: string) => `church:${churchId}:*`,\n  adminAll: (adminId: string) => `admin:${adminId}:*`,\n  memberAll: (memberId: string) => `member:${memberId}:*`,\n};\n\n/**\n * TTL presets\n */\nexport const CACHE_TTL = {\n  SHORT: 5 * 60, // 5 minutes\n  MEDIUM: 30 * 60, // 30 minutes\n  LONG: 60 * 60, // 1 hour\n  EXTENDED: 24 * 60 * 60, // 24 hours\n};\n"],"version":3}