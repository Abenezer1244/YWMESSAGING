# SECURITY: Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# Keep secret keys safe and rotate them regularly

# ============================================================================
# MULTI-TENANT DATABASE CONFIGURATION (PHASE 3+)
# ============================================================================
# The application uses a database-per-tenant architecture:
# - REGISTRY_DATABASE_URL: Central registry database (Church, Tenant, PhoneNumberRegistry, AdminEmailIndex)
# - Individual TENANT_DATABASE_URL: Each church gets isolated database created on signup
#
# Architecture:
#   REGISTRY_DATABASE  ‚Üê Stores tenant metadata and connection strings
#         ‚Üì
#   TENANT_DATABASE_A  ‚Üê Church A (isolated)
#   TENANT_DATABASE_B  ‚Üê Church B (isolated)
#   TENANT_DATABASE_C  ‚Üê Church C (isolated)
# ============================================================================

# Registry Database (CRITICAL for Phase 3+)
# Stores: Church account info, Tenant metadata, Phone number mappings, Admin email index
# One database for entire app - NOT per-tenant
# Format: postgresql://user:password@host:5432/database_name
# For Render production, this will be automatically set by the platform
REGISTRY_DATABASE_URL="postgresql://postgres:password@localhost:5432/koinonia_registry"

# Tenant Database Template (used for local development only)
# In production, each tenant gets their own isolated database URL from registry
# This is only needed for running Prisma schema generation locally
TENANT_DATABASE_URL="postgresql://postgres:password@localhost:5432/koinonia_tenant_template"

# Server
PORT=3000
NODE_ENV=development
FRONTEND_URL=http://localhost:5173

# JWT Secrets (CRITICAL: Generate new values for production!)
# Generate with: openssl rand -hex 32
JWT_ACCESS_SECRET=your_access_secret_here
JWT_REFRESH_SECRET=your_refresh_secret_here

# Redis (CRITICAL for Phase 1 - enables message queue processing and caching)
REDIS_URL=redis://localhost:6379

# Message Queue Configuration (PHASE 1 - CRITICAL)
# Enable asynchronous message processing via Bull job queues
# This DRAMATICALLY improves throughput: 60 msg/min ‚Üí 500 msg/min (8x improvement)
# Prevents service failure at 1,500+ churches
# Set to 'true' to enable queues, 'false' to disable (default)
ENABLE_QUEUES=true

# üîí SECURITY: Encryption Key for PII (EIN, Phone Numbers, Emails)
# CRITICAL: Generate a NEW key for each environment - NEVER reuse keys between dev/staging/prod
# Format: 32-byte hex string (64 characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Uses AES-256-GCM for authenticated encryption
# EIN (Employer Identification Number) is encrypted at rest to prevent identity theft
# NEVER commit this key to version control!
ENCRYPTION_KEY=your_32_byte_hex_key_here

# Datadog APM Monitoring (PHASE 6)
DATADOG_ENABLED=false
APP_VERSION=1.0.0

# Telnyx (SMS service & Virtual Numbers)
# Get from: https://portal.telnyx.com/ (API Keys section)
TELNYX_API_KEY=your_api_key_here

# Stripe (Payment processing)
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# SendGrid (Email service)
SENDGRID_API_KEY=SG.your_api_key_here

# PostHog (Analytics)
POSTHOG_API_KEY=your_posthog_key_here

# OpenAI (for chatbot)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# App Configuration
TRIAL_DAYS=14
SUPPORT_EMAIL=support@koinoniasms.com
