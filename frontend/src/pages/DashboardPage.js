import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useNavigate } from 'react-router-dom';
import useAuthStore from '../stores/authStore';
import useBranchStore from '../stores/branchStore';
import BranchSelector from '../components/BranchSelector';
import TrialBanner from '../components/TrialBanner';
import Button from '../components/ui/Button';
import Card from '../components/ui/Card';
export function DashboardPage() {
    const navigate = useNavigate();
    const { user, church, logout } = useAuthStore();
    const { currentBranchId } = useBranchStore();
    const handleLogout = () => {
        logout();
        navigate('/login');
    };
    const daysUntilTrialEnd = church ? Math.ceil((new Date(church.trialEndsAt).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24)) : 0;
    const trialStatus = daysUntilTrialEnd > 0 ? 'active' : 'expired';
    const trialColor = daysUntilTrialEnd >= 8 ? 'success' : daysUntilTrialEnd >= 4 ? 'warning' : 'danger';
    const navigationItems = [
        { label: '📍 Branches', action: () => navigate('/branches'), always: true },
        { label: '👥 Groups', action: () => navigate(`/branches/${currentBranchId}/groups`), conditional: true },
        { label: '👤 Members', action: () => navigate(`/members?groupId=`), conditional: true },
        { label: '📨 Send Message', action: () => navigate('/send-message'), conditional: true },
        { label: '📜 History', action: () => navigate('/message-history'), conditional: true },
        { label: '📋 Templates', action: () => navigate('/templates'), conditional: true },
        { label: '🔄 Recurring', action: () => navigate('/recurring-messages'), conditional: true },
        { label: '📊 Analytics', action: () => navigate('/analytics'), conditional: true },
        { label: '💳 Billing', action: () => navigate('/billing'), always: true },
        { label: '⚙️ Settings', action: () => navigate('/admin/settings'), always: true },
    ];
    return (_jsxs("div", { className: "min-h-screen bg-white dark:bg-neutral-950 transition-colors duration-normal", children: [_jsx("header", { className: "bg-white dark:bg-neutral-900 shadow-sm border-b border-neutral-200 dark:border-neutral-800 transition-colors duration-normal", children: _jsxs("div", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6", children: [_jsxs("div", { className: "flex justify-between items-center mb-6", children: [_jsxs("div", { className: "flex items-center gap-4", children: [_jsx("div", { className: "w-12 h-12 bg-primary-500 rounded-lg flex items-center justify-center shadow-md", children: _jsx("span", { className: "text-white font-bold text-base", children: "YW" }) }), _jsxs("div", { children: [_jsx("h1", { className: "text-3xl font-bold text-neutral-900 dark:text-white", children: "Dashboard" }), _jsx("p", { className: "text-neutral-600 dark:text-neutral-400", children: church?.name })] })] }), _jsx(Button, { variant: "outline", size: "md", onClick: handleLogout, children: "Logout" })] }), _jsxs("div", { className: "flex flex-wrap gap-2 items-center", children: [navigationItems.map((item) => {
                                    const shouldShow = item.always || (item.conditional && currentBranchId);
                                    if (!shouldShow)
                                        return null;
                                    return (_jsx("button", { onClick: item.action, className: "px-4 py-2 text-neutral-700 dark:text-neutral-300 font-medium text-sm hover:bg-primary-50 dark:hover:bg-neutral-800 rounded-lg transition-colors duration-normal border border-neutral-200 dark:border-neutral-700 hover:border-primary-300 dark:hover:border-primary-500", children: item.label }, item.label));
                                }), _jsx(BranchSelector, {})] })] }) }), _jsxs("main", { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8", children: [_jsx(TrialBanner, {}), _jsxs("div", { className: "mb-8 animate-fadeIn", children: [_jsxs("h2", { className: "text-3xl font-bold text-neutral-900 dark:text-white mb-6 tracking-tight", children: ["Welcome back, ", user?.firstName, "! \uD83D\uDC4B"] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [_jsx(Card, { variant: "default", className: "border border-neutral-200 dark:border-neutral-800 hover:shadow-md transition-all", children: _jsxs("div", { className: "flex items-start gap-4", children: [_jsx("div", { className: "w-12 h-12 bg-primary-50 dark:bg-primary-950 rounded-lg flex items-center justify-center text-2xl", children: "\uD83D\uDC64" }), _jsxs("div", { className: "flex-1", children: [_jsx("h3", { className: "text-lg font-semibold text-neutral-900 dark:text-white mb-3", children: "Your Account" }), _jsxs("div", { className: "space-y-2 text-sm", children: [_jsx("p", { className: "text-neutral-600 dark:text-neutral-400", children: _jsxs("span", { className: "font-medium text-neutral-900 dark:text-white", children: [user?.firstName, " ", user?.lastName] }) }), _jsx("p", { className: "text-neutral-600 dark:text-neutral-400", children: _jsx("span", { className: "text-neutral-500 dark:text-neutral-400", children: user?.email }) }), _jsx("p", { className: "text-neutral-600 dark:text-neutral-400", children: _jsx("span", { className: "inline-block px-2 py-1 bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 rounded text-xs font-semibold", children: user?.role }) })] })] })] }) }), _jsx(Card, { variant: "default", className: "border border-neutral-200 dark:border-neutral-800 hover:shadow-md transition-all", children: _jsxs("div", { className: "flex items-start gap-4", children: [_jsx("div", { className: "w-12 h-12 bg-primary-50 dark:bg-primary-950 rounded-lg flex items-center justify-center text-2xl", children: "\u26EA" }), _jsxs("div", { className: "flex-1", children: [_jsx("h3", { className: "text-lg font-semibold text-neutral-900 dark:text-white mb-3", children: "Church Details" }), _jsxs("div", { className: "space-y-2 text-sm", children: [_jsx("p", { className: "text-neutral-600 dark:text-neutral-400", children: _jsx("span", { className: "font-medium text-neutral-900 dark:text-white", children: church?.name }) }), _jsx("p", { className: "text-neutral-600 dark:text-neutral-400", children: _jsx("span", { className: "text-neutral-500 dark:text-neutral-400", children: church?.email }) }), _jsxs("p", { className: "text-neutral-600 dark:text-neutral-400", children: ["Trial ends ", _jsx("span", { className: "font-semibold text-neutral-900 dark:text-white", children: new Date(church?.trialEndsAt || '').toLocaleDateString() })] })] })] })] }) })] })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6 mb-8", children: [_jsxs(Card, { variant: "default", className: "text-center border border-neutral-200 dark:border-neutral-800 hover:shadow-md transition-all", children: [_jsx("div", { className: "w-16 h-16 bg-primary-50 dark:bg-primary-950 rounded-lg flex items-center justify-center mx-auto mb-4 text-3xl", children: "\uD83D\uDCCD" }), _jsx("div", { className: "text-4xl font-bold text-primary-500 dark:text-primary-400 mb-2", children: "0" }), _jsx("p", { className: "text-neutral-600 dark:text-neutral-400 font-medium mb-4", children: "Active Branches" }), _jsx(Button, { variant: "outline", size: "sm", onClick: () => navigate('/branches'), fullWidth: true, children: "View Branches" })] }), _jsxs(Card, { variant: "default", className: "text-center border border-neutral-200 dark:border-neutral-800 hover:shadow-md transition-all", children: [_jsx("div", { className: "w-16 h-16 bg-primary-50 dark:bg-primary-950 rounded-lg flex items-center justify-center mx-auto mb-4 text-3xl", children: "\uD83D\uDC65" }), _jsx("div", { className: "text-4xl font-bold text-primary-500 dark:text-primary-400 mb-2", children: "0" }), _jsx("p", { className: "text-neutral-600 dark:text-neutral-400 font-medium mb-4", children: "Total Members" }), _jsx(Button, { variant: "outline", size: "sm", onClick: () => navigate(`/members?groupId=`), fullWidth: true, children: "Manage Members" })] }), _jsxs(Card, { variant: "default", className: "text-center border border-neutral-200 dark:border-neutral-800 hover:shadow-md transition-all", children: [_jsx("div", { className: "w-16 h-16 bg-primary-50 dark:bg-primary-950 rounded-lg flex items-center justify-center mx-auto mb-4 text-3xl", children: "\uD83D\uDCE8" }), _jsx("div", { className: "text-4xl font-bold text-primary-500 dark:text-primary-400 mb-2", children: "0" }), _jsx("p", { className: "text-neutral-600 dark:text-neutral-400 font-medium mb-4", children: "Messages Sent" }), _jsx(Button, { variant: "outline", size: "sm", onClick: () => navigate('/send-message'), fullWidth: true, children: "Send Message" })] })] }), _jsxs(Card, { variant: "default", className: "border border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900/50", children: [_jsx("h3", { className: "text-xl font-bold text-neutral-900 dark:text-white mb-6", children: "\u2728 Key Features" }), _jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4", children: [
                                    { icon: '📍', title: 'Multi-Branch', desc: 'Manage multiple church locations' },
                                    { icon: '👥', title: 'Groups & Members', desc: 'Organize and segment your congregation' },
                                    { icon: '📨', title: 'SMS Messaging', desc: 'Send direct messages to members' },
                                    { icon: '📋', title: 'Templates', desc: 'Reuse pre-built message templates' },
                                    { icon: '🔄', title: 'Recurring Messages', desc: 'Automate regular communications' },
                                    { icon: '📊', title: 'Analytics', desc: 'Track engagement and delivery rates' },
                                ].map((feature, idx) => (_jsxs("div", { className: "p-4 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg hover:shadow-md transition-all", children: [_jsx("div", { className: "text-3xl mb-3", children: feature.icon }), _jsx("h4", { className: "font-semibold text-neutral-900 dark:text-white mb-1", children: feature.title }), _jsx("p", { className: "text-sm text-neutral-600 dark:text-neutral-400", children: feature.desc })] }, idx))) })] })] })] }));
}
export default DashboardPage;
//# sourceMappingURL=DashboardPage.js.map