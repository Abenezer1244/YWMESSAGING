{"version":3,"file":"BillingPage-DwzuvfCL.js","sources":["../../src/pages/BillingPage.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport toast from 'react-hot-toast';\nimport { getPlan, cancelSubscription } from '../api/billing';\nimport Button from '../components/ui/Button';\nimport Card from '../components/ui/Card';\nimport { Spinner } from '../components/ui';\nexport function BillingPage() {\n    const navigate = useNavigate();\n    const [planInfo, setPlanInfo] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isCancelling, setIsCancelling] = useState(false);\n    useEffect(() => {\n        const loadPlanInfo = async () => {\n            try {\n                setIsLoading(true);\n                const info = await getPlan();\n                setPlanInfo(info);\n            }\n            catch (error) {\n                toast.error(error.message || 'Failed to load billing info');\n            }\n            finally {\n                setIsLoading(false);\n            }\n        };\n        loadPlanInfo();\n    }, []);\n    const handleCancel = async () => {\n        if (!confirm('Are you sure you want to cancel your subscription?')) {\n            return;\n        }\n        try {\n            setIsCancelling(true);\n            await cancelSubscription();\n            toast.success('Subscription cancelled');\n            navigate('/dashboard');\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to cancel subscription');\n        }\n        finally {\n            setIsCancelling(false);\n        }\n    };\n    if (isLoading) {\n        return (_jsx(\"div\", { className: \"min-h-screen bg-gradient-to-br from-secondary-50 dark:from-secondary-900 to-secondary-100 dark:to-secondary-950 p-6 transition-colors duration-normal\", children: _jsx(\"div\", { className: \"max-w-7xl mx-auto\", children: _jsx(\"div\", { className: \"flex items-center justify-center py-20\", children: _jsx(Spinner, { size: \"lg\", text: \"Loading billing information...\" }) }) }) }));\n    }\n    if (!planInfo) {\n        return (_jsx(\"div\", { className: \"min-h-screen bg-gradient-to-br from-secondary-50 dark:from-secondary-900 to-secondary-100 dark:to-secondary-950 p-6 transition-colors duration-normal\", children: _jsx(\"div\", { className: \"max-w-7xl mx-auto\", children: _jsxs(Card, { variant: \"highlight\", className: \"text-center py-16\", children: [_jsx(\"h2\", { className: \"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-3\", children: \"Failed to Load Billing Information\" }), _jsx(\"p\", { className: \"text-secondary-600 dark:text-secondary-400\", children: \"Please try refreshing the page or contact support if the issue persists.\" })] }) }) }));\n    }\n    const planNameMap = {\n        starter: 'Starter',\n        growth: 'Growth',\n        pro: 'Pro',\n    };\n    const getUsagePercentage = (used, limit) => {\n        if (limit > 100000)\n            return 0; // unlimited\n        return Math.round((used / limit) * 100);\n    };\n    const getUsageColor = (percentage) => {\n        if (percentage >= 90)\n            return 'bg-danger-500';\n        if (percentage >= 70)\n            return 'bg-warning-500';\n        return 'bg-success-500';\n    };\n    const UsageBar = ({ label, used, limit, }) => {\n        const percentage = getUsagePercentage(used, limit);\n        const isUnlimited = limit > 100000;\n        return (_jsxs(\"div\", { className: \"mb-6\", children: [_jsxs(\"div\", { className: \"flex justify-between items-center mb-2\", children: [_jsx(\"span\", { className: \"text-sm font-medium text-secondary-900 dark:text-secondary-50\", children: label }), _jsxs(\"span\", { className: \"text-sm text-secondary-600 dark:text-secondary-400\", children: [used, \" / \", isUnlimited ? '∞' : limit] })] }), !isUnlimited && (_jsx(\"div\", { className: \"w-full bg-secondary-200 dark:bg-secondary-700 rounded-full h-2\", children: _jsx(\"div\", { className: `h-2 rounded-full ${getUsageColor(percentage)}`, style: { width: `${Math.min(percentage, 100)}%` } }) })), isUnlimited && (_jsx(\"div\", { className: \"text-sm text-success-600 dark:text-success-400\", children: \"Unlimited\" }))] }));\n    };\n    return (_jsx(\"div\", { className: \"min-h-screen bg-gradient-to-br from-secondary-50 dark:from-secondary-900 to-secondary-100 dark:to-secondary-950 p-6 transition-colors duration-normal\", children: _jsxs(\"div\", { className: \"max-w-7xl mx-auto\", children: [_jsxs(\"div\", { className: \"mb-8\", children: [_jsx(\"h1\", { className: \"text-4xl font-bold text-secondary-900 dark:text-secondary-50 mb-2\", children: \"\\uD83D\\uDCB3 Billing Settings\" }), _jsx(\"p\", { className: \"text-secondary-600 dark:text-secondary-400\", children: \"Manage your subscription and view usage\" })] }), _jsxs(Card, { variant: \"default\", className: \"mb-8\", children: [_jsx(\"h2\", { className: \"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-6\", children: \"Current Plan\" }), _jsxs(\"div\", { className: \"grid grid-cols-1 md:grid-cols-3 gap-8\", children: [_jsxs(Card, { variant: \"highlight\", children: [_jsxs(\"h3\", { className: \"text-xl font-bold text-secondary-900 dark:text-secondary-50\", children: [planNameMap[planInfo.plan], \" Plan\"] }), _jsxs(\"p\", { className: \"text-3xl font-bold text-primary-600 dark:text-primary-400 mt-2\", children: [\"$\", planInfo.limits.price / 100, _jsx(\"span\", { className: \"text-lg text-secondary-600 dark:text-secondary-400\", children: \"/month\" })] }), _jsx(Button, { variant: \"primary\", size: \"md\", onClick: () => navigate('/subscribe'), className: \"mt-4 w-full\", children: \"Change Plan\" }), _jsx(Button, { variant: \"danger\", size: \"md\", onClick: handleCancel, disabled: isCancelling, className: \"mt-2 w-full\", children: isCancelling ? 'Cancelling...' : 'Cancel Subscription' })] }), _jsxs(\"div\", { className: \"md:col-span-2\", children: [_jsx(\"h4\", { className: \"font-semibold text-secondary-900 dark:text-secondary-50 mb-4\", children: \"Features included:\" }), _jsx(\"ul\", { className: \"grid grid-cols-1 md:grid-cols-2 gap-4\", children: planInfo.limits.features.map((feature, idx) => (_jsxs(\"li\", { className: \"flex items-start\", children: [_jsx(\"span\", { className: \"text-success-500 mr-3 mt-0.5\", children: \"\\u2713\" }), _jsx(\"span\", { className: \"text-secondary-700 dark:text-secondary-300\", children: feature })] }, idx))) })] })] })] }), _jsxs(Card, { variant: \"default\", className: \"mb-8\", children: [_jsxs(\"h2\", { className: \"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-6\", children: [\"Current Usage (\", new Date().toLocaleDateString(), \")\"] }), _jsxs(\"div\", { className: \"grid grid-cols-1 md:grid-cols-2 gap-8\", children: [_jsxs(\"div\", { children: [_jsx(\"h3\", { className: \"font-semibold text-secondary-900 dark:text-secondary-50 mb-4\", children: \"Organization\" }), _jsx(UsageBar, { label: \"Branches\", used: planInfo.usage.branches, limit: planInfo.limits.branches }), _jsx(UsageBar, { label: \"Co-Admins\", used: planInfo.usage.coAdmins, limit: planInfo.limits.coAdmins })] }), _jsxs(\"div\", { children: [_jsx(\"h3\", { className: \"font-semibold text-secondary-900 dark:text-secondary-50 mb-4\", children: \"Messaging\" }), _jsx(UsageBar, { label: \"Members\", used: planInfo.usage.members, limit: planInfo.limits.members }), _jsx(UsageBar, { label: \"Messages (This Month)\", used: planInfo.usage.messagesThisMonth, limit: planInfo.limits.messagesPerMonth })] })] }), _jsxs(\"div\", { className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mt-8 pt-8 border-t border-secondary-200 dark:border-secondary-700\", children: [_jsxs(Card, { variant: \"highlight\", className: \"bg-primary-50 dark:bg-primary-900/30\", children: [_jsx(\"p\", { className: \"text-sm text-secondary-600 dark:text-secondary-400\", children: \"Remaining Branches\" }), _jsx(\"p\", { className: \"text-2xl font-bold text-primary-600 dark:text-primary-400 mt-2\", children: planInfo.remaining.branches === 999999\n                                                ? '∞'\n                                                : planInfo.remaining.branches })] }), _jsxs(Card, { variant: \"highlight\", className: \"bg-success-50 dark:bg-success-900/30\", children: [_jsx(\"p\", { className: \"text-sm text-secondary-600 dark:text-secondary-400\", children: \"Remaining Members\" }), _jsx(\"p\", { className: \"text-2xl font-bold text-success-600 dark:text-success-400 mt-2\", children: planInfo.remaining.members === 999999\n                                                ? '∞'\n                                                : planInfo.remaining.members })] }), _jsxs(Card, { variant: \"highlight\", className: \"bg-info-50 dark:bg-info-900/30\", children: [_jsx(\"p\", { className: \"text-sm text-secondary-600 dark:text-secondary-400\", children: \"Remaining Messages\" }), _jsx(\"p\", { className: \"text-2xl font-bold text-info-600 dark:text-info-400 mt-2\", children: planInfo.remaining.messagesPerMonth === 999999\n                                                ? '∞'\n                                                : planInfo.remaining.messagesPerMonth })] }), _jsxs(Card, { variant: \"highlight\", className: \"bg-warning-50 dark:bg-warning-900/30\", children: [_jsx(\"p\", { className: \"text-sm text-secondary-600 dark:text-secondary-400\", children: \"Remaining Co-Admins\" }), _jsx(\"p\", { className: \"text-2xl font-bold text-warning-600 dark:text-warning-400 mt-2\", children: planInfo.remaining.coAdmins === 999999\n                                                ? '∞'\n                                                : planInfo.remaining.coAdmins })] })] })] }), _jsxs(Card, { variant: \"default\", children: [_jsx(\"h2\", { className: \"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-4\", children: \"Billing Information\" }), _jsx(\"p\", { className: \"text-secondary-600 dark:text-secondary-400\", children: \"Your subscription is billed monthly. You can manage your payment method and invoices through Stripe.\" }), _jsx(Button, { variant: \"primary\", size: \"md\", className: \"mt-4\", children: \"Manage in Stripe\" })] })] }) }));\n}\nexport default BillingPage;\n//# sourceMappingURL=BillingPage.js.map"],"names":["BillingPage","navigate","useNavigate","planInfo","setPlanInfo","useState","isLoading","setIsLoading","isCancelling","setIsCancelling","useEffect","info","getPlan","error","toast","handleCancel","cancelSubscription","_jsx","Spinner","_jsxs","Card","planNameMap","getUsagePercentage","used","limit","getUsageColor","percentage","UsageBar","label","isUnlimited","Button","feature","idx"],"mappings":"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"}