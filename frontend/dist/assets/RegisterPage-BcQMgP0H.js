import{u as N,a as b,r as u,f as j,j as e,C as w,I as i,B as v,L as k,_ as d,c as C}from"./index-D-3FiYPt.js";import{u as q}from"./index.esm-DRKgdTb_.js";function L(){const h=N(),{setAuth:x}=b(),[s,l]=u.useState(!1);u.useEffect(()=>{j().catch(()=>{console.warn("Failed to fetch CSRF token, registration may fail")})},[]);const{register:a,handleSubmit:p,watch:f,formState:{errors:t}}=q({defaultValues:{email:"",password:"",confirmPassword:"",firstName:"",lastName:"",churchName:""}});f("password");const y=async r=>{if(r.password!==r.confirmPassword){d.error("Passwords do not match");return}l(!0);try{const c=await C({email:r.email,password:r.password,firstName:r.firstName,lastName:r.lastName,churchName:r.churchName}),{admin:o,church:n,accessToken:m,refreshToken:g}=c.data;console.log("Registration successful, setting auth:",{admin:o,church:n,accessToken:m?"present":"missing"}),x(o,n,m,g),d.success("Registration successful!"),setTimeout(()=>{console.log("Navigating to dashboard"),h("/dashboard",{replace:!0})},100)}catch(c){const o=c.response?.data?.error||"Registration failed. Please try again.";d.error(o),l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 dark:from-secondary-900 via-white dark:via-secondary-950 to-primary-100 dark:to-secondary-900 flex items-center justify-center p-4 py-8 transition-colors duration-normal",children:e.jsxs("div",{className:"w-full max-w-2xl animate-fadeIn",children:[e.jsxs(w,{variant:"default",className:"p-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-600 dark:from-primary-500 to-primary-700 dark:to-primary-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"YW"})})}),e.jsx("h1",{className:"text-3xl font-bold text-center mb-2 text-secondary-900 dark:text-secondary-50",children:"Start Your Free Trial"}),e.jsx("p",{className:"text-center text-secondary-600 dark:text-secondary-400 mb-8",children:"Create your church account in minutes â€¢ 14-day free trial"}),e.jsxs("form",{onSubmit:p(y),className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"First Name",placeholder:"John",disabled:s,error:t.firstName?.message,...a("firstName",{required:"First name is required"})}),e.jsx(i,{label:"Last Name",placeholder:"Doe",disabled:s,error:t.lastName?.message,...a("lastName",{required:"Last name is required"})})]}),e.jsx(i,{label:"Church Name",placeholder:"Grace Community Church",disabled:s,error:t.churchName?.message,...a("churchName",{required:"Church name is required"})}),e.jsx(i,{label:"Email Address",type:"email",placeholder:"pastor@church.com",disabled:s,error:t.email?.message,...a("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Invalid email format"}})}),e.jsx(i,{label:"Password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",helperText:"Must be at least 8 characters",disabled:s,error:t.password?.message,...a("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"}})}),e.jsx(i,{label:"Confirm Password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",disabled:s,error:t.confirmPassword?.message,...a("confirmPassword",{required:"Please confirm your password"})}),e.jsx(v,{type:"submit",variant:"primary",size:"md",fullWidth:!0,isLoading:s,disabled:s,children:s?"Creating account...":"Create Account"})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-secondary-200 dark:border-secondary-700",children:e.jsxs("p",{className:"text-center text-secondary-600 dark:text-secondary-400",children:["Already have an account?"," ",e.jsx(k,{to:"/login",className:"text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-semibold transition-colors",children:"Login here"})]})})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4 text-center text-sm",children:[e.jsxs("div",{className:"text-secondary-600 dark:text-secondary-400",children:[e.jsx("div",{className:"text-2xl mb-2",children:"âš¡"}),e.jsx("p",{className:"font-medium",children:"Setup in Minutes"})]}),e.jsxs("div",{className:"text-secondary-600 dark:text-secondary-400",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ”’"}),e.jsx("p",{className:"font-medium",children:"Secure & Reliable"})]}),e.jsxs("div",{className:"text-secondary-600 dark:text-secondary-400",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ’³"}),e.jsx("p",{className:"font-medium",children:"No Card Required"})]})]})]})})}export{L as RegisterPage,L as default};
//# sourceMappingURL=RegisterPage-BcQMgP0H.js.map
