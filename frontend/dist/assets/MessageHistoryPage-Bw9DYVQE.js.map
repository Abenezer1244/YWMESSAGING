{"version":3,"file":"MessageHistoryPage-Bw9DYVQE.js","sources":["../../src/pages/dashboard/MessageHistoryPage.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport toast from 'react-hot-toast';\nimport useMessageStore from '../../stores/messageStore';\nimport { getMessageHistory } from '../../api/messages';\nimport BackButton from '../../components/BackButton';\nimport Button from '../../components/ui/Button';\nimport Card from '../../components/ui/Card';\nimport { Spinner } from '../../components/ui';\nexport function MessageHistoryPage() {\n    const { messages, setMessages, isLoading, setLoading } = useMessageStore();\n    const [page, setPage] = useState(1);\n    const [total, setTotal] = useState(0);\n    const [statusFilter, setStatusFilter] = useState('');\n    const limit = 20;\n    const pages = Math.ceil(total / limit);\n    useEffect(() => {\n        loadMessages();\n    }, [page, statusFilter]);\n    const loadMessages = async () => {\n        try {\n            setLoading(true);\n            const data = await getMessageHistory({\n                page,\n                limit,\n                status: statusFilter || undefined,\n            });\n            setMessages(data.data);\n            setTotal(data.pagination.total);\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to load messages');\n        }\n        finally {\n            setLoading(false);\n        }\n    };\n    const getStatusBadgeColor = (status) => {\n        switch (status) {\n            case 'sent':\n                return 'bg-green-500/20 text-green-400';\n            case 'pending':\n                return 'bg-yellow-500/20 text-yellow-400';\n            case 'failed':\n                return 'bg-red-500/20 text-red-400';\n            default:\n                return 'bg-slate-700/50 text-slate-300';\n        }\n    };\n    return (_jsx(\"div\", { className: \"min-h-screen bg-slate-950 p-6 transition-colors duration-normal\", children: _jsxs(\"div\", { className: \"max-w-7xl mx-auto\", children: [_jsx(\"div\", { className: \"mb-6\", children: _jsx(BackButton, { variant: \"ghost\" }) }), _jsxs(\"div\", { className: \"mb-8\", children: [_jsx(\"h1\", { className: \"text-4xl font-bold text-white mb-2\", children: \"\\uD83D\\uDCDC Message History\" }), _jsxs(\"p\", { className: \"text-slate-300\", children: [total, \" total messages\"] })] }), _jsxs(Card, { variant: \"default\", className: \"mb-6 bg-slate-900/50 border-slate-700\", children: [_jsx(\"label\", { className: \"block text-sm font-semibold text-white mb-3\", children: \"\\uD83D\\uDD0D Filter by Status\" }), _jsxs(\"select\", { value: statusFilter, onChange: (e) => {\n                                setStatusFilter(e.target.value);\n                                setPage(1);\n                            }, className: \"px-4 py-2 border border-slate-600 rounded-lg bg-slate-800 text-white focus:outline-none focus:ring-2 focus:ring-accent-500 transition-colors duration-normal\", children: [_jsx(\"option\", { value: \"\", children: \"All Statuses\" }), _jsx(\"option\", { value: \"pending\", children: \"Pending\" }), _jsx(\"option\", { value: \"sent\", children: \"Sent\" }), _jsx(\"option\", { value: \"failed\", children: \"Failed\" })] })] }), isLoading ? (_jsx(\"div\", { className: \"flex items-center justify-center py-20\", children: _jsx(Spinner, { size: \"lg\", text: \"Loading messages...\" }) })) : messages.length === 0 ? (_jsxs(Card, { variant: \"highlight\", className: \"text-center py-16 bg-slate-900/50 border-slate-700\", children: [_jsx(\"div\", { className: \"mb-6\", children: _jsx(\"span\", { className: \"text-6xl\", children: \"\\uD83D\\uDCDC\" }) }), _jsx(\"h2\", { className: \"text-2xl font-bold text-white mb-3\", children: \"No Messages Found\" }), _jsx(\"p\", { className: \"text-slate-300\", children: \"Your message history will appear here after you send messages.\" })] })) : (_jsxs(_Fragment, { children: [_jsx(Card, { variant: \"default\", className: \"overflow-hidden\", children: _jsx(\"div\", { className: \"overflow-x-auto\", children: _jsxs(\"table\", { className: \"min-w-full\", children: [_jsx(\"thead\", { className: \"bg-primary-100 dark:bg-primary-800 border-b border-primary-200 dark:border-primary-700\", children: _jsxs(\"tr\", { children: [_jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-primary-900 dark:text-primary-50\", children: \"Message\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-primary-900 dark:text-primary-50\", children: \"Recipients\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-primary-900 dark:text-primary-50\", children: \"Delivery\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-primary-900 dark:text-primary-50\", children: \"Status\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-primary-900 dark:text-primary-50\", children: \"Sent\" })] }) }), _jsx(\"tbody\", { className: \"divide-y divide-primary-200 dark:divide-primary-700\", children: messages.map((message) => (_jsxs(\"tr\", { className: \"hover:bg-primary-50 dark:hover:bg-primary-700/50 transition-colors duration-normal\", children: [_jsxs(\"td\", { className: \"px-6 py-4\", children: [_jsxs(\"p\", { className: \"text-sm text-primary-900 dark:text-primary-50 font-medium truncate max-w-xs\", children: [message.content.slice(0, 50), message.content.length > 50 ? '...' : ''] }), _jsx(\"p\", { className: \"text-xs text-primary-600 dark:text-primary-400 mt-1\", children: message.targetType === 'individual'\n                                                                    ? 'Individual'\n                                                                    : message.targetType === 'groups'\n                                                                        ? 'Groups'\n                                                                        : message.targetType === 'branches'\n                                                                            ? 'Branches'\n                                                                            : 'All Members' })] }), _jsx(\"td\", { className: \"px-6 py-4 whitespace-nowrap\", children: _jsx(\"div\", { className: \"text-sm text-primary-900 dark:text-primary-50 font-medium\", children: message.totalRecipients }) }), _jsx(\"td\", { className: \"px-6 py-4 whitespace-nowrap\", children: _jsxs(\"div\", { className: \"text-sm\", children: [_jsxs(\"p\", { className: \"text-primary-900 dark:text-primary-50 font-medium\", children: [message.deliveredCount, \"/\", message.totalRecipients] }), _jsxs(\"p\", { className: \"text-primary-600 dark:text-primary-400 text-xs\", children: [message.deliveryRate || 0, \"%\"] })] }) }), _jsx(\"td\", { className: \"px-6 py-4 whitespace-nowrap\", children: _jsx(\"span\", { className: `inline-block px-3 py-1 text-xs font-semibold rounded-full ${getStatusBadgeColor(message.status)}`, children: message.status.charAt(0).toUpperCase() + message.status.slice(1) }) }), _jsxs(\"td\", { className: \"px-6 py-4 whitespace-nowrap text-sm text-primary-600 dark:text-primary-400\", children: [new Date(message.createdAt).toLocaleDateString(), _jsx(\"br\", {}), new Date(message.createdAt).toLocaleTimeString()] })] }, message.id))) })] }) }) }), pages > 1 && (_jsxs(\"div\", { className: \"mt-6 flex justify-center gap-2\", children: [_jsx(Button, { variant: \"secondary\", size: \"md\", onClick: () => setPage(Math.max(1, page - 1)), disabled: page === 1, children: \"\\u2190 Previous\" }), _jsxs(\"div\", { className: \"px-4 py-2 text-primary-700 dark:text-primary-300 font-medium\", children: [\"Page \", page, \" of \", pages] }), _jsx(Button, { variant: \"secondary\", size: \"md\", onClick: () => setPage(Math.min(pages, page + 1)), disabled: page === pages, children: \"Next \\u2192\" })] }))] }))] }) }));\n}\nexport default MessageHistoryPage;\n//# sourceMappingURL=MessageHistoryPage.js.map"],"names":["MessageHistoryPage","messages","setMessages","isLoading","setLoading","useMessageStore","page","setPage","useState","total","setTotal","statusFilter","setStatusFilter","limit","pages","useEffect","loadMessages","data","getMessageHistory","error","toast","getStatusBadgeColor","status","_jsx","_jsxs","BackButton","Card","e","Spinner","_Fragment","message","Button"],"mappings":"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"}