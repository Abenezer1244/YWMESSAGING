import{r as i,_ as N,j as e}from"./index-IZO8ebJl.js";import{u as b,g as v}from"./messages-By_5WcRb.js";import{a as w,S as l,L as S,H as M,C}from"./SoftLayout-BTP8X98y.js";import{S as p}from"./SoftButton-B-1r_eDw.js";import{m as a}from"./proxy-DOzOmuLD.js";import{c as L}from"./index-r4o7ojNZ.js";import{C as A}from"./chevron-left-CUYEHwb2.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],k=L("funnel",F);function B(){const{messages:d,setMessages:u,isLoading:h,setLoading:c}=b(),[s,n]=i.useState(1),[x,f]=i.useState(0),[o,y]=i.useState(""),m=20,r=Math.ceil(x/m);i.useEffect(()=>{g()},[s,o]);const g=async()=>{try{c(!0);const t=await v({page:s,limit:m,status:o||void 0});u(t.data),f(t.pagination.total)}catch(t){N.error(t.message||"Failed to load messages")}finally{c(!1)}},j=t=>{switch(t){case"sent":return"bg-green-500/20 text-green-400";case"pending":return"bg-yellow-500/20 text-yellow-400";case"failed":return"bg-red-500/20 text-red-400";default:return"bg-slate-700/50 text-slate-300"}};return e.jsx(w,{children:e.jsxs("div",{className:"px-4 md:px-8 py-8 w-full",children:[e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:e.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Message History"})}),e.jsxs("p",{className:"text-muted-foreground",children:[x," total messages"]})]}),e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(l,{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Filter by Status"]}),e.jsxs("select",{value:o,onChange:t=>{y(t.target.value),n(1)},className:"px-4 py-2 border border-border/40 rounded-lg bg-card/50 text-foreground focus:outline-none focus:ring-2 focus:ring-primary transition-colors duration-normal backdrop-blur-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"failed",children:"Failed"})]})]})}),h?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(a.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(S,{className:"w-8 h-8 text-primary"})})}):d.length===0?e.jsx(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},children:e.jsxs(l,{variant:"gradient",className:"text-center py-16",children:[e.jsx("div",{className:"mb-6",children:e.jsx(M,{className:"w-16 h-16 mx-auto text-muted-foreground"})}),e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-3",children:"No Messages Found"}),e.jsx("p",{className:"text-muted-foreground",children:"Your message history will appear here after you send messages."})]})}):e.jsxs(e.Fragment,{children:[e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},children:e.jsx(l,{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"border-b border-border/40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-foreground",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-foreground",children:"Recipients"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-foreground",children:"Delivery"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-foreground",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-foreground",children:"Sent"})]})}),e.jsx("tbody",{className:"divide-y divide-border/40",children:d.map(t=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors duration-normal",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("p",{className:"text-sm text-foreground font-medium truncate max-w-xs",children:[t.content.slice(0,50),t.content.length>50?"...":""]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.targetType==="individual"?"Individual":t.targetType==="groups"?"Groups":t.targetType==="branches"?"Branches":"All Members"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-foreground font-medium",children:t.totalRecipients})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"text-foreground font-medium",children:[t.deliveredCount,"/",t.totalRecipients]}),e.jsxs("p",{className:"text-muted-foreground text-xs",children:[t.deliveryRate||0,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${j(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:[new Date(t.createdAt).toLocaleDateString(),e.jsx("br",{}),new Date(t.createdAt).toLocaleTimeString()]})]},t.id))})]})})})}),r>1&&e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-6 flex justify-center gap-2",children:[e.jsx(p,{variant:"secondary",size:"md",onClick:()=>n(Math.max(1,s-1)),disabled:s===1,icon:e.jsx(A,{className:"w-4 h-4"}),children:"Previous"}),e.jsxs("div",{className:"px-4 py-2 text-muted-foreground font-medium",children:["Page ",s," of ",r]}),e.jsx(p,{variant:"secondary",size:"md",onClick:()=>n(Math.min(r,s+1)),disabled:s===r,icon:e.jsx(C,{className:"w-4 h-4"}),children:"Next"})]})]})]})})}export{B as MessageHistoryPage,B as default};
//# sourceMappingURL=MessageHistoryPage-B2z1sS6R.js.map
