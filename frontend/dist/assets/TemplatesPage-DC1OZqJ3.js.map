{"version":3,"file":"TemplatesPage-DC1OZqJ3.js","sources":["../../src/pages/dashboard/TemplatesPage.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Loader, FileText, Plus, Edit, Trash2 } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport { getTemplates, deleteTemplate } from '../../api/templates';\nimport TemplateFormModal from '../../components/templates/TemplateFormModal';\nimport { SoftLayout, SoftCard, SoftButton } from '../../components/SoftUI';\nexport function TemplatesPage() {\n    const [templates, setTemplates] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [showModal, setShowModal] = useState(false);\n    const [editingTemplate, setEditingTemplate] = useState(null);\n    useEffect(() => {\n        loadTemplates();\n    }, []);\n    const loadTemplates = async () => {\n        try {\n            setIsLoading(true);\n            const data = await getTemplates();\n            setTemplates(data);\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to load templates');\n        }\n        finally {\n            setIsLoading(false);\n        }\n    };\n    const handleCreate = () => {\n        setEditingTemplate(null);\n        setShowModal(true);\n    };\n    const handleEdit = (template) => {\n        setEditingTemplate(template);\n        setShowModal(true);\n    };\n    const handleDelete = async (templateId, isDefault) => {\n        if (isDefault) {\n            toast.error('Cannot delete default templates');\n            return;\n        }\n        if (!window.confirm('Are you sure you want to delete this template?')) {\n            return;\n        }\n        try {\n            await deleteTemplate(templateId);\n            setTemplates(templates.filter((t) => t.id !== templateId));\n            toast.success('Template deleted');\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to delete template');\n        }\n    };\n    const handleModalClose = () => {\n        setShowModal(false);\n        setEditingTemplate(null);\n        loadTemplates();\n    };\n    const getCategoryLabel = (category) => {\n        const labels = {\n            service_reminder: 'Service Reminder',\n            event: 'Event',\n            prayer: 'Prayer',\n            thank_you: 'Thank You',\n            welcome: 'Welcome',\n            offering: 'Offering',\n        };\n        return labels[category] || category;\n    };\n    return (_jsxs(SoftLayout, { children: [_jsxs(\"div\", { className: \"px-4 md:px-8 py-8 w-full\", children: [_jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.5 }, className: \"flex items-center justify-between mb-8\", children: [_jsxs(\"div\", { children: [_jsx(\"h1\", { className: \"text-4xl font-bold text-foreground mb-2\", children: _jsx(\"span\", { className: \"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent\", children: \"Message Templates\" }) }), _jsx(\"p\", { className: \"text-muted-foreground\", children: \"Reuse message templates to save time\" })] }), _jsx(SoftButton, { variant: \"primary\", size: \"lg\", onClick: handleCreate, icon: _jsx(Plus, { className: \"w-5 h-5\" }), children: \"Create Template\" })] }), isLoading ? (_jsx(\"div\", { className: \"flex items-center justify-center py-20\", children: _jsx(motion.div, { animate: { rotate: 360 }, transition: { duration: 2, repeat: Infinity, ease: \"linear\" }, children: _jsx(Loader, { className: \"w-8 h-8 text-primary\" }) }) })) : templates.length === 0 ? (_jsx(motion.div, { initial: { opacity: 0, scale: 0.95 }, animate: { opacity: 1, scale: 1 }, transition: { delay: 0.1 }, children: _jsxs(SoftCard, { variant: \"gradient\", className: \"text-center py-16\", children: [_jsx(\"div\", { className: \"mb-6\", children: _jsx(FileText, { className: \"w-16 h-16 mx-auto text-muted-foreground\" }) }), _jsx(\"h2\", { className: \"text-2xl font-bold text-foreground mb-3\", children: \"No Templates Yet\" }), _jsx(\"p\", { className: \"text-muted-foreground mb-6 max-w-md mx-auto\", children: \"Create templates to quickly send frequently used messages.\" }), _jsx(SoftButton, { variant: \"primary\", size: \"md\", onClick: handleCreate, icon: _jsx(Plus, { className: \"w-4 h-4\" }), children: \"Create First Template\" })] }) })) : (_jsx(\"div\", { className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\", children: templates.map((template, index) => (_jsxs(SoftCard, { index: index, className: \"flex flex-col\", children: [_jsxs(\"div\", { className: \"flex items-start justify-between mb-3\", children: [_jsxs(\"div\", { children: [_jsx(\"h3\", { className: \"text-lg font-semibold text-foreground\", children: template.name }), _jsx(\"p\", { className: \"text-sm text-foreground/80 mt-1\", children: getCategoryLabel(template.category) })] }), template.isDefault && (_jsx(\"span\", { className: \"inline-block px-2 py-1 bg-primary/20 text-primary text-xs font-semibold rounded\", children: \"Default\" }))] }), _jsx(\"p\", { className: \"text-muted-foreground text-sm mb-4 flex-grow line-clamp-3\", children: template.content }), _jsx(\"div\", { className: \"flex justify-between items-center mb-4 pt-4 border-t border-border/40\", children: _jsxs(\"p\", { className: \"text-xs text-muted-foreground\", children: [\"Used \", template.usageCount, \" times\"] }) }), _jsxs(\"div\", { className: \"flex gap-2\", children: [_jsx(SoftButton, { variant: \"secondary\", size: \"sm\", onClick: () => handleEdit(template), fullWidth: true, icon: _jsx(Edit, { className: \"w-3 h-3\" }), children: \"Edit\" }), _jsx(SoftButton, { variant: \"danger\", size: \"sm\", onClick: () => handleDelete(template.id, template.isDefault), disabled: template.isDefault, fullWidth: true, icon: _jsx(Trash2, { className: \"w-3 h-3\" }), children: \"Delete\" })] })] }, template.id))) }))] }), showModal && (_jsx(TemplateFormModal, { template: editingTemplate, onClose: handleModalClose }))] }));\n}\nexport default TemplatesPage;\n//# sourceMappingURL=TemplatesPage.js.map"],"names":["TemplatesPage","templates","setTemplates","useState","isLoading","setIsLoading","showModal","setShowModal","editingTemplate","setEditingTemplate","useEffect","loadTemplates","data","getTemplates","error","toast","handleCreate","handleEdit","template","handleDelete","templateId","isDefault","deleteTemplate","t","handleModalClose","getCategoryLabel","category","_jsxs","SoftLayout","motion","_jsx","SoftButton","Plus","Loader","SoftCard","FileText","index","Edit","Trash2","TemplateFormModal"],"mappings":"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"}