import{u as S,o as w,r as l,j as e,C as i,B as C,_ as o}from"./index-Cizj7HGY.js";import{E,l as k,u as I,a as M,C as y}from"./index-CSdF079A.js";import{s as D,b as F}from"./billing-DQV_tDCi.js";import{t as b}from"./themeColors-Cduerava.js";import{d as B}from"./designTokens-9kEwpnwA.js";import"./index-YmNWoLEH.js";const T=k("pk_live_51SNi09E7LiXbMhWDr4X7EtXptIiMS3xAZgkdIfdjgf18XMQpSpt2OY47nmuv7hGSMCehvRDLawh9bDSsLto5D0jS00A7xoe8Ut");function _({planName:s,planPrice:c,onSubmit:r}){const d=I(),m=M(),[u,t]=l.useState(!1),[n,a]=l.useState(""),[h,N]=l.useState(""),v=async p=>{if(p.preventDefault(),a(""),!d||!m){a("Payment processing not available");return}if(!h.trim()){a("Cardholder name is required");return}try{t(!0);const{clientSecret:f}=await F(s),{error:x,paymentIntent:g}=await d.confirmCardPayment(f,{payment_method:{card:m.getElement(y),billing_details:{name:h}}});if(x){const j="Payment failed. Please verify your card details and try again.";a(j),o.error(j)}else g?.status==="succeeded"&&(o.success("Payment successful!"),r(g.id))}catch{const x="Payment processing error. Please try again.";a(x),o.error(x)}finally{t(!1)}},P={style:{base:{fontSize:B.typography.fontSize.base,color:b.text.white,"::placeholder":{color:b.text.lightGray}},invalid:{color:b.danger.base}}};return e.jsxs("form",{onSubmit:v,children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Payment Details"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Cardholder Name"}),e.jsx("input",{type:"text",placeholder:"John Doe",value:h,onChange:p=>N(p.target.value),required:!0,className:"w-full px-4 py-2 border border-input rounded-lg bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors placeholder-muted-foreground/50"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Card Details"}),e.jsx("div",{className:"p-4 border border-border rounded-lg bg-muted",children:e.jsx(y,{options:P})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Your card information is processed securely by Stripe."})]}),n&&e.jsx(i,{variant:"default",className:"mb-6 bg-red-950/30 border border-red-800",children:e.jsx("p",{className:"text-sm text-red-400",children:n})}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",className:"mt-1 w-4 h-4 border-border rounded text-primary focus:ring-primary bg-muted",defaultChecked:!0,required:!0}),e.jsxs("span",{className:"text-sm text-foreground/80",children:["I agree to the"," ",e.jsx("a",{href:"/terms",className:"text-primary hover:text-primary/80 font-semibold",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"/privacy",className:"text-primary hover:text-primary/80 font-semibold",children:"Privacy Policy"})]})]})}),e.jsx(C,{type:"submit",variant:"primary",size:"lg",disabled:u||!d,className:"w-full",children:u?"Processing...":`Pay $${c}`}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("a",{href:"/subscribe",className:"text-primary hover:text-primary/80 font-semibold",children:"Back to plans"})})]})}const $=s=>["starter","growth","pro"].includes(s)?s:null;function L(){const s=S(),[c]=w(),[r,d]=l.useState($(c.get("plan"))),m={starter:{name:"Starter Plan",price:49},growth:{name:"Growth Plan",price:79},pro:{name:"Pro Plan",price:129}};l.useEffect(()=>{if(!r){const n=setTimeout(()=>s("/subscribe"),0);return()=>clearTimeout(n)}},[r,s]);const u=async n=>{if(r)try{const a=await D(r);o.success(`Successfully subscribed to ${r} plan!`),s("/billing")}catch(a){console.error("Failed to subscribe:",a),o.error("Payment succeeded but subscription update failed. Please contact support.")}};if(!r)return null;const t=m[r];return e.jsx("div",{className:"min-h-screen bg-background p-6 transition-colors duration-normal",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"ðŸ’³ Complete Your Payment"}),e.jsx("p",{className:"text-muted-foreground",children:"Secure checkout powered by Stripe"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(i,{variant:"default",className:"bg-muted border-border",children:e.jsx(E,{stripe:T,children:e.jsx(_,{planName:r,planPrice:t.price,onSubmit:u})})})}),e.jsxs(i,{variant:"default",className:"h-fit border-border bg-muted",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-6",children:"Order Summary"}),e.jsxs("div",{className:"border-b border-border pb-4 mb-4",children:[e.jsx("p",{className:"text-muted-foreground",children:t.name}),e.jsxs("p",{className:"text-2xl font-bold text-foreground mt-2",children:["$",t.price.toFixed(2)]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"/month"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{className:"text-foreground",children:["$",t.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax"}),e.jsx("span",{className:"text-foreground",children:"Calculated at checkout"})]}),e.jsxs("div",{className:"border-t border-border pt-3 flex justify-between font-semibold",children:[e.jsx("span",{className:"text-foreground",children:"Total"}),e.jsxs("span",{className:"text-foreground",children:["$",t.price.toFixed(2)]})]})]}),e.jsxs(i,{variant:"highlight",className:"bg-primary/10 border border-primary/30",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground mb-3",children:"Plan Includes:"}),e.jsxs("ul",{className:"text-xs text-foreground/80 space-y-2",children:[r==="starter"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"âœ“ 1 Branch"}),e.jsx("li",{children:"âœ“ 500 Members"}),e.jsx("li",{children:"âœ“ 1,000 msgs/month"}),e.jsx("li",{children:"âœ“ Basic analytics"})]}),r==="growth"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"âœ“ 5 Branches"}),e.jsx("li",{children:"âœ“ 2,000 Members"}),e.jsx("li",{children:"âœ“ 5,000 msgs/month"}),e.jsx("li",{children:"âœ“ Advanced analytics"})]}),r==="pro"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"âœ“ 10 Branches"}),e.jsx("li",{children:"âœ“ Unlimited Members"}),e.jsx("li",{children:"âœ“ Unlimited messages"}),e.jsx("li",{children:"âœ“ Premium support"})]})]})]})]})]}),e.jsx(i,{variant:"highlight",className:"mt-8 bg-green-500/10 border border-green-500/30",children:e.jsx("p",{className:"text-sm text-green-300",children:"ðŸ”’ Your payment information is encrypted and processed securely by Stripe. We never store your card details."})})]})})}export{L as CheckoutPage,L as default};
//# sourceMappingURL=CheckoutPage-BZEzAcrs.js.map
