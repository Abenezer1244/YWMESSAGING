import{R as d,u as Pe,n as ke,r as I,j as a,C as T,B as Ne,_ as q}from"./index-D-3FiYPt.js";import{P as l}from"./index-CnZ_qQMi.js";import{b as we}from"./billing-BiyZT4U3.js";var te="clover",Oe=function(e){return e===3?"v3":e},ne="https://js.stripe.com",Re="".concat(ne,"/").concat(te,"/stripe.js"),Ae=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Te=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var Ie=function(e){return Ae.test(e)||Te.test(e)},Le=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ne,'"]')),r=0;r<e.length;r++){var n=e[r];if(Ie(n.src))return n}return null},K=function(e){var r="",n=document.createElement("script");n.src="".concat(Re).concat(r);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(n),n},Ue=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.2.0",startTime:r})},R=null,_=null,M=null,_e=function(e){return function(r){e(new Error("Failed to load Stripe.js",{cause:r}))}},Me=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},We=function(e){return R!==null?R:(R=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var s=Le();if(!(s&&e)){if(!s)s=K(e);else if(s&&M!==null&&_!==null){var o;s.removeEventListener("load",M),s.removeEventListener("error",_),(o=s.parentNode)===null||o===void 0||o.removeChild(s),s=K(e)}}M=Me(r,n),_=_e(n),s.addEventListener("load",M),s.addEventListener("error",_)}catch(c){n(c);return}}),R.catch(function(r){return R=null,Promise.reject(r)}))},Be=function(e,r,n){if(e===null)return null;var s=r[0],o=s.match(/^pk_test/),c=Oe(e.version),p=te;o&&c!==p&&console.warn("Stripe.js@".concat(c," was loaded on the page, but @stripe/stripe-js@").concat("8.2.0"," expected Stripe.js@").concat(p,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=e.apply(void 0,r);return Ue(i,n),i},A,ae=!1,se=function(){return A||(A=We(null).catch(function(e){return A=null,Promise.reject(e)}),A)};Promise.resolve().then(function(){return se()}).catch(function(t){ae||console.warn(t)});var Fe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];ae=!0;var s=Date.now();return se().then(function(o){return Be(o,r,s)})};function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X(Object(r),!0).forEach(function(n){oe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function W(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?W=function(e){return typeof e}:W=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(t)}function oe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $e(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function qe(t,e){if(t==null)return{};var r=$e(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ie(t,e){return De(t)||Je(t,e)||Ve(t,e)||Ye()}function De(t){if(Array.isArray(t))return t}function Je(t,e){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],s=!0,o=!1,c,p;try{for(r=r.call(t);!(s=(c=r.next()).done)&&(n.push(c.value),!(e&&n.length===e));s=!0);}catch(i){o=!0,p=i}finally{try{!s&&r.return!=null&&r.return()}finally{if(o)throw p}}return n}}function Ve(t,e){if(t){if(typeof t=="string")return Q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(t,e)}}function Q(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h=function(e,r,n){var s=!!n,o=d.useRef(n);d.useEffect(function(){o.current=n},[n]),d.useEffect(function(){if(!s||!e)return function(){};var c=function(){o.current&&o.current.apply(o,arguments)};return e.on(r,c),function(){e.off(r,c)}},[s,r,e,o])},D=function(e){var r=d.useRef(e);return d.useEffect(function(){r.current=e},[e]),r.current},O=function(e){return e!==null&&W(e)==="object"},Ge=function(e){return O(e)&&typeof e.then=="function"},ze=function(e){return O(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Z="[object Object]",Ke=function t(e,r){if(!O(e)||!O(r))return e===r;var n=Array.isArray(e),s=Array.isArray(r);if(n!==s)return!1;var o=Object.prototype.toString.call(e)===Z,c=Object.prototype.toString.call(r)===Z;if(o!==c)return!1;if(!o&&!n)return e===r;var p=Object.keys(e),i=Object.keys(r);if(p.length!==i.length)return!1;for(var v={},g=0;g<p.length;g+=1)v[p[g]]=!0;for(var j=0;j<i.length;j+=1)v[i[j]]=!0;var u=Object.keys(v);if(u.length!==p.length)return!1;var S=e,E=r,b=function(N){return t(S[N],E[N])};return u.every(b)},ce=function(e,r,n){return O(e)?Object.keys(e).reduce(function(s,o){var c=!O(r)||!Ke(e[o],r[o]);return n.includes(o)?(c&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),s):c?H(H({},s||{}),{},oe({},o,e[o])):s},null):null},le="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ee=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:le;if(e===null||ze(e))return e;throw new Error(r)},Xe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:le;if(Ge(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(s){return ee(s,r)})};var n=ee(e,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},He=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.3.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},B=d.createContext(null);B.displayName="ElementsContext";var de=function(e,r){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e},ue=function(e){var r=e.stripe,n=e.options,s=e.children,o=d.useMemo(function(){return Xe(r)},[r]),c=d.useState(function(){return{stripe:o.tag==="sync"?o.stripe:null,elements:o.tag==="sync"?o.stripe.elements(n):null}}),p=ie(c,2),i=p[0],v=p[1];d.useEffect(function(){var u=!0,S=function(b){v(function(k){return k.stripe?k:{stripe:b,elements:b.elements(n)}})};return o.tag==="async"&&!i.stripe?o.stripePromise.then(function(E){E&&u&&S(E)}):o.tag==="sync"&&!i.stripe&&S(o.stripe),function(){u=!1}},[o,i,n]);var g=D(r);d.useEffect(function(){g!==null&&g!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[g,r]);var j=D(n);return d.useEffect(function(){if(i.elements){var u=ce(n,j,["clientSecret","fonts"]);u&&i.elements.update(u)}},[n,j,i.elements]),d.useEffect(function(){He(i.stripe)},[i.stripe]),d.createElement(B.Provider,{value:i},s)};ue.propTypes={stripe:l.any,options:l.object};var Qe=function(e){var r=d.useContext(B);return de(r,e)},Ze=function(){var e=Qe("calls useElements()"),r=e.elements;return r};l.func.isRequired;var pe=d.createContext(null);pe.displayName="CheckoutContext";l.any,l.shape({clientSecret:l.oneOfType([l.string,l.instanceOf(Promise)]).isRequired,elementsOptions:l.object}).isRequired;var J=function(e){var r=d.useContext(pe),n=d.useContext(B);if(r){if(n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return r}else return de(n,e)},er=["mode"],rr=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},y=function(e,r){var n="".concat(rr(e),"Element"),s=function(i){var v=i.id,g=i.className,j=i.options,u=j===void 0?{}:j,S=i.onBlur,E=i.onFocus,b=i.onReady,k=i.onChange,N=i.onEscape,me=i.onClick,fe=i.onLoadError,he=i.onLoaderStart,ye=i.onNetworksChange,xe=i.onConfirm,ve=i.onCancel,ge=i.onShippingAddressChange,be=i.onShippingRateChange,je=i.onSavedPaymentMethodRemove,Se=i.onSavedPaymentMethodUpdate,L=J("mounts <".concat(n,">")),U="elements"in L?L.elements:null,w="checkoutState"in L?L.checkoutState:null,C=w?.type==="success"||w?.type==="loading"?w.sdk:null,Ee=d.useState(null),V=ie(Ee,2),m=V[0],Ce=V[1],P=d.useRef(null),F=d.useRef(null);h(m,"blur",S),h(m,"focus",E),h(m,"escape",N),h(m,"click",me),h(m,"loaderror",fe),h(m,"loaderstart",he),h(m,"networkschange",ye),h(m,"confirm",xe),h(m,"cancel",ve),h(m,"shippingaddresschange",ge),h(m,"shippingratechange",be),h(m,"savedpaymentmethodremove",je),h(m,"savedpaymentmethodupdate",Se),h(m,"change",k);var $;b&&(e==="expressCheckout"?$=b:$=function(){b(m)}),h(m,"ready",$),d.useLayoutEffect(function(){if(P.current===null&&F.current!==null&&(U||C)){var f=null;if(C)switch(e){case"payment":f=C.createPaymentElement(u);break;case"address":if("mode"in u){var G=u.mode,z=qe(u,er);if(G==="shipping")f=C.createShippingAddressElement(z);else if(G==="billing")f=C.createBillingAddressElement(z);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":f=C.createExpressCheckoutElement(u);break;case"currencySelector":f=C.createCurrencySelectorElement();break;case"taxId":f=C.createTaxIdElement(u);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else U&&(f=U.create(e,u));P.current=f,Ce(f),f&&f.mount(F.current)}},[U,C,u]);var Y=D(u);return d.useEffect(function(){if(P.current){var f=ce(u,Y,["paymentRequest"]);f&&"update"in P.current&&P.current.update(f)}},[u,Y]),d.useLayoutEffect(function(){return function(){if(P.current&&typeof P.current.destroy=="function")try{P.current.destroy(),P.current=null}catch{}}},[]),d.createElement("div",{id:v,className:g,ref:F})},o=function(i){J("mounts <".concat(n,">"));var v=i.id,g=i.className;return d.createElement("div",{id:v,className:g})},c=r?o:s;return c.propTypes={id:l.string,className:l.string,onChange:l.func,onBlur:l.func,onFocus:l.func,onReady:l.func,onEscape:l.func,onClick:l.func,onLoadError:l.func,onLoaderStart:l.func,onNetworksChange:l.func,onConfirm:l.func,onCancel:l.func,onShippingAddressChange:l.func,onShippingRateChange:l.func,onSavedPaymentMethodRemove:l.func,onSavedPaymentMethodUpdate:l.func,options:l.object},c.displayName=n,c.__elementType=e,c},x=typeof window>"u",tr=d.createContext(null);tr.displayName="EmbeddedCheckoutProviderContext";var nr=function(){var e=J("calls useStripe()"),r=e.stripe;return r};y("auBankAccount",x);var re=y("card",x);y("cardNumber",x);y("cardExpiry",x);y("cardCvc",x);y("iban",x);y("payment",x);y("expressCheckout",x);y("paymentRequestButton",x);y("linkAuthentication",x);y("address",x);y("shippingAddress",x);y("paymentMethodMessaging",x);y("taxId",x);const ar=Fe("pk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");function sr({planName:t,planPrice:e,onSubmit:r}){const n=nr(),s=Ze(),[o,c]=I.useState(!1),[p,i]=I.useState(""),[v,g]=I.useState(""),j=async S=>{if(S.preventDefault(),i(""),!n||!s){i("Payment processing not available");return}if(!v.trim()){i("Cardholder name is required");return}try{c(!0);const{clientSecret:E}=await we(t),{error:b,paymentIntent:k}=await n.confirmCardPayment(E,{payment_method:{card:s.getElement(re),billing_details:{name:v}}});if(b){const N="Payment failed. Please verify your card details and try again.";i(N),q.error(N)}else k?.status==="succeeded"&&(q.success("Payment successful!"),r())}catch{const b="Payment processing error. Please try again.";i(b),q.error(b)}finally{c(!1)}},u={style:{base:{fontSize:"16px",color:"#374151","::placeholder":{color:"#9CA3AF"}},invalid:{color:"#EF4444"}}};return a.jsxs("form",{onSubmit:j,children:[a.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-6",children:"Payment Details"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-secondary-900 dark:text-secondary-50 mb-2",children:"Cardholder Name"}),a.jsx("input",{type:"text",placeholder:"John Doe",value:v,onChange:S=>g(S.target.value),required:!0,className:"w-full px-4 py-2 border border-secondary-300 dark:border-secondary-600 rounded-lg bg-white dark:bg-secondary-800 text-secondary-900 dark:text-secondary-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-secondary-900 dark:text-secondary-50 mb-2",children:"Card Details"}),a.jsx("div",{className:"p-4 border border-secondary-300 dark:border-secondary-600 rounded-lg bg-white dark:bg-secondary-800",children:a.jsx(re,{options:u})}),a.jsx("p",{className:"text-xs text-secondary-600 dark:text-secondary-400 mt-2",children:"Your card information is processed securely by Stripe."})]}),p&&a.jsx(T,{variant:"highlight",className:"mb-6 bg-danger-50 dark:bg-danger-900/30 border border-danger-200 dark:border-danger-700",children:a.jsx("p",{className:"text-sm text-danger-700 dark:text-danger-300",children:p})}),a.jsx("div",{className:"mb-6",children:a.jsxs("label",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",className:"mt-1 w-4 h-4 border-secondary-300 rounded text-primary-600 focus:ring-primary-500",defaultChecked:!0,required:!0}),a.jsxs("span",{className:"ml-3 text-sm text-secondary-600 dark:text-secondary-400",children:["I agree to the"," ",a.jsx("a",{href:"/terms",className:"text-primary-600 dark:text-primary-400 hover:underline",children:"Terms of Service"})," ","and"," ",a.jsx("a",{href:"/privacy",className:"text-primary-600 dark:text-primary-400 hover:underline",children:"Privacy Policy"})]})]})}),a.jsx(Ne,{type:"submit",variant:"primary",size:"lg",disabled:o||!n,className:"w-full",children:o?"Processing...":`Pay $${e}`}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx("a",{href:"/subscribe",className:"text-primary-600 dark:text-primary-400 hover:underline",children:"Back to plans"})})]})}const or=t=>["starter","growth","pro"].includes(t)?t:null;function dr(){const t=Pe(),[e]=ke(),[r,n]=I.useState(or(e.get("plan"))),s={starter:{name:"Starter Plan",price:49},growth:{name:"Growth Plan",price:79},pro:{name:"Pro Plan",price:99}};I.useEffect(()=>{if(!r){const p=setTimeout(()=>t("/subscribe"),0);return()=>clearTimeout(p)}},[r,t]);const o=()=>{t("/billing")};if(!r)return null;const c=s[r];return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-secondary-50 dark:from-secondary-900 to-secondary-100 dark:to-secondary-950 p-6 transition-colors duration-normal",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-secondary-900 dark:text-secondary-50 mb-2",children:"💳 Complete Your Payment"}),a.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Secure checkout powered by Stripe"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(T,{variant:"default",children:a.jsx(ue,{stripe:ar,children:a.jsx(sr,{planName:r,planPrice:c.price,onSubmit:o})})})}),a.jsxs(T,{variant:"default",className:"h-fit",children:[a.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-secondary-50 mb-6",children:"Order Summary"}),a.jsxs("div",{className:"border-b border-secondary-200 dark:border-secondary-700 pb-4 mb-4",children:[a.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:c.name}),a.jsxs("p",{className:"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mt-2",children:["$",c.price.toFixed(2)]}),a.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400 mt-1",children:"/month"})]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Subtotal"}),a.jsxs("span",{className:"text-secondary-900 dark:text-secondary-50",children:["$",c.price.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Tax"}),a.jsx("span",{className:"text-secondary-900 dark:text-secondary-50",children:"Calculated at checkout"})]}),a.jsxs("div",{className:"border-t border-secondary-200 dark:border-secondary-700 pt-3 flex justify-between font-semibold",children:[a.jsx("span",{className:"text-secondary-900 dark:text-secondary-50",children:"Total"}),a.jsxs("span",{className:"text-secondary-900 dark:text-secondary-50",children:["$",c.price.toFixed(2)]})]})]}),a.jsxs(T,{variant:"highlight",className:"bg-primary-50 dark:bg-primary-900/30",children:[a.jsx("p",{className:"text-sm font-semibold text-secondary-900 dark:text-secondary-50 mb-3",children:"Plan Includes:"}),a.jsxs("ul",{className:"text-xs text-secondary-700 dark:text-secondary-300 space-y-2",children:[r==="starter"&&a.jsxs(a.Fragment,{children:[a.jsx("li",{children:"✓ 1 Branch"}),a.jsx("li",{children:"✓ 500 Members"}),a.jsx("li",{children:"✓ 1,000 msgs/month"}),a.jsx("li",{children:"✓ Basic analytics"})]}),r==="growth"&&a.jsxs(a.Fragment,{children:[a.jsx("li",{children:"✓ 5 Branches"}),a.jsx("li",{children:"✓ 2,000 Members"}),a.jsx("li",{children:"✓ 5,000 msgs/month"}),a.jsx("li",{children:"✓ Advanced analytics"})]}),r==="pro"&&a.jsxs(a.Fragment,{children:[a.jsx("li",{children:"✓ 10 Branches"}),a.jsx("li",{children:"✓ Unlimited Members"}),a.jsx("li",{children:"✓ Unlimited messages"}),a.jsx("li",{children:"✓ Premium support"})]})]})]})]})]}),a.jsx(T,{variant:"highlight",className:"mt-8 bg-success-50 dark:bg-success-900/30 border border-success-200 dark:border-success-700",children:a.jsx("p",{className:"text-sm text-success-800 dark:text-success-200",children:"🔒 Your payment information is encrypted and processed securely by Stripe. We never store your card details."})})]})})}export{dr as CheckoutPage,dr as default};
//# sourceMappingURL=CheckoutPage-LpKz3-K2.js.map
