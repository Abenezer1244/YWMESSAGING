const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/PhoneNumberPurchaseModal-jG7i5dnd.js","assets/js/vendor-ui-DhbhiCKM.js","assets/js/vendor-react-DC7Nk3dg.js","assets/js/react-stripe.esm-DjzRnSsR.js","assets/js/vendor-charts-B4neLzXX.js","assets/js/focus-trap-react-DeyAi7iF.js","assets/js/index-CDb4stXA.js","assets/js/vendor-utils-C8GUPZyx.js","assets/css/index-hA_v7nKd.css"])))=>i.map(i=>d[i]);
import{j as e,m as t,A as a,_ as r}from"./vendor-ui-DhbhiCKM.js";import{a as s,u as i}from"./vendor-react-DC7Nk3dg.js";import{B as l,c as n,_ as o,u as d,a as c,g as m}from"./index-CDb4stXA.js";import{g as x,a as g}from"./analytics-C9L6muba.js";import{g as u}from"./members-Bn10jK9u.js";import{g as h}from"./groups-J_3i-O8J.js";import{F as p,g as b,a as y}from"./focus-trap-react-DeyAi7iF.js";import{S as j,a as f}from"./SoftLayout-BX_yyHUK.js";import{g as v}from"./billing-DA8b9yRu.js";import{C as N}from"./ChatWidget-C0me3oj3.js";import{X as w,f as k,C,h as S,i as L,Z as D,A as M,L as T,j as _,U as E,T as P,k as R}from"./vendor-utils-C8GUPZyx.js";import{R as $,B,C as F,X as W,Y as A,T as O,a as z,P as U,b as G,c as K,L as Y,d as H}from"./vendor-charts-B4neLzXX.js";function I({icon:a,label:r,value:s,change:i,changeType:l="neutral",gradient:n="from-blue-500 to-cyan-500",index:o=0}){const d="positive"===l?"text-green-400":"negative"===l?"text-red-400":"text-muted-foreground",c=void 0!==i&&i>0?"+":"";return e.jsxs(j,{variant:"gradient",index:o,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx(t.div,{animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0},className:`bg-gradient-to-br ${n} rounded-xl p-3 shadow-lg`,children:e.jsx(a,{className:"w-6 h-6 text-white"})}),void 0!==i&&e.jsxs("div",{className:`text-sm font-bold ${d}`,children:[c,i,"%"]})]}),e.jsx("p",{className:"text-muted-foreground text-sm font-medium mb-2",children:r}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:s})]})}function V({dlcStatus:t,deliveryRate:a,wantsPremiumDelivery:r,size:s="md",variant:i="badge"}){const l="shared_brand"===t?{emoji:"ðŸ“Š",text:"Standard Delivery",subtext:"65% delivery rate",bgColor:"bg-blue-50",textColor:"text-blue-900",borderColor:"border-blue-200",badgeBg:"bg-blue-100",badgeText:"text-blue-800"}:"approved"===t?{emoji:"âœ…",text:"Premium 10DLC",subtext:"99% delivery rate",bgColor:"bg-green-50",textColor:"text-green-900",borderColor:"border-green-200",badgeBg:"bg-green-100",badgeText:"text-green-800"}:"pending"===t||"brand_verified"===t||"campaign_pending"===t?{emoji:"â³",text:"Pending Approval",subtext:"Premium 10DLC (99% when approved)",bgColor:"bg-yellow-50",textColor:"text-yellow-900",borderColor:"border-yellow-200",badgeBg:"bg-yellow-100",badgeText:"text-yellow-800"}:"rejected"===t?{emoji:"âŒ",text:"Approval Failed",subtext:"Contact support",bgColor:"bg-red-50",textColor:"text-red-900",borderColor:"border-red-200",badgeBg:"bg-red-100",badgeText:"text-red-800"}:{emoji:"â“",text:"Unknown Status",subtext:t||"Loading...",bgColor:"bg-gray-50",textColor:"text-gray-900",borderColor:"border-gray-200",badgeBg:"bg-gray-100",badgeText:"text-gray-800"},n={sm:"px-2 py-1 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-3 text-base"};return"badge"===i?e.jsxs("span",{className:`inline-flex items-center gap-1.5 ${n[s]} rounded-full ${l.badgeBg} ${l.badgeText} font-medium`,children:[e.jsx("span",{children:l.emoji}),e.jsx("span",{children:l.text})]}):"inline"===i?e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:l.emoji}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:l.text}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.subtext}),a&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Current rate: ",Math.round(100*a),"%"]})]})]}):e.jsx("div",{className:`rounded-lg border ${l.borderColor} ${l.bgColor} p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-3xl",children:l.emoji}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-semibold ${l.textColor}`,children:l.text}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:l.subtext}),a&&e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full "+("approved"===t?"bg-green-500":"shared_brand"===t?"bg-blue-500":"bg-yellow-500"),style:{width:100*a+"%"}})}),e.jsxs("span",{className:`text-xs font-medium ${l.textColor}`,children:[Math.round(100*a),"%"]})]})]})]})})}function Q(){const[t,a]=s.useState(null),[r,i]=s.useState(!0);if(s.useEffect(()=>{(async()=>{try{i(!0);const e=await v();a(e)}catch(e){}finally{i(!1)}})()},[]),r||!t)return null;if(!t.onTrial)return null;const l=t.daysRemaining,n=l<=0;let o="bg-green-50 border-green-200",d="text-green-800",c="âœ“";return n?(o="bg-red-50 border-red-200",d="text-red-800",c="âš "):l<=3&&(o="bg-yellow-50 border-yellow-200",d="text-yellow-800",c="!"),e.jsx("div",{className:`${o} border rounded-lg p-4 mb-6`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:`text-lg font-bold ${d}`,children:c}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${d}`,children:n?"Trial Expired":"Free Trial Active"}),e.jsx("p",{className:`text-sm ${d} mt-1`,children:n?"Your trial has expired. Please subscribe to continue using the platform.":1===l?"Your trial expires tomorrow. Subscribe now to keep your account active.":`${l} days remaining in your trial`}),!n&&e.jsx("button",{onClick:()=>window.location.href="/subscribe",className:"mt-2 text-sm font-semibold hover:underline",children:"View Plans â†’"})]})]})})}const J=()=>e.jsxs("svg",{viewBox:"0 0 240 200",className:"w-full h-32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"120",cy:"100",r:"80",fill:"var(--color-primary)",opacity:"0.08"}),e.jsx("circle",{cx:"120",cy:"100",r:"60",fill:"var(--color-primary)",opacity:"0.05"}),e.jsx("ellipse",{cx:"70",cy:"80",rx:"16",ry:"18",fill:"var(--color-primary)"}),e.jsx("path",{d:"M 60 105 Q 70 115 75 130 M 60 105 L 50 125 M 75 105 L 85 125",stroke:"var(--color-primary)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("ellipse",{cx:"120",cy:"70",rx:"18",ry:"20",fill:"var(--color-primary)"}),e.jsx("path",{d:"M 108 95 Q 120 108 126 130 M 108 95 L 95 120 M 126 95 L 140 120",stroke:"var(--color-primary)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("ellipse",{cx:"170",cy:"85",rx:"16",ry:"18",fill:"var(--color-primary)"}),e.jsx("path",{d:"M 160 110 Q 170 120 175 135 M 160 110 L 150 130 M 175 110 L 190 130",stroke:"var(--color-primary)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx(t.circle,{cx:"50",cy:"50",r:"4",fill:"var(--color-primary)",opacity:"0.6",animate:{y:[-5,5,-5],opacity:[.3,.8,.3]},transition:{duration:2,repeat:1/0}}),e.jsx(t.circle,{cx:"180",cy:"45",r:"4",fill:"var(--color-primary)",opacity:"0.6",animate:{y:[5,-5,5],opacity:[.3,.8,.3]},transition:{duration:2.5,repeat:1/0}}),e.jsx(t.circle,{cx:"120",cy:"30",r:"3",fill:"var(--color-primary)",opacity:"0.6",animate:{y:[-8,8,-8],opacity:[.2,.7,.2]},transition:{duration:3,repeat:1/0}})]});function X({isOpen:r,onClose:i,onWelcomeComplete:d}){const[c,m]=s.useState(""),[x,g]=s.useState(!1);s.useEffect(()=>{if(!r)return;const e=e=>{"Escape"===e.key&&i()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r,i]);const u={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},h={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.4,type:"tween"}}};return e.jsx(a,{children:r&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4 backdrop-blur-md",children:e.jsx(p,{focusTrapOptions:{escapeDeactivates:!0,clickOutsideDeactivates:!0},children:e.jsxs(t.div,{initial:{opacity:0,scale:.92,y:30},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.92,y:30},transition:{duration:.4,ease:"easeOut"},className:"bg-background border border-border/50 rounded-2xl shadow-2xl max-w-4xl w-full overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"welcome-modal-title",children:[e.jsx("div",{className:"absolute top-6 right-6 z-10",children:e.jsx(t.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:i,className:"w-11 h-11 flex items-center justify-center hover:bg-muted rounded-lg transition-colors duration-200","aria-label":"Close modal (Escape key also works)",children:e.jsx(w,{className:"w-5 h-5 text-muted-foreground"})})}),e.jsxs("div",{className:"grid grid-cols-1 gap-0",children:[e.jsxs(t.div,{variants:u,initial:"hidden",animate:"visible",className:"bg-gradient-to-br from-primary/5 to-primary/[0.02] p-6 md:p-8 flex flex-col items-center text-center",children:[e.jsx(t.div,{variants:h,className:"mb-4",children:e.jsx(J,{})}),e.jsx(t.div,{variants:h,children:e.jsxs("h1",{id:"welcome-modal-title",className:"text-2xl md:text-3xl font-bold text-foreground mb-2 leading-tight",children:["Welcome to",e.jsx("br",{}),e.jsx("span",{className:"bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Koinonia"})]})}),e.jsx(t.p,{variants:h,className:"text-sm text-muted-foreground leading-relaxed",children:"Connect with your congregation. Send messages, manage groups, and build community."})]}),e.jsxs(t.div,{variants:u,initial:"hidden",animate:"visible",className:"p-6 md:p-8 flex flex-col",children:[e.jsxs(t.div,{variants:h,children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-1",children:"How would you describe your role?"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"We'll personalize your experience based on your position."})]}),e.jsx(t.div,{variants:u,initial:"hidden",animate:"visible",className:"space-y-2 mb-6",children:[{id:"pastor",label:"Pastor / Lead Minister",description:"Lead your congregation spiritually",icon:"â›ª"},{id:"admin",label:"Church Administrator",description:"Manage operations and logistics",icon:"ðŸ“‹"},{id:"communications",label:"Communications Lead",description:"Handle messaging and outreach",icon:"ðŸ“¢"},{id:"volunteer",label:"Volunteer Coordinator",description:"Coordinate volunteer activities",icon:"ðŸ‘¥"},{id:"other",label:"Other",description:"Something else",icon:"â­"}].map(a=>e.jsxs(t.label,{variants:h,whileHover:{scale:1.02},className:"relative flex items-start gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 group "+(c===a.id?"border-primary bg-primary/8 shadow-md":"border-border/30 hover:border-primary/40 hover:bg-muted/40 bg-muted/20"),children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all "+(c===a.id?"border-primary bg-primary":"border-border/50 group-hover:border-primary/50"),children:c===a.id&&e.jsx(t.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},children:e.jsx(k,{className:"w-3 h-3 text-background"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[e.jsx("span",{className:"text-base",children:a.icon}),e.jsx("span",{className:"font-medium text-foreground text-xs",children:a.label})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground leading-tight",children:a.description})]}),e.jsx("input",{type:"radio",name:"role",value:a.id,checked:c===a.id,onChange:e=>m(e.target.value),className:"hidden"})]},a.id))}),e.jsxs(t.div,{variants:h,className:"space-y-2",children:[e.jsx(l,{variant:"primary",size:"lg",fullWidth:!0,onClick:async()=>{if(c){g(!0);try{(await n.post("/auth/complete-welcome",{userRole:c})).data.success&&(o.success("Welcome complete! Let's get started."),d&&d(c,!0),i())}catch(e){o.error("Failed to save your preferences. Please try again.")}finally{g(!1)}}},disabled:!c||x,isLoading:x,className:"bg-primary hover:bg-primary/90 text-background disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-lg hover:shadow-xl transition-all",children:x?"Saving...":c?"Continue":"Select a role to continue"}),e.jsx("button",{onClick:i,disabled:x,className:"w-full py-3 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors rounded-lg hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Skip for now"})]})]})]})]})})})})}function Z(){const r=i(),l={create_branch:()=>r("/branches"),create_group:()=>r("/groups"),add_members:()=>r("/members"),send_message:()=>r("/send-message")},[n,o]=s.useState([{id:"create_branch",title:"Create Your First Branch",description:"Set up a physical location or main campus to organize your members",completed:!1,estimatedTime:"1 min",action:l.create_branch},{id:"create_group",title:"Add a Ministry Group",description:'Organize members by ministry, department, or team (e.g., "Sunday School", "Worship Team")',completed:!1,estimatedTime:"1 min",action:l.create_group},{id:"add_members",title:"Import Members",description:"Upload your contact list via CSV or add members manually",completed:!1,estimatedTime:"2 mins",action:l.add_members},{id:"send_message",title:"Send Your First Message",description:"Try sending a test message to your first group and see instant delivery",completed:!1,estimatedTime:"2 mins",action:l.send_message}]),[d,c]=s.useState(!0),m=n.filter(e=>e.completed).length,x=m/n.length*100;s.useEffect(()=>{const e=localStorage.getItem("onboarding_progress");if(e)try{const t=JSON.parse(e).map(e=>({...e,action:l[e.id]||(()=>{})}));o(t)}catch(t){}},[]),s.useEffect(()=>{localStorage.setItem("onboarding_progress",JSON.stringify(n))},[n]);return d&&m!==n.length?e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white dark:bg-secondary-900 border border-gray-200 dark:border-secondary-700 rounded-2xl p-6 shadow-lg mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Get Started with YWMESSAGING"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Complete these steps to send your first message"})]}),e.jsx("button",{onClick:()=>c(!1),"aria-label":"Dismiss onboarding checklist",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-secondary-700 transition-colors",children:e.jsx(w,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[m," of ",n.length," completed"]}),e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[Math.round(x),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-secondary-700 rounded-full h-2",children:e.jsx(t.div,{initial:{width:0},animate:{width:`${x}%`},transition:{duration:.5,ease:"easeOut"},className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full"})})]}),e.jsx("div",{className:"space-y-3",children:e.jsx(a,{children:n.map((a,r)=>e.jsxs(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{delay:.1*r,duration:.3},className:`\n                flex items-start gap-3 p-4 rounded-lg border transition-colors\n                ${a.completed?"bg-green-50 dark:bg-green-500/10 border-green-200 dark:border-green-500/30":"bg-gray-50 dark:bg-secondary-800 border-gray-200 dark:border-secondary-700 hover:border-blue-300 dark:hover:border-blue-500/50 hover:bg-blue-50 dark:hover:bg-secondary-700/50"}\n              `,children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:a.completed?e.jsx(t.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},children:e.jsx(C,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}):e.jsx(S,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("h3",{className:"font-medium "+(a.completed?"text-green-900 dark:text-green-300":"text-gray-900 dark:text-white"),children:a.title}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-white dark:bg-secondary-900 px-2 py-1 rounded-full",children:a.estimatedTime})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.description})]}),!a.completed&&e.jsxs("button",{onClick:()=>{var e;a.action(),e=a.id,o(t=>t.map(t=>t.id===e?{...t,completed:!0}:t))},className:"flex-shrink-0 flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm px-3 py-2 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-500/20 transition-colors whitespace-nowrap",children:["Start",e.jsx(L,{className:"w-4 h-4"})]})]},a.id))})}),e.jsx(a,{children:m===n.length&&e.jsx(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"mt-4 p-4 bg-green-50 dark:bg-green-500/10 border border-green-200 dark:border-green-500/30 rounded-lg",children:e.jsxs("p",{className:"text-green-900 dark:text-green-300 font-medium flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5"}),"Congratulations! You're all set up. Start messaging your church today!"]})})})]}):null}function q({deliveryRate:a=65,dlcStatus:r="pending"}){const s=i(),l="approved"===r,n="pending"===r||"shared_brand"===r;return e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"relative overflow-hidden rounded-2xl p-6 text-white",style:{background:l?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)"},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute w-72 h-72 rounded-full blur-3xl",style:{background:"rgba(255, 255, 255, 0.1)",animation:"pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite",top:"-50%",right:"-50%"}})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90 font-medium",children:"Message Delivery Rate"}),e.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[e.jsxs("p",{className:"text-4xl font-bold",children:[a,"%"]}),l&&e.jsx("span",{className:"text-sm bg-white/20 px-2 py-1 rounded-full",children:"Premium"})]})]}),e.jsx(t.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:e.jsx(D,{className:"w-8 h-8"})})]}),e.jsx("p",{className:"text-sm opacity-90 mb-6 max-w-xs",children:l?"Your messages reach church members with enterprise-grade reliability":"Upgrade to 10DLC registration for 99% delivery rate and faster message speeds"}),e.jsxs("div",{className:"flex gap-3",children:[n&&e.jsxs(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s("/admin/settings"),className:"bg-white text-blue-600 px-4 py-2 rounded-lg font-medium text-sm hover:bg-gray-100 transition-colors flex items-center gap-2",children:["Upgrade to 99% Delivery",e.jsx(M,{className:"w-4 h-4"})]}),l&&e.jsxs(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"bg-white/20 px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 backdrop-blur-sm border border-white/30",children:[e.jsx(C,{className:"w-5 h-5"}),"Enterprise Delivery Enabled"]})]}),e.jsxs(t.button,{whileHover:{x:4},onClick:()=>s("/admin/settings"),className:"mt-4 text-sm opacity-90 hover:opacity-100 transition-opacity flex items-center gap-1 group",children:["Learn more about 10DLC",e.jsx(M,{className:"w-3 h-3 group-hover:translate-x-1 transition-transform"})]})]})]})}const ee=s.lazy(()=>r(()=>import("./PhoneNumberPurchaseModal-jG7i5dnd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),te=["#4A9FBF","#FFB81C","#98C26E","#505050"];function ae(){const{user:a,church:r}=d(),{branches:i,currentBranchId:l,setBranches:n,setLoading:p}=c(),[v,w]=s.useState(!0),[k,C]=s.useState(0),[S,L]=s.useState(0),[D,M]=s.useState(null),[J,ae]=s.useState(null),[re,se]=s.useState(!1),[ie,le]=s.useState(!1),[ne,oe]=s.useState(!1),[de,ce]=s.useState(null),[me,xe]=s.useState(!1);s.useEffect(()=>{(async()=>{if(r?.id)if(i.length>0)xe(!0);else{p(!0);try{const e=await m(r.id);n(e)}catch(e){}finally{p(!1),xe(!0)}}else xe(!0)})()},[r?.id,i.length,n,p]),s.useEffect(()=>{const e=a?.welcomeCompleted;!e&&a&&se(!0)},[a]);const ge=s.useCallback((e,t)=>{if(a&&r){const{setAuth:s}=d.getState();s({...a,welcomeCompleted:t,userRole:e},r,d.getState().accessToken||"",d.getState().refreshToken||"")}ne||le(!0)},[a,r,ne]),ue=s.useCallback(e=>{oe(!0),o.success("Phone number configured successfully!")},[]);s.useEffect(()=>{a&&(async()=>{try{await y(),oe(!0)}catch(e){oe(!1)}})()},[a]),s.useEffect(()=>{me&&he()},[me]);const he=async()=>{try{w(!0);const[t,a,r]=await Promise.all([b().catch(e=>null),x().catch(()=>null),g({days:7}).catch(()=>null)]);if(t&&ce(t),a&&ae(a),r&&M(r),l)try{const e=await h(l);if(L(e.length),e.length>0){const t=await u(e[0].id,{limit:1});C(t.pagination.total)}}catch(e){}}catch(e){o.error("Failed to load dashboard data")}finally{w(!1)}},pe=i.length,be=J?.totalMessages||0,ye=D?.deliveryRate||0,je=J?.totalGroups||0,fe=s.useMemo(()=>D?.byDay?D.byDay.map(e=>({name:new Date(e.date).toLocaleDateString("en-US",{weekday:"short"}),delivered:e.delivered,failed:e.failed})):[],[D?.byDay]),ve=s.useMemo(()=>D?.byDay?D.byDay.map((e,t)=>({name:`Day ${t+1}`,sent:e.count,delivered:e.delivered})):[],[D?.byDay]),Ne=s.useMemo(()=>[{name:"Delivered",value:D?.deliveredCount||0},{name:"Failed",value:D?.failedCount||0},{name:"Pending",value:D?.pendingCount||0}],[D?.deliveredCount,D?.failedCount,D?.pendingCount]);return e.jsxs(e.Fragment,{children:[e.jsx(f,{children:e.jsxs("div",{className:"px-4 md:px-8 py-8 w-full",children:[e.jsx("div",{className:"mb-8",children:e.jsx(Q,{})}),e.jsx("div",{className:"mb-8",children:e.jsx(Z,{})}),e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold text-foreground mb-2",children:["Welcome back, ",e.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:a?.firstName})]}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:[r?.name," â€¢ ",(new Date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]}),de&&e.jsx(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:e.jsx(V,{dlcStatus:de.dlcStatus,deliveryRate:de.deliveryRate,wantsPremiumDelivery:de.wantsPremiumDelivery,variant:"badge"})})]}),"shared_brand"===de?.dlcStatus&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 border-l-4 border-green-500 bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"ðŸš€ Ready for better SMS delivery?"}),e.jsx("p",{className:"text-xs text-gray-700 mt-1",children:"Upgrade to Premium 10DLC for 99% delivery rate. Visit your settings to enable it."})]}),e.jsx(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.hash="#/admin/settings",className:"text-xs font-semibold text-green-700 hover:text-green-800 whitespace-nowrap ml-4",children:"Upgrade â†’"})]})}),v?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(t.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0},children:e.jsx(T,{className:"w-8 h-8 text-primary"})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(I,{icon:_,label:"Messages Sent",value:be.toLocaleString(),change:12,changeType:"positive",gradient:"from-primary to-accent",index:0}),e.jsx(I,{icon:E,label:"Total Members",value:k.toLocaleString(),change:8,changeType:"positive",gradient:"from-green-500 to-emerald-500",index:1}),e.jsx(I,{icon:P,label:"Delivery Rate",value:`${ye.toFixed(1)}%`,change:-2,changeType:"negative",gradient:"from-purple-500 to-pink-500",index:2}),e.jsx(I,{icon:R,label:"Active Groups",value:je.toString(),change:5,changeType:"positive",gradient:"from-orange-500 to-red-500",index:3})]}),de&&e.jsx("div",{className:"mb-8",children:e.jsx(q,{deliveryRate:de.deliveryRate||ye,dlcStatus:de.dlcStatus})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(j,{variant:"gradient",index:0,children:[e.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Messages Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Last 7 days delivery rate"}),fe.length>0?e.jsx($,{width:"100%",height:300,children:e.jsxs(B,{data:fe,children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"rgba(120,120,120,0.1)"}),e.jsx(W,{dataKey:"name",stroke:"rgba(120,120,120,0.5)"}),e.jsx(A,{stroke:"rgba(120,120,120,0.5)"}),e.jsx(O,{contentStyle:{backgroundColor:"rgba(20,20,30,0.95)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px"}}),e.jsx(z,{dataKey:"delivered",fill:te[0],radius:[8,8,0,0]}),e.jsx(z,{dataKey:"failed",fill:te[3],radius:[8,8,0,0]})]})}):e.jsx("div",{className:"h-80 flex items-center justify-center text-muted-foreground",children:"No data available"})]})}),e.jsx("div",{children:e.jsxs(j,{variant:"gradient",index:1,children:[e.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Message Status"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Distribution"}),Ne.some(e=>e.value>0)?e.jsx($,{width:"100%",height:300,children:e.jsxs(U,{children:[e.jsx(G,{data:Ne,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",children:Ne.map((t,a)=>e.jsx(K,{fill:te[a%te.length]},`cell-${a}`))}),e.jsx(O,{contentStyle:{backgroundColor:"rgba(20,20,30,0.95)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px"}})]})}):e.jsx("div",{className:"h-80 flex items-center justify-center text-muted-foreground",children:"No data available"})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(j,{variant:"gradient",index:2,children:[e.jsx("h3",{className:"text-lg font-bold text-foreground mb-4",children:"Message Trends"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Sent vs Delivered over time"}),ve.length>0?e.jsx($,{width:"100%",height:350,children:e.jsxs(Y,{data:ve,children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"rgba(120,120,120,0.1)"}),e.jsx(W,{dataKey:"name",stroke:"rgba(120,120,120,0.5)"}),e.jsx(A,{stroke:"rgba(120,120,120,0.5)"}),e.jsx(O,{contentStyle:{backgroundColor:"rgba(20,20,30,0.95)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px"}}),e.jsx(H,{type:"monotone",dataKey:"sent",stroke:te[0],strokeWidth:3,dot:{fill:te[0],r:5}}),e.jsx(H,{type:"monotone",dataKey:"delivered",stroke:te[1],strokeWidth:3,dot:{fill:te[1],r:5}})]})}):e.jsx("div",{className:"h-96 flex items-center justify-center text-muted-foreground",children:"No data available"})]})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs(j,{variant:"default",index:3,children:[e.jsx("h3",{className:"text-lg font-bold text-foreground mb-6",children:"Quick Stats"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Branches",value:pe},{label:"Groups",value:je},{label:"Members",value:k},{label:"Messages",value:be}].map((a,r)=>e.jsxs(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*r},className:"p-4 rounded-xl bg-muted/50 border border-border/40 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 font-medium",children:a.label}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:a.value})]},r))})]})})]})]})}),e.jsx(N,{variant:"floating",position:"bottom-right"}),e.jsx(X,{isOpen:re,onClose:()=>se(!1),onWelcomeComplete:ge}),ie&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(ee,{isOpen:ie,onClose:()=>le(!1),onPurchaseComplete:ue})})]})}export{ae as DashboardPage,ae as default};
