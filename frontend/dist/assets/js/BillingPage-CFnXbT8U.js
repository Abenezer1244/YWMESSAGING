import{j as e,m as s}from"./vendor-ui-DhbhiCKM.js";import{u as t,a}from"./vendor-react-DC7Nk3dg.js";import{_ as i}from"./index-DRgsfogx.js";import{a as r,c as n}from"./billing-CQffhvTZ.js";import{a as l,S as d}from"./SoftLayout-DYnejCwh.js";import{S as c}from"./SoftButton-CoQCJuB5.js";import{L as o,f as m}from"./vendor-utils-C8GUPZyx.js";function x(){const x=t(),[h,u]=a.useState(null),[g,j]=a.useState(!0),[f,p]=a.useState(!1);a.useEffect(()=>{(async()=>{try{j(!0);const e=await r();u(e)}catch(e){i.error(e.message||"Failed to load billing info")}finally{j(!1)}})()},[]);if(g)return e.jsx(l,{children:e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:e.jsx(s.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0},children:e.jsx(o,{className:"w-8 h-8 text-primary"})})})});if(!h)return e.jsx(l,{children:e.jsx("div",{className:"px-4 md:px-8 py-8 w-full",children:e.jsxs(d,{className:"text-center py-16",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-3",children:"Failed to Load Billing Information"}),e.jsx("p",{className:"text-muted-foreground",children:"Please try refreshing the page or contact support if the issue persists."})]})})});const b=e=>e>=90?"bg-danger-500":e>=70?"bg-warning-500":"bg-success-500",y=({label:s,used:t,limit:a})=>{const i=((e,s)=>s>1e5?0:Math.round(e/s*100))(t,a),r=a>1e5;return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:s}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t," / ",r?"∞":a]})]}),!r&&e.jsx("div",{className:"w-full bg-muted-foreground/20 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${b(i)}`,style:{width:`${Math.min(i,100)}%`}})}),r&&e.jsx("div",{className:"text-sm text-success-500 dark:text-success-400",children:"Unlimited"})]})};return e.jsx(l,{children:e.jsxs("div",{className:"px-4 md:px-8 py-8 w-full",children:[e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:e.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Billing"})}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your subscription and view usage"})]}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"mb-8",children:e.jsxs(d,{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Current Plan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs(d,{variant:"gradient",children:[e.jsxs("h3",{className:"text-xl font-bold text-foreground",children:[{starter:"Starter",growth:"Growth",pro:"Pro"}[h.plan]," Plan"]}),e.jsxs("p",{className:"text-3xl font-bold text-primary mt-2",children:["$",h.limits.price/100,e.jsx("span",{className:"text-lg text-muted-foreground",children:"/month"})]}),e.jsx(c,{variant:"primary",onClick:()=>x("/subscribe"),fullWidth:!0,className:"mt-4",children:"Change Plan"}),e.jsx(c,{variant:"danger",onClick:async()=>{if(confirm("Are you sure you want to cancel your subscription?"))try{p(!0),await n(),i.success("Subscription cancelled"),x("/dashboard")}catch(e){i.error(e.message||"Failed to cancel subscription")}finally{p(!1)}},disabled:f,fullWidth:!0,className:"mt-3",children:f?"Cancelling...":"Cancel Subscription"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4",children:"Features included:"}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.limits.features.map((t,a)=>e.jsxs(s.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*a},className:"flex items-start gap-3",children:[e.jsx(m,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-muted-foreground",children:t})]},a))})]})]})]})}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:e.jsxs(d,{children:[e.jsxs("h2",{className:"text-2xl font-bold text-foreground mb-6",children:["Current Usage (",(new Date).toLocaleDateString(),")"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Organization"}),e.jsx(y,{label:"Branches",used:h.usage.branches,limit:h.limits.branches}),e.jsx(y,{label:"Co-Admins",used:h.usage.coAdmins,limit:h.limits.coAdmins})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Messaging"}),e.jsx(y,{label:"Members",used:h.usage.members,limit:h.limits.members}),e.jsx(y,{label:"Messages (This Month)",used:h.usage.messagesThisMonth,limit:h.limits.messagesPerMonth})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-8 pt-8 border-t border-border/40",children:[e.jsxs(d,{variant:"gradient",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Branches"}),e.jsx("p",{className:"text-2xl font-bold text-primary mt-2",children:999999===h.remaining.branches?"∞":h.remaining.branches})]}),e.jsxs(d,{variant:"gradient",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Members"}),e.jsx("p",{className:"text-2xl font-bold text-green-400 mt-2",children:999999===h.remaining.members?"∞":h.remaining.members})]}),e.jsxs(d,{variant:"gradient",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Messages"}),e.jsx("p",{className:"text-2xl font-bold text-cyan-400 mt-2",children:999999===h.remaining.messagesPerMonth?"∞":h.remaining.messagesPerMonth})]}),e.jsxs(d,{variant:"gradient",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Co-Admins"}),e.jsx("p",{className:"text-2xl font-bold text-amber-400 mt-2",children:999999===h.remaining.coAdmins?"∞":h.remaining.coAdmins})]})]})]})}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsxs(d,{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Billing Information"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Your subscription is billed monthly. You can manage your payment method and invoices through Stripe."}),e.jsx(c,{variant:"primary",children:"Manage in Stripe"})]})})]})})}export{x as BillingPage,x as default};
