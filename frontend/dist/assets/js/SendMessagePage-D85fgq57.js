import{j as e,m as t}from"./vendor-ui-DmDBw7yB.js";import{a as s}from"./vendor-react-GajVb7Yi.js";import{I as a,_ as r,i}from"./index-BPwADyyg.js";import{s as l}from"./messages-B7GBjJTn.js";import{g as n,T as o}from"./TemplateFormModal-BYmQE39K.js";import{S as d,a as c}from"./SoftLayout-DSbEAR6L.js";import{S as m}from"./SoftButton-BT31kdh0.js";import{s as u,a as x}from"./rcs-DKvzY8mR.js";import{n as p,I as g,o as h,G as f,p as b,l as j,M as y,q as v,X as N,L as w,r as S,b as C,F as k,j as T}from"./vendor-utils-DyFjxm_c.js";import"./index.esm-BdG2FjqQ.js";function U({onSuccess:i,onCancel:l}){const[n,o]=s.useState(!1),[c,x]=s.useState(!1),[S,C]=s.useState({title:"",description:"",imageUrl:"",rsvpUrl:"",websiteUrl:"",phoneNumber:"",quickReplies:[]}),[k,T]=s.useState(""),U=()=>{k.trim()&&((S.quickReplies?.length||0)>=5?r.error("Maximum 5 quick replies allowed"):(C({...S,quickReplies:[...S.quickReplies||[],k.trim()]}),T("")))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-primary/20 to-accent/20",children:e.jsx(p,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Rich Card Announcement"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send a beautiful card with images, buttons, and quick replies"})]})]}),e.jsxs(d,{variant:"gradient",className:"border-2 border-dashed border-primary/30",children:[e.jsxs("div",{className:"text-xs text-muted-foreground mb-2 flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),"Preview (iMessage-style)"]}),e.jsxs("div",{className:"bg-card rounded-xl overflow-hidden shadow-lg max-w-sm mx-auto",children:[S.imageUrl&&e.jsx("div",{className:"h-40 bg-muted flex items-center justify-center",children:e.jsx("img",{src:S.imageUrl,alt:"Preview",className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-bold text-foreground text-lg",children:S.title||"Card Title"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-3",children:S.description||"Your announcement description will appear here..."}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[S.rsvpUrl&&e.jsx("span",{className:"px-3 py-1 text-xs bg-primary/10 text-primary rounded-full",children:"RSVP"}),S.websiteUrl&&e.jsx("span",{className:"px-3 py-1 text-xs bg-primary/10 text-primary rounded-full",children:"Website"}),S.phoneNumber&&e.jsx("span",{className:"px-3 py-1 text-xs bg-primary/10 text-primary rounded-full",children:"Call"}),S.location&&e.jsx("span",{className:"px-3 py-1 text-xs bg-primary/10 text-primary rounded-full",children:"Directions"})]})]}),S.quickReplies&&S.quickReplies.length>0&&e.jsx("div",{className:"px-4 pb-4 flex flex-wrap gap-2",children:S.quickReplies.map((t,s)=>e.jsx("span",{className:"px-3 py-1.5 text-sm bg-muted text-foreground rounded-full border border-border",children:t},s))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{label:"Title *",value:S.title,onChange:e=>C({...S,title:e.target.value}),placeholder:"Sunday Service Announcement",maxLength:200}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),e.jsx("textarea",{value:S.description,onChange:e=>C({...S,description:e.target.value}),placeholder:"Join us this Sunday for a special service...",className:"w-full px-4 py-3 border border-border/40 rounded-lg bg-card/50 text-foreground placeholder-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary resize-none",rows:3,maxLength:2e3}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[S.description?.length||0," / 2000"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Image URL (optional)"]}),e.jsx("input",{type:"url",value:S.imageUrl,onChange:e=>C({...S,imageUrl:e.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-2.5 border border-border/40 rounded-lg bg-card/50 text-foreground placeholder-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs(d,{children:[e.jsxs("h4",{className:"font-medium text-foreground mb-4 flex items-center gap-2",children:["Action Buttons",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(appear on the card)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"RSVP Link"]}),e.jsx("input",{type:"url",value:S.rsvpUrl,onChange:e=>C({...S,rsvpUrl:e.target.value}),placeholder:"https://yourchurch.com/rsvp",className:"w-full px-3 py-2 border border-border/40 rounded-lg bg-card/50 text-foreground placeholder-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"Website"]}),e.jsx("input",{type:"url",value:S.websiteUrl,onChange:e=>C({...S,websiteUrl:e.target.value}),placeholder:"https://yourchurch.com",className:"w-full px-3 py-2 border border-border/40 rounded-lg bg-card/50 text-foreground placeholder-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Call Button"]}),e.jsx("input",{type:"tel",value:S.phoneNumber,onChange:e=>C({...S,phoneNumber:e.target.value}),placeholder:"+12025551234",className:"w-full px-3 py-2 border border-border/40 rounded-lg bg-card/50 text-foreground placeholder-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Directions"]}),e.jsx(m,{variant:c?"primary":"secondary",size:"sm",onClick:()=>x(!c),className:"w-full",children:c?"Hide Location":"Add Location"})]})]}),c&&e.jsx(t.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-border/40",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(a,{label:"Latitude",type:"number",step:"any",value:S.location?.latitude||"",onChange:e=>C({...S,location:{...S.location,latitude:parseFloat(e.target.value)||0,longitude:S.location?.longitude||0,label:S.location?.label||""}}),placeholder:"47.6062"}),e.jsx(a,{label:"Longitude",type:"number",step:"any",value:S.location?.longitude||"",onChange:e=>C({...S,location:{...S.location,latitude:S.location?.latitude||0,longitude:parseFloat(e.target.value)||0,label:S.location?.label||""}}),placeholder:"-122.3321"}),e.jsx(a,{label:"Location Name",value:S.location?.label||"",onChange:e=>C({...S,location:{...S.location,latitude:S.location?.latitude||0,longitude:S.location?.longitude||0,label:e.target.value}}),placeholder:"Grace Church"})]})})]}),e.jsxs(d,{children:[e.jsxs("h4",{className:"font-medium text-foreground mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Quick Replies",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(tap-to-respond buttons)"})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:k,onChange:e=>T(e.target.value),onKeyDown:e=>"Enter"===e.key&&U(),placeholder:"Add a quick reply...",maxLength:50,className:"flex-1 px-3 py-2 border border-border/40 rounded-lg bg-card/50 text-foreground placeholder-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary text-sm"}),e.jsx(m,{variant:"secondary",size:"sm",onClick:U,disabled:(S.quickReplies?.length||0)>=5,children:e.jsx(v,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.quickReplies?.map((s,a)=>e.jsxs(t.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"px-3 py-1.5 bg-muted rounded-full flex items-center gap-2 text-sm",children:[s,e.jsx("button",{onClick:()=>(e=>{C({...S,quickReplies:S.quickReplies?.filter((t,s)=>s!==e)})})(a),className:"text-muted-foreground hover:text-foreground",children:e.jsx(N,{className:"w-3 h-3"})})]},a))}),(!S.quickReplies||0===S.quickReplies.length)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:'Suggestions: "I\'ll be there!", "Can\'t make it", "Tell me more"'})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[l&&e.jsx(m,{variant:"secondary",onClick:l,children:"Cancel"}),e.jsx(m,{variant:"primary",fullWidth:!0,onClick:async()=>{if(S.title.trim())if(S.description?.trim())try{o(!0);const e={title:S.title.trim(),description:S.description?.trim()};S.imageUrl?.trim()&&(e.imageUrl=S.imageUrl.trim()),S.rsvpUrl?.trim()&&(e.rsvpUrl=S.rsvpUrl.trim()),S.websiteUrl?.trim()&&(e.websiteUrl=S.websiteUrl.trim()),S.phoneNumber?.trim()&&(e.phoneNumber=S.phoneNumber.trim()),S.location?.latitude&&S.location?.longitude&&(e.location=S.location),S.quickReplies&&S.quickReplies.length>0&&(e.quickReplies=S.quickReplies);const t=await u(e);r.success(`Announcement sent! RCS: ${t.results.rcs}, SMS: ${t.results.sms}, MMS: ${t.results.mms}`),C({title:"",description:"",imageUrl:"",rsvpUrl:"",websiteUrl:"",phoneNumber:"",quickReplies:[]}),i?.()}catch(e){r.error(e.message||"Failed to send announcement")}finally{o(!1)}else r.error("Description is required");else r.error("Title is required")},disabled:n||!S.title.trim()||!S.description?.trim(),icon:n?e.jsx(t.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(w,{className:"w-4 h-4"})}):e.jsx(p,{className:"w-4 h-4"}),children:n?"Sending...":"Send Rich Announcement"})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Recipients with RCS-enabled phones will see the rich card. Others will receive SMS/MMS fallback."})]})}function R({onSuccess:i,onCancel:l}){const[n,o]=s.useState(!1),[c,u]=s.useState(!1),[p,f]=s.useState({title:"",description:"",imageUrl:"",date:"",startTime:"",endTime:"",location:{latitude:0,longitude:0,label:""}}),b=()=>{if(!p.startTime||!p.endTime)return"";const e=e=>{const[t,s]=e.split(":"),a=parseInt(t);return`${a%12||12}:${s} ${a>=12?"PM":"AM"}`};return`${e(p.startTime)} - ${e(p.endTime)}`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-primary/20 to-accent/20",children:e.jsx(S,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Event Invitation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Send an event card with RSVP and "Add to Calendar" button'})]})]}),e.jsxs(d,{variant:"gradient",className:"border-2 border-dashed border-primary/30",children:[e.jsxs("div",{className:"text-xs text-muted-foreground mb-2 flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),"Preview (iMessage-style)"]}),e.jsxs("div",{className:"bg-card rounded-xl overflow-hidden shadow-lg max-w-sm mx-auto",children:[p.imageUrl&&e.jsx("div",{className:"h-32 bg-muted flex items-center justify-center",children:e.jsx("img",{src:p.imageUrl,alt:"Event",className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"font-bold text-foreground text-lg",children:p.title||"Event Title"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:p.description||"Event description..."}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-foreground/80",children:[e.jsx(h,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:(()=>{if(!p.date)return"Select a date";return new Date(p.date+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})()})]}),b()&&e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-foreground/80",children:[e.jsx(C,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:b()})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx("span",{className:"px-3 py-1 text-xs bg-primary/10 text-primary rounded-full",children:"Add to Calendar"}),p.location.label&&e.jsx("span",{className:"px-3 py-1 text-xs bg-primary/10 text-primary rounded-full",children:"Get Directions"})]})]}),e.jsxs("div",{className:"px-4 pb-4 flex flex-wrap gap-2",children:[e.jsx("span",{className:"px-3 py-1.5 text-sm bg-muted text-foreground rounded-full border border-border",children:"I'll be there!"}),e.jsx("span",{className:"px-3 py-1.5 text-sm bg-muted text-foreground rounded-full border border-border",children:"Can't make it"}),e.jsx("span",{className:"px-3 py-1.5 text-sm bg-muted text-foreground rounded-full border border-border",children:"Maybe"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(a,{label:"Event Title *",value:p.title,onChange:e=>f({...p,title:e.target.value}),placeholder:"Sunday Worship Service",maxLength:200}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),e.jsx("textarea",{value:p.description,onChange:e=>f({...p,description:e.target.value}),placeholder:"Join us for a special worship service with guest speaker...",className:"w-full px-4 py-3 border border-border/40 rounded-lg bg-card/50 text-foreground placeholder-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary resize-none",rows:3,maxLength:1e3})]}),e.jsxs(d,{children:[e.jsxs("h4",{className:"font-medium text-foreground mb-4 flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"Date & Time *"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Date"}),e.jsx("input",{type:"date",value:p.date,onChange:e=>f({...p,date:e.target.value}),className:"w-full px-3 py-2 border border-border/40 rounded-lg bg-card/50 text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Start Time"}),e.jsx("input",{type:"time",value:p.startTime,onChange:e=>f({...p,startTime:e.target.value}),className:"w-full px-3 py-2 border border-border/40 rounded-lg bg-card/50 text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"End Time"}),e.jsx("input",{type:"time",value:p.endTime,onChange:e=>f({...p,endTime:e.target.value}),className:"w-full px-3 py-2 border border-border/40 rounded-lg bg-card/50 text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Event Image URL (optional)"]}),e.jsx("input",{type:"url",value:p.imageUrl,onChange:e=>f({...p,imageUrl:e.target.value}),placeholder:"https://example.com/event-image.jpg",className:"w-full px-4 py-2.5 border border-border/40 rounded-lg bg-card/50 text-foreground placeholder-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-medium text-foreground flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),"Location",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional - adds Directions button)"})]}),e.jsx(m,{variant:c?"primary":"secondary",size:"sm",onClick:()=>u(!c),children:c?"Hide":"Add Location"})]}),c&&e.jsxs(t.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(a,{label:"Latitude",type:"number",step:"any",value:p.location.latitude||"",onChange:e=>f({...p,location:{...p.location,latitude:parseFloat(e.target.value)||0}}),placeholder:"47.6062"}),e.jsx(a,{label:"Longitude",type:"number",step:"any",value:p.location.longitude||"",onChange:e=>f({...p,location:{...p.location,longitude:parseFloat(e.target.value)||0}}),placeholder:"-122.3321"}),e.jsx(a,{label:"Location Name",value:p.location.label,onChange:e=>f({...p,location:{...p.location,label:e.target.value}}),placeholder:"Grace Church"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[l&&e.jsx(m,{variant:"secondary",onClick:l,children:"Cancel"}),e.jsx(m,{variant:"primary",fullWidth:!0,onClick:async()=>{if(p.title.trim())if(p.description.trim())if(p.date)if(p.startTime&&p.endTime)try{o(!0);const e=new Date(`${p.date}T${p.startTime}`).toISOString(),t=new Date(`${p.date}T${p.endTime}`).toISOString(),s={title:p.title.trim(),description:p.description.trim(),startTime:e,endTime:t};p.imageUrl?.trim()&&(s.imageUrl=p.imageUrl.trim()),p.location.latitude&&p.location.longitude&&p.location.label&&(s.location=p.location);const a=await x(s);r.success(`Event invitation sent! RCS: ${a.results.rcs}, SMS: ${a.results.sms}`),f({title:"",description:"",imageUrl:"",date:"",startTime:"",endTime:"",location:{latitude:0,longitude:0,label:""}}),i?.()}catch(e){r.error(e.message||"Failed to send event invitation")}finally{o(!1)}else r.error("Start and end times are required");else r.error("Event date is required");else r.error("Event description is required");else r.error("Event title is required")},disabled:n||!p.title.trim()||!p.description.trim()||!p.date||!p.startTime||!p.endTime,icon:n?e.jsx(t.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(w,{className:"w-4 h-4"})}):e.jsx(S,{className:"w-4 h-4"}),children:n?"Sending...":"Send Event Invitation"})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:'Recipients can tap "Add to Calendar" to save the event. RSVP replies will appear in your conversations.'})]})}function q(){const{addMessage:a}=i(),[u,x]=s.useState("sms"),[g,h]=s.useState(""),[f,b]=s.useState(!1),[j,v]=s.useState(!1),[N,S]=s.useState([]),[C,q]=s.useState(!1);s.useEffect(()=>{M()},[]);const M=async()=>{v(!0);try{const e=await n().catch(e=>[]);S(e)}catch(e){r.error("Failed to load page data")}finally{v(!1)}},L=Math.ceil(g.length/160)||0;return e.jsxs(c,{children:[e.jsxs("div",{className:"px-4 md:px-8 py-8 w-full max-w-4xl mx-auto",children:[e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:e.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Send Message"})}),e.jsx("p",{className:"text-muted-foreground",children:"Reach your congregation with SMS or rich messages"})]})}),e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.05},className:"mb-6",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(m,{variant:"sms"===u?"primary":"secondary",size:"md",onClick:()=>x("sms"),icon:e.jsx(y,{className:"w-4 h-4"}),children:"Text SMS"}),e.jsx(m,{variant:"rich-card"===u?"primary":"secondary",size:"md",onClick:()=>x("rich-card"),icon:e.jsx(p,{className:"w-4 h-4"}),children:"Rich Announcement"}),e.jsx(m,{variant:"event"===u?"primary":"secondary",size:"md",onClick:()=>x("event"),icon:e.jsx(k,{className:"w-4 h-4"}),children:"Event Invitation"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["sms"===u&&"Standard text message - works on all phones","rich-card"===u&&"iMessage-style card with image, buttons & quick replies (requires RCS setup)","event"===u&&'Event invitation with "Add to Calendar" button (requires RCS setup)']})]}),e.jsxs(d,{className:"space-y-6",children:["rich-card"===u&&e.jsx(U,{onSuccess:()=>{}}),"event"===u&&e.jsx(R,{onSuccess:()=>{}}),"sms"===u&&e.jsxs(e.Fragment,{children:[N.length>0&&e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("label",{className:"block text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Use Template"]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[N.slice(0,6).map(t=>e.jsx(m,{variant:"secondary",size:"sm",onClick:()=>(e=>{h(e.content),r.success(`Using template: ${e.name}`)})(t),children:t.name},t.id)),N.length>6&&e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>window.location.href="/templates",children:"More Templates..."})]})]}),e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},children:[e.jsxs("label",{className:"block text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Message Content"]}),e.jsx("textarea",{value:g,onChange:e=>h(e.target.value.slice(0,1600)),className:"w-full px-4 py-3 border border-border/40 rounded-lg bg-card/50 text-foreground placeholder-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-primary resize-none transition-colors duration-normal backdrop-blur-sm",rows:6,placeholder:"Type your message here...",maxLength:1600}),e.jsxs("div",{className:"flex justify-between mt-3 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[g.length," / 1600 characters"]}),e.jsxs("span",{children:[L," SMS segment",1!==L?"s":"",L>0&&` ($${(.0075*L).toFixed(4)} per recipient)`]})]}),g.trim()&&e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>q(!0),className:"mt-2",children:"Save as Template"})]}),e.jsx(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(d,{variant:"gradient",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:"ðŸ“¬ Message will be sent to:"}),e.jsx("p",{className:"text-sm text-foreground/80",children:"All members in your church"})]})})}),L>0&&e.jsx(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.25},children:e.jsx(d,{variant:"gradient",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/80",children:"Cost per recipient:"}),e.jsxs("span",{className:"font-medium text-foreground",children:["$",(.0075*L).toFixed(4)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-foreground/80",children:"Segments:"}),e.jsx("span",{className:"font-medium text-foreground",children:L})]}),e.jsx("div",{className:"border-t border-border/40 pt-2",children:e.jsx("p",{className:"text-xs text-foreground/60",children:"Total cost will depend on the number of members who receive this message"})})]})})}),e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex gap-3 pt-4",children:[e.jsx(m,{variant:"secondary",size:"md",onClick:()=>{h("")},disabled:f,children:"Clear"}),e.jsx(m,{variant:"primary",size:"md",fullWidth:!0,onClick:async()=>{if(g.trim())try{b(!0);const e=await l({content:g.trim(),targetType:"all"});a(e),r.success(`Message queued for ${e.totalRecipients} recipients`),h("")}catch(e){r.error(e.message||"Failed to send message")}finally{b(!1)}else r.error("Please enter a message")},disabled:f||!g.trim(),icon:f?e.jsx(t.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(w,{className:"w-4 h-4"})}):e.jsx(T,{className:"w-4 h-4"}),children:f?"Sending...":"Send Message"})]})]})]})]}),C&&e.jsx(o,{template:null,onClose:()=>{q(!1),M()}})]})}export{q as SendMessagePage,q as default};
