import{c as e,B as t,_ as n}from"./index-W0mBZmb_.js";import{j as r,A as a,m as o}from"./vendor-ui-DhbhiCKM.js";import{i,r as s,g as c,a as l}from"./vendor-react-DC7Nk3dg.js";import{u,a as d,C as p,E as f,l as m}from"./index-BO2dpB2-.js";import{w as v,X as b}from"./vendor-utils-C8GUPZyx.js";async function h(){return(await e.get("/numbers/current")).data.data}async function y(t){return(await e.delete("/numbers/current",{data:t})).data}async function g(){return(await e.get("/admin/profile")).data}async function x(t){return(await e.put("/admin/profile",t)).data}async function w(){return(await e.get("/admin/co-admins")).data}async function N(t){return(await e.post("/admin/co-admins",t)).data}async function j(t){return(await e.delete(`/admin/co-admins/${t}`)).data}async function O(t=1,n=50){return(await e.get("/admin/activity-logs",{params:{page:t,limit:n}})).data}async function k(t){return(await e.post("/admin/phone-numbers/link",{phoneNumber:t})).data}var E={exports:{}},S=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],P=S.join(","),F="undefined"==typeof Element,T=F?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,D=!F&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},C=function(e,t){var n;void 0===t&&(t=!0);var r=null==e||null===(n=e.getAttribute)||void 0===n?void 0:n.call(e,"inert");return""===r||"true"===r||t&&e&&C(e.parentNode)},I=function(e,t,n){if(C(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(P));return t&&T.call(e,P)&&r.unshift(e),r=r.filter(n)},R=function(e,t,n){for(var r=[],a=Array.from(e);a.length;){var o=a.shift();if(!C(o,!1))if("SLOT"===o.tagName){var i=o.assignedElements(),s=i.length?i:o.children,c=R(s,!0,n);n.flatten?r.push.apply(r,c):r.push({scopeParent:o,candidates:c})}else{T.call(o,P)&&n.filter(o)&&(t||!e.includes(o))&&r.push(o);var l=o.shadowRoot||"function"==typeof n.getShadowRoot&&n.getShadowRoot(o),u=!C(l,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(o));if(l&&u){var d=R(!0===l?o.children:l.children,!0,n);n.flatten?r.push.apply(r,d):r.push({scopeParent:o,candidates:d})}else a.unshift.apply(a,o.children)}}return r},A=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},L=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!A(e)?0:e.tabIndex},_=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},G=function(e){return"INPUT"===e.tagName},M=function(e){return function(e){return G(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||D(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(o){return!1}var a=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!a||a===e}(e)},B=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},z=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("full-native"===n&&"checkVisibility"in e)return!e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});if("hidden"===getComputedStyle(e).visibility)return!0;var a=T.call(e,"details>summary:first-of-type")?e.parentElement:e;if(T.call(a,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"full-native"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return B(e)}else{if("function"==typeof r){for(var o=e;e;){var i=e.parentElement,s=D(e);if(i&&!i.shadowRoot&&!0===r(i))return B(e);e=e.assignedSlot?e.assignedSlot:i||s===e.ownerDocument?i:s.host}e=o}if(function(e){var t,n,r,a,o=e&&D(e),i=null===(t=o)||void 0===t?void 0:t.host,s=!1;if(o&&o!==e)for(s=!!(null!==(n=i)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(i)||null!=e&&null!==(a=e.ownerDocument)&&void 0!==a&&a.contains(e));!s&&i;){var c,l,u;s=!(null===(l=i=null===(c=o=D(i))||void 0===c?void 0:c.host)||void 0===l||null===(u=l.ownerDocument)||void 0===u||!u.contains(i))}return s}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},U=function(e,t){return!(t.disabled||C(t)||function(e){return G(e)&&"hidden"===e.type}(t)||z(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some(function(e){return"SUMMARY"===e.tagName})}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!T.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},$=function(e,t){return!(M(t)||L(t)<0||!U(e,t))},q=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},K=function(e){var t=[],n=[];return e.forEach(function(e,r){var a=!!e.scopeParent,o=a?e.scopeParent:e,i=function(e,t){var n=L(e);return n<0&&t&&!A(e)?0:n}(o,a),s=a?K(e.candidates):o;0===i?a?t.push.apply(t,s):t.push(o):n.push({documentOrder:r,tabIndex:i,item:e,isScope:a,content:s})}),n.sort(_).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(t)},W=function(e,t){var n;return n=(t=t||{}).getShadowRoot?R([e],t.includeContainer,{filter:$.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:q}):I(e,t.includeContainer,$.bind(null,t)),K(n)},Y=function(e,t){return(t=t||{}).getShadowRoot?R([e],t.includeContainer,{filter:U.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):I(e,t.includeContainer,U.bind(null,t))},X=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==T.call(e,P)&&$(t,e)},V=S.concat("iframe").join(","),H=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==T.call(e,V)&&U(t,e)};const Q=Object.freeze(Object.defineProperty({__proto__:null,focusable:Y,getTabIndex:L,isFocusable:H,isTabbable:X,tabbable:W},Symbol.toStringTag,{value:"Module"}));function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){J(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ne(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var re=function(e,t){if(e.length>0){var n=e[e.length-1];n!==t&&n._setPausedState(!0)}var r=e.indexOf(t);-1===r||e.splice(r,1),e.push(t)},ae=function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)},oe=function(e){return"Tab"===(null==e?void 0:e.key)||9===(null==e?void 0:e.keyCode)},ie=function(e){return oe(e)&&!e.shiftKey},se=function(e){return oe(e)&&e.shiftKey},ce=function(e){return setTimeout(e,0)},le=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e?e.apply(void 0,n):e},ue=function(e){return e.target.shadowRoot&&"function"==typeof e.composedPath?e.composedPath()[0]:e.target},de=[];const pe=i(Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:function(e,t){var n,r=(null==t?void 0:t.document)||document,a=(null==t?void 0:t.trapStack)||de,o=te({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:ie,isKeyBackward:se},t),i={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},s=function(e,t,n){return e&&void 0!==e[t]?e[t]:o[n||t]},c=function(e,t){var n="function"==typeof(null==t?void 0:t.composedPath)?t.composedPath():void 0;return i.containerGroups.findIndex(function(t){var r=t.container,a=t.tabbableNodes;return r.contains(e)||(null==n?void 0:n.includes(r))||a.find(function(t){return t===e})})},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasFallback,a=void 0!==n&&n,i=t.params,s=void 0===i?[]:i,c=o[e];if("function"==typeof c&&(c=c.apply(void 0,ne(s))),!0===c&&(c=void 0),!c){if(void 0===c||!1===c)return c;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var l=c;if("string"==typeof c){try{l=r.querySelector(c)}catch(u){throw new Error("`".concat(e,'` appears to be an invalid selector; error="').concat(u.message,'"'))}if(!l&&!a)throw new Error("`".concat(e,"` as selector refers to no known node"))}return l},u=function(){var e=l("initialFocus",{hasFallback:!0});if(!1===e)return!1;if(void 0===e||e&&!H(e,o.tabbableOptions))if(c(r.activeElement)>=0)e=r.activeElement;else{var t=i.tabbableGroups[0];e=t&&t.firstTabbableNode||l("fallbackFocus")}else null===e&&(e=l("fallbackFocus"));if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},d=function(){if(i.containerGroups=i.containers.map(function(e){var t=W(e,o.tabbableOptions),n=Y(e,o.tabbableOptions),r=t.length>0?t[0]:void 0,a=t.length>0?t[t.length-1]:void 0,i=n.find(function(e){return X(e)}),s=n.slice().reverse().find(function(e){return X(e)}),c=!!t.find(function(e){return L(e)>0});return{container:e,tabbableNodes:t,focusableNodes:n,posTabIndexesFound:c,firstTabbableNode:r,lastTabbableNode:a,firstDomTabbableNode:i,lastDomTabbableNode:s,nextTabbableNode:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=t.indexOf(e);return a<0?r?n.slice(n.indexOf(e)+1).find(function(e){return X(e)}):n.slice(0,n.indexOf(e)).reverse().find(function(e){return X(e)}):t[a+(r?1:-1)]}}}),i.tabbableGroups=i.containerGroups.filter(function(e){return e.tabbableNodes.length>0}),i.tabbableGroups.length<=0&&!l("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(i.containerGroups.find(function(e){return e.posTabIndexesFound})&&i.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},p=function(e){var t=e.activeElement;if(t)return t.shadowRoot&&null!==t.shadowRoot.activeElement?p(t.shadowRoot):t},f=function(e){!1!==e&&e!==p(document)&&(e&&e.focus?(e.focus({preventScroll:!!o.preventScroll}),i.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):f(u()))},m=function(e){var t=l("setReturnFocus",{params:[e]});return t||!1!==t&&e},v=function(e){var t=e.target,n=e.event,r=e.isBackward,a=void 0!==r&&r;t=t||ue(n),d();var s=null;if(i.tabbableGroups.length>0){var u=c(t,n),p=u>=0?i.containerGroups[u]:void 0;if(u<0)s=a?i.tabbableGroups[i.tabbableGroups.length-1].lastTabbableNode:i.tabbableGroups[0].firstTabbableNode;else if(a){var f=i.tabbableGroups.findIndex(function(e){var n=e.firstTabbableNode;return t===n});if(f<0&&(p.container===t||H(t,o.tabbableOptions)&&!X(t,o.tabbableOptions)&&!p.nextTabbableNode(t,!1))&&(f=u),f>=0){var m=0===f?i.tabbableGroups.length-1:f-1,v=i.tabbableGroups[m];s=L(t)>=0?v.lastTabbableNode:v.lastDomTabbableNode}else oe(n)||(s=p.nextTabbableNode(t,!1))}else{var b=i.tabbableGroups.findIndex(function(e){var n=e.lastTabbableNode;return t===n});if(b<0&&(p.container===t||H(t,o.tabbableOptions)&&!X(t,o.tabbableOptions)&&!p.nextTabbableNode(t))&&(b=u),b>=0){var h=b===i.tabbableGroups.length-1?0:b+1,y=i.tabbableGroups[h];s=L(t)>=0?y.firstTabbableNode:y.firstDomTabbableNode}else oe(n)||(s=p.nextTabbableNode(t))}}else s=l("fallbackFocus");return s},b=function(e){var t=ue(e);c(t,e)>=0||(le(o.clickOutsideDeactivates,e)?n.deactivate({returnFocus:o.returnFocusOnDeactivate}):le(o.allowOutsideClick,e)||e.preventDefault())},h=function(e){var t=ue(e),n=c(t,e)>=0;if(n||t instanceof Document)n&&(i.mostRecentlyFocusedNode=t);else{var r;e.stopImmediatePropagation();var a=!0;if(i.mostRecentlyFocusedNode)if(L(i.mostRecentlyFocusedNode)>0){var s=c(i.mostRecentlyFocusedNode),l=i.containerGroups[s].tabbableNodes;if(l.length>0){var d=l.findIndex(function(e){return e===i.mostRecentlyFocusedNode});d>=0&&(o.isKeyForward(i.recentNavEvent)?d+1<l.length&&(r=l[d+1],a=!1):d-1>=0&&(r=l[d-1],a=!1))}}else i.containerGroups.some(function(e){return e.tabbableNodes.some(function(e){return L(e)>0})})||(a=!1);else a=!1;a&&(r=v({target:i.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(i.recentNavEvent)})),f(r||(i.mostRecentlyFocusedNode||u()))}i.recentNavEvent=void 0},y=function(e){(o.isKeyForward(e)||o.isKeyBackward(e))&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.recentNavEvent=e;var n=v({event:e,isBackward:t});n&&(oe(e)&&e.preventDefault(),f(n))}(e,o.isKeyBackward(e))},g=function(e){var t;"Escape"!==(null==(t=e)?void 0:t.key)&&"Esc"!==(null==t?void 0:t.key)&&27!==(null==t?void 0:t.keyCode)||!1===le(o.escapeDeactivates,e)||(e.preventDefault(),n.deactivate())},x=function(e){var t=ue(e);c(t,e)>=0||le(o.clickOutsideDeactivates,e)||le(o.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},w=function(){if(i.active)return re(a,n),i.delayInitialFocusTimer=o.delayInitialFocus?ce(function(){f(u())}):f(u()),r.addEventListener("focusin",h,!0),r.addEventListener("mousedown",b,{capture:!0,passive:!1}),r.addEventListener("touchstart",b,{capture:!0,passive:!1}),r.addEventListener("click",x,{capture:!0,passive:!1}),r.addEventListener("keydown",y,{capture:!0,passive:!1}),r.addEventListener("keydown",g),n},N=function(){if(i.active)return r.removeEventListener("focusin",h,!0),r.removeEventListener("mousedown",b,!0),r.removeEventListener("touchstart",b,!0),r.removeEventListener("click",x,!0),r.removeEventListener("keydown",y,!0),r.removeEventListener("keydown",g),n},j="undefined"!=typeof window&&"MutationObserver"in window?new MutationObserver(function(e){e.some(function(e){return Array.from(e.removedNodes).some(function(e){return e===i.mostRecentlyFocusedNode})})&&f(u())}):void 0,O=function(){j&&(j.disconnect(),i.active&&!i.paused&&i.containers.map(function(e){j.observe(e,{subtree:!0,childList:!0})}))};return n={get active(){return i.active},get paused(){return i.paused},activate:function(e){if(i.active)return this;var t=s(e,"onActivate"),n=s(e,"onPostActivate"),a=s(e,"checkCanFocusTrap");a||d(),i.active=!0,i.paused=!1,i.nodeFocusedBeforeActivation=p(r),null==t||t();var o=function(){a&&d(),w(),O(),null==n||n()};return a?(a(i.containers.concat()).then(o,o),this):(o(),this)},deactivate:function(e){if(!i.active)return this;var t=te({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},e);clearTimeout(i.delayInitialFocusTimer),i.delayInitialFocusTimer=void 0,N(),i.active=!1,i.paused=!1,O(),ae(a,n);var r=s(t,"onDeactivate"),c=s(t,"onPostDeactivate"),l=s(t,"checkCanReturnFocus"),u=s(t,"returnFocus","returnFocusOnDeactivate");null==r||r();var d=function(){ce(function(){u&&f(m(i.nodeFocusedBeforeActivation)),null==c||c()})};return u&&l?(l(m(i.nodeFocusedBeforeActivation)).then(d,d),this):(d(),this)},pause:function(e){return i.active?(i.manuallyPaused=!0,this._setPausedState(!0,e)):this},unpause:function(e){return i.active?(i.manuallyPaused=!1,a[a.length-1]!==this?this:this._setPausedState(!1,e)):this},updateContainerElements:function(e){var t=[].concat(e).filter(Boolean);return i.containers=t.map(function(e){return"string"==typeof e?r.querySelector(e):e}),i.active&&d(),O(),this}},Object.defineProperties(n,{_isManuallyPaused:{value:function(){return i.manuallyPaused}},_setPausedState:{value:function(e,t){if(i.paused===e)return this;if(i.paused=e,e){var n=s(t,"onPause"),r=s(t,"onPostPause");null==n||n(),N(),O(),null==r||r()}else{var a=s(t,"onUnpause"),o=s(t,"onPostUnpause");null==a||a(),d(),w(),O(),null==o||o()}return this}}}),n.updateContainerElements(e),n}},Symbol.toStringTag,{value:"Module"}))),fe=i(Q);var me;const ve=c(function(){if(me)return E.exports;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t,n;function r(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(t,n,r){return n=i(n),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,o()?Reflect.construct(n,r||[],i(t).constructor):n.apply(t,r))}function o(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(o=function(){return!!e})()}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n);if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}me=1;var u=s(),d=pe.createFocusTrap,p=fe.isFocusable,f=parseInt(null!==(t=null===(n=/^(\d+)\./.exec(u.version))||void 0===n?void 0:n[1])&&void 0!==t?t:0,10),m=function(e){function t(e){var n,r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=a(this,t,[e]),r=n,i=function(e){var t,n=null!==(t=this.internalOptions[e])&&void 0!==t?t:this.originalOptions[e];if("function"==typeof n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];n=n.apply(void 0,a)}if(!0===n&&(n=void 0),!n){if(void 0===n||!1===n)return n;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var i,s=n;if("string"==typeof n&&!(s=null===(i=this.getDocument())||void 0===i?void 0:i.querySelector(n)))throw new Error("`".concat(e,"` as selector refers to no known node"));return s},(o=l(o="getNodeForOption"))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,n.handleDeactivate=n.handleDeactivate.bind(n),n.handlePostDeactivate=n.handlePostDeactivate.bind(n),n.handleClickOutsideDeactivates=n.handleClickOutsideDeactivates.bind(n),n.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:n.handleDeactivate,onPostDeactivate:n.handlePostDeactivate,clickOutsideDeactivates:n.handleClickOutsideDeactivates},n.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var s=e.focusTrapOptions;for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&("returnFocusOnDeactivate"!==c&&"onDeactivate"!==c&&"onPostDeactivate"!==c&&"checkCanReturnFocus"!==c&&"clickOutsideDeactivates"!==c?n.internalOptions[c]=s[c]:n.originalOptions[c]=s[c]);return n.outsideClick=null,n.focusTrapElements=e.containerElements||[],n.updatePreviousElement(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),r(t,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||("undefined"!=typeof document?document:void 0)}},{key:"getReturnFocusNode",value:function(){var e=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return e||!1!==e&&this.previouslyFocusedElement}},{key:"updatePreviousElement",value:function(){var e=this.getDocument();e&&(this.previouslyFocusedElement=e.activeElement)}},{key:"deactivateTrap",value:function(){this.focusTrap&&this.focusTrap.active&&this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(e){var t="function"==typeof this.originalOptions.clickOutsideDeactivates?this.originalOptions.clickOutsideDeactivates.call(null,e):this.originalOptions.clickOutsideDeactivates;return t&&(this.outsideClick={target:e.target,allowDeactivation:t}),t}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var e=this,t=function(){var t=e.getReturnFocusNode(),n=!(!e.originalOptions.returnFocusOnDeactivate||null==t||!t.focus||e.outsideClick&&(!e.outsideClick.allowDeactivation||p(e.outsideClick.target,e.internalOptions.tabbableOptions))),r=e.internalOptions.preventScroll,a=void 0!==r&&r;n&&t.focus({preventScroll:a}),e.originalOptions.onPostDeactivate&&e.originalOptions.onPostDeactivate.call(null),e.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(t,t):t()}},{key:"setupFocusTrap",value:function(){this.focusTrap?this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause()):this.focusTrapElements.some(Boolean)&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(e){if(this.focusTrap){e.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var t=!e.active&&this.props.active,n=e.active&&!this.props.active,r=!e.paused&&this.props.paused,a=e.paused&&!this.props.paused;if(t&&(this.updatePreviousElement(),this.focusTrap.activate()),n)return void this.deactivateTrap();r&&this.focusTrap.pause(),a&&this.focusTrap.unpause()}else e.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var e=this,t=this.props.children?u.Children.only(this.props.children):void 0;if(t){if(t.type&&t.type===u.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");return u.cloneElement(t,{ref:function(n){var r=e.props.containerElements;t&&(f>=19?"function"==typeof t.props.ref?t.props.ref(n):t.props.ref&&(t.props.ref.current=n):"function"==typeof t.ref?t.ref(n):t.ref&&(t.ref.current=n)),e.focusTrapElements=r||[n]}})}return null}}])}(u.Component);return m.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:d},E.exports=m,E.exports.FocusTrap=m,E.exports}()),be={style:{base:{fontSize:"14px",color:"var(--foreground)","::placeholder":{color:"var(--muted-foreground)"},fontFamily:"system-ui, -apple-system, sans-serif"},invalid:{color:"#ff4444"}}};function he({amount:e,phoneNumber:a,paymentIntentId:o,onSuccess:i,onError:s,isLoading:c=!1,paymentStatus:f="idle",paymentMessage:m=""}){const v=u(),b=d(),[h,y]=l.useState(!1);return r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),v&&b){y(!0);try{const e=b.getElement(p);if(!e)throw new Error("Card element not found");const{error:t,paymentMethod:r}=await v.createPaymentMethod({type:"card",card:e,billing_details:{}});if(t)return n.error(t.message||"Failed to process card"),s?.(t.message||"Failed to process card"),void y(!1);if(!r)throw new Error("No payment method returned");i(r.id)}catch(t){const e=t.message||"Payment processing failed";n.error(e),s?.(e)}finally{y(!1)}}else n.error("Payment system not initialized")},className:"space-y-4",children:[r.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4",children:[r.jsxs("h3",{className:"font-semibold text-foreground mb-2",children:["Payment for ",a]}),r.jsxs("div",{className:"text-2xl font-bold text-primary",children:["$",(e/100).toFixed(2)]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"One-time setup fee"})]}),r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Card Details"}),r.jsx("div",{className:"p-3 border border-border rounded-lg bg-muted",children:r.jsx(p,{options:be})})]})}),"idle"!==f&&r.jsxs("div",{className:"p-4 rounded-lg border text-center "+("success"===f?"bg-green-500/10 border-green-500/20 text-green-700":"declined"===f||"failed"===f?"bg-red-500/10 border-red-500/20 text-red-700":"bg-blue-500/10 border-blue-500/20 text-blue-700"),children:["success"===f&&"âœ“ Payment Successful","declined"===f&&"âœ— Card Declined","failed"===f&&"âœ— Payment Failed","processing"===f&&"â³ Processing...",m&&r.jsx("div",{className:"text-sm mt-1",children:m})]}),r.jsx("div",{className:"text-xs text-muted-foreground bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:"ðŸ”’ Payment is processed securely by Stripe. Your card details are encrypted and never stored on our servers."}),r.jsx("div",{className:"space-y-2",children:r.jsx(t,{type:"submit",variant:"primary",fullWidth:!0,size:"lg",disabled:!v||h||c,isLoading:h||c,className:"bg-primary hover:bg-primary/90 text-background font-medium",children:h?"Processing...":"Complete Purchase"})})]})}const ye=[{code:"CA",name:"California"},{code:"NY",name:"New York"},{code:"TX",name:"Texas"},{code:"FL",name:"Florida"},{code:"IL",name:"Illinois"},{code:"PA",name:"Pennsylvania"},{code:"OH",name:"Ohio"},{code:"GA",name:"Georgia"},{code:"MI",name:"Michigan"},{code:"NC",name:"North Carolina"}],ge=m("pk_live_51SNi09E7LiXbMhWDr4X7EtXptIiMS3xAZgkdIfdjgf18XMQpSpt2OY47nmuv7hGSMCehvRDLawh9bDSsLto5D0jS00A7xoe8Ut");function xe({isOpen:i,onClose:s,onPurchaseComplete:c}){const[u,d]=l.useState("search"),[p,m]=l.useState(""),[h,y]=l.useState(""),[g,x]=l.useState([]),[w,N]=l.useState(null),[j,O]=l.useState(!1),[k,E]=l.useState(null),[S,P]=l.useState("idle"),[F,T]=l.useState("");l.useEffect(()=>{if(!i)return;const e=e=>{"Escape"===e.key&&"processing"!==S&&s()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i,s,S]);const D=()=>{d("search"),m(""),y(""),x([]),N(null),E(null),P("idle"),T("")},C={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,type:"tween"}}};return r.jsx(a,{children:i&&r.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4 backdrop-blur-md",children:r.jsx(ve,{focusTrapOptions:{escapeDeactivates:"processing"!==S,clickOutsideDeactivates:"processing"!==S},children:r.jsxs(o.div,{initial:{opacity:0,scale:.92,y:30},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.92,y:30},transition:{duration:.4,ease:"easeOut"},className:"bg-background border border-border/50 rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"phone-modal-title",children:[r.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-primary/5 border-b border-border/30 p-6 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:r.jsx(v,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h2",{id:"phone-modal-title",className:"text-lg font-semibold text-foreground",children:"Buy Phone Number"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["search"===u&&"Search available numbers","select"===u&&"Choose a number","confirm"===u&&"Confirm purchase","payment"===u&&"Complete payment"]})]})]}),r.jsx(o.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:s,disabled:j,className:"w-11 h-11 flex items-center justify-center hover:bg-muted rounded-lg transition-colors disabled:opacity-50","aria-label":"Close modal (Escape key also works)",children:r.jsx(b,{className:"w-5 h-5 text-muted-foreground"})})]}),r.jsx("div",{className:"p-6",children:r.jsxs(o.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},initial:"hidden",animate:"visible",children:["search"===u&&r.jsxs(o.div,{variants:C,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Area Code"}),r.jsx("input",{type:"text",placeholder:"e.g., 415, 212, 310",value:p,onChange:e=>m(e.target.value),maxLength:3,className:"w-full px-3 py-2 border border-border/50 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:border-primary focus:outline-none transition-colors"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"State (Optional)"}),r.jsxs("select",{value:h,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-border/50 rounded-lg bg-background text-foreground focus:border-primary focus:outline-none transition-colors appearance-none",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 0.5rem center",paddingRight:"2rem"},children:[r.jsx("option",{value:"",children:"Select a state..."}),ye.map(e=>r.jsx("option",{value:e.code,children:e.name},e.code))]})]}),r.jsx(t,{variant:"primary",fullWidth:!0,size:"lg",onClick:async()=>{if(p||h){O(!0);try{const t=await async function(t){const n=new URLSearchParams;return t.areaCode&&n.append("areaCode",t.areaCode),t.state&&n.append("state",t.state),t.contains&&n.append("contains",t.contains),t.quantity&&n.append("quantity",t.quantity.toString()),(await e.get(`/numbers/search?${n.toString()}`)).data.data}({areaCode:p||void 0,state:h||void 0,quantity:10});0===t.length?(n.error("No numbers found for that search"),x([])):(x(t),d("select"))}catch(t){n.error(t.message||"Failed to search numbers")}finally{O(!1)}}else n.error("Please enter an area code or select a state")},disabled:j,isLoading:j,className:"bg-primary hover:bg-primary/90 text-background font-medium mt-6",children:j?"Searching...":"Search Numbers"})]}),"select"===u&&r.jsxs(o.div,{variants:C,className:"space-y-3",children:[r.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto",children:g.map(e=>r.jsx(o.button,{whileHover:{scale:1.02},onClick:()=>(async e=>{N(e),d("confirm")})(e),className:"w-full p-4 border-2 border-border/30 rounded-lg bg-muted/20 hover:border-primary/50 hover:bg-primary/5 transition-all text-left group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-foreground text-lg",children:e.formattedNumber}),r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.region})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm font-medium text-foreground",children:["$",e.costPerSms.toFixed(4),"/SMS"]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["$",e.costPerMinute.toFixed(4),"/min"]})]})]})},e.id))}),r.jsx(t,{variant:"secondary",fullWidth:!0,size:"sm",onClick:()=>{d("search"),x([]),N(null)},className:"mt-4",children:"Back to Search"})]}),"confirm"===u&&w&&r.jsxs(o.div,{variants:C,className:"space-y-4",children:[r.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx(v,{className:"w-8 h-8 text-primary mx-auto mb-3"}),r.jsx("div",{className:"text-2xl font-bold text-foreground mb-1",children:w.formattedNumber}),r.jsx("div",{className:"text-sm text-muted-foreground",children:w.region})]})}),r.jsxs("div",{className:"space-y-2 bg-muted/30 rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Per SMS:"}),r.jsxs("span",{className:"font-medium text-foreground",children:["$",w.costPerSms.toFixed(4)]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Per minute:"}),r.jsxs("span",{className:"font-medium text-foreground",children:["$",w.costPerMinute.toFixed(4)]})]}),r.jsxs("div",{className:"border-t border-border/30 pt-2 mt-2 flex justify-between font-semibold",children:[r.jsx("span",{className:"text-foreground",children:"One-time setup:"}),r.jsx("span",{className:"text-primary",children:"$0.50"})]})]}),r.jsx("div",{className:"text-xs text-muted-foreground bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:"By purchasing, you agree to Telnyx's terms and will be charged the one-time setup fee. Usage charges apply separately."}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(t,{variant:"primary",fullWidth:!0,size:"lg",onClick:async()=>{if(w){O(!0);try{const t=await async function(t){return(await e.post("/numbers/setup-payment-intent",{phoneNumber:t})).data}(w.phoneNumber);if(!t.success||!t.data?.paymentIntentId)throw new Error("Failed to create payment intent");E(t.data.paymentIntentId),d("payment")}catch(t){n.error(t.message||"Failed to create payment intent")}finally{O(!1)}}},disabled:j,isLoading:j,className:"bg-primary hover:bg-primary/90 text-background font-medium",children:j?"Processing...":"Continue to Payment"}),r.jsx(t,{variant:"secondary",fullWidth:!0,size:"sm",onClick:()=>{d("select"),N(null)},disabled:j,children:"Choose Different Number"})]})]}),"payment"===u&&w&&k&&r.jsxs(o.div,{variants:C,className:"space-y-4",children:[r.jsx(f,{stripe:ge,children:r.jsx(he,{amount:50,phoneNumber:w.phoneNumber,paymentIntentId:k,onSuccess:async t=>{if(w&&k){O(!0),P("processing"),T("");try{const r=await async function(t,n){return(await e.post("/numbers/confirm-payment",{paymentIntentId:t,paymentMethodId:n})).data}(k,t);if(!r.success||"succeeded"!==r.data?.status)return P("failed"),T("Payment confirmation failed. Please try again."),void O(!1);const a=await async function(t,n,r){return(await e.post("/numbers/purchase",{phoneNumber:t,paymentIntentId:n,connectionId:r})).data}(w.phoneNumber,k);a.success&&(P("success"),T(""),setTimeout(()=>{const e=a.data.webhookId?"automatically linked with webhook":"linked (webhook manual setup recommended)";n.success(`Successfully purchased ${w.formattedNumber}! Number ${e}.`),c&&c(w.phoneNumber),D(),s()},1500))}catch(r){let e="Payment processing failed";402===r.response?.status?e=r.response?.data?.error||"Request failed with status code 402":r.message&&(e=r.message);const t=e.toLowerCase().includes("declined")||e.toLowerCase().includes("insufficient");P(t?"declined":"failed"),T(e),O(!1)}}},isLoading:j,paymentStatus:S,paymentMessage:F})}),r.jsx(t,{variant:"secondary",fullWidth:!0,size:"sm",onClick:()=>{d("confirm"),P("idle"),T("")},disabled:j,children:"Back"})]})]})})]})})})})}export{ve as F,xe as P,h as a,w as b,O as c,y as d,g,N as i,k as l,j as r,x as u};
