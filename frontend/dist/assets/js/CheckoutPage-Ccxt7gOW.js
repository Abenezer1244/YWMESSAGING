import{j as e}from"./vendor-ui-DmDBw7yB.js";import{u as r,f as s,a as t}from"./vendor-react-GajVb7Yi.js";import{E as a,l as i,u as l,a as n,C as o}from"./react-stripe.esm-Bb9JIkK3.js";import{C as d,B as c,_ as m}from"./index-BN2KEnXV.js";import{s as x,b as u}from"./billing-dfRkMMDz.js";import{t as h}from"./themeColors-Cduerava.js";import{d as p}from"./designTokens-BhFJIg83.js";import"./vendor-charts-D9m5HzY1.js";import"./vendor-utils-DZXJUmYg.js";const b=i("pk_live_51SNi09E7LiXbMhWDr4X7EtXptIiMS3xAZgkdIfdjgf18XMQpSpt2OY47nmuv7hGSMCehvRDLawh9bDSsLto5D0jS00A7xoe8Ut");function f({planName:r,planPrice:s,onSubmit:a}){const i=l(),x=n(),[b,f]=t.useState(!1),[j,g]=t.useState(""),[y,N]=t.useState(""),v={style:{base:{fontSize:p.typography.fontSize.base,color:h.text.white,"::placeholder":{color:h.text.lightGray}},invalid:{color:h.danger.base}}};return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g(""),i&&x)if(y.trim())try{f(!0);const{clientSecret:e}=await u(r),{error:s,paymentIntent:t}=await i.confirmCardPayment(e,{payment_method:{card:x.getElement(o),billing_details:{name:y}}});if(s){const e="Payment failed. Please verify your card details and try again.";g(e),m.error(e)}else"succeeded"===t?.status&&(m.success("Payment successful!"),a(t.id))}catch(s){const e="Payment processing error. Please try again.";g(e),m.error(e)}finally{f(!1)}else g("Cardholder name is required");else g("Payment processing not available")},children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Payment Details"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Cardholder Name"}),e.jsx("input",{type:"text",placeholder:"John Doe",value:y,onChange:e=>N(e.target.value),required:!0,className:"w-full px-4 py-2 border border-input rounded-lg bg-input text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors placeholder-muted-foreground/50"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Card Details"}),e.jsx("div",{className:"p-4 border border-border rounded-lg bg-muted",children:e.jsx(o,{options:v})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Your card information is processed securely by Stripe."})]}),j&&e.jsx(d,{variant:"default",className:"mb-6 bg-red-950/30 border border-red-800",children:e.jsx("p",{className:"text-sm text-red-400",children:j})}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",className:"mt-1 w-4 h-4 border-border rounded text-primary focus:ring-primary bg-muted",defaultChecked:!0,required:!0}),e.jsxs("span",{className:"text-sm text-foreground/80",children:["I agree to the"," ",e.jsx("a",{href:"/terms",className:"text-primary hover:text-primary/80 font-semibold",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"/privacy",className:"text-primary hover:text-primary/80 font-semibold",children:"Privacy Policy"})]})]})}),e.jsx(c,{type:"submit",variant:"primary",size:"lg",disabled:b||!i,className:"w-full",children:b?"Processing...":`Pay $${s}`}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("a",{href:"/subscribe",className:"text-primary hover:text-primary/80 font-semibold",children:"Back to plans"})})]})}function j(){const i=r(),[l]=s(),[n,o]=t.useState((e=>["starter","growth","pro"].includes(e)?e:null)(l.get("plan")));t.useEffect(()=>{if(!n){const e=setTimeout(()=>i("/subscribe"),0);return()=>clearTimeout(e)}},[n,i]);if(!n)return null;const c={starter:{name:"Starter Plan",price:49},growth:{name:"Growth Plan",price:79},pro:{name:"Pro Plan",price:129}}[n];return e.jsx("div",{className:"min-h-screen bg-background p-6 transition-colors duration-normal",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"ðŸ’³ Complete Your Payment"}),e.jsx("p",{className:"text-muted-foreground",children:"Secure checkout powered by Stripe"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(d,{variant:"default",className:"bg-muted border-border",children:e.jsx(a,{stripe:b,children:e.jsx(f,{planName:n,planPrice:c.price,onSubmit:async e=>{if(n)try{await x(n);m.success(`Successfully subscribed to ${n} plan!`),i("/billing")}catch(r){m.error("Payment succeeded but subscription update failed. Please contact support.")}}})})})}),e.jsxs(d,{variant:"default",className:"h-fit border-border bg-muted",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-6",children:"Order Summary"}),e.jsxs("div",{className:"border-b border-border pb-4 mb-4",children:[e.jsx("p",{className:"text-muted-foreground",children:c.name}),e.jsxs("p",{className:"text-2xl font-bold text-foreground mt-2",children:["$",c.price.toFixed(2)]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"/month"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsxs("span",{className:"text-foreground",children:["$",c.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tax"}),e.jsx("span",{className:"text-foreground",children:"Calculated at checkout"})]}),e.jsxs("div",{className:"border-t border-border pt-3 flex justify-between font-semibold",children:[e.jsx("span",{className:"text-foreground",children:"Total"}),e.jsxs("span",{className:"text-foreground",children:["$",c.price.toFixed(2)]})]})]}),e.jsxs(d,{variant:"highlight",className:"bg-primary/10 border border-primary/30",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground mb-3",children:"Plan Includes:"}),e.jsxs("ul",{className:"text-xs text-foreground/80 space-y-2",children:["starter"===n&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"âœ“ 1 Branch"}),e.jsx("li",{children:"âœ“ 500 Members"}),e.jsx("li",{children:"âœ“ 1,000 msgs/month"}),e.jsx("li",{children:"âœ“ Basic analytics"})]}),"growth"===n&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"âœ“ 5 Branches"}),e.jsx("li",{children:"âœ“ 2,000 Members"}),e.jsx("li",{children:"âœ“ 5,000 msgs/month"}),e.jsx("li",{children:"âœ“ Advanced analytics"})]}),"pro"===n&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"âœ“ 10 Branches"}),e.jsx("li",{children:"âœ“ Unlimited Members"}),e.jsx("li",{children:"âœ“ Unlimited messages"}),e.jsx("li",{children:"âœ“ Premium support"})]})]})]})]})]}),e.jsx(d,{variant:"highlight",className:"mt-8 bg-green-500/10 border border-green-500/30",children:e.jsx("p",{className:"text-sm text-green-300",children:"ðŸ”’ Your payment information is encrypted and processed securely by Stripe. We never store your card details."})})]})})}export{j as CheckoutPage,j as default};
