{"version":3,"file":"BillingPage-Bocg-0a4.js","sources":["../../src/pages/BillingPage.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport { Check, Loader } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport { getPlan, cancelSubscription } from '../api/billing';\nimport { SoftLayout, SoftCard, SoftButton } from '../components/SoftUI';\nexport function BillingPage() {\n    const navigate = useNavigate();\n    const [planInfo, setPlanInfo] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isCancelling, setIsCancelling] = useState(false);\n    useEffect(() => {\n        const loadPlanInfo = async () => {\n            try {\n                setIsLoading(true);\n                const info = await getPlan();\n                setPlanInfo(info);\n            }\n            catch (error) {\n                toast.error(error.message || 'Failed to load billing info');\n            }\n            finally {\n                setIsLoading(false);\n            }\n        };\n        loadPlanInfo();\n    }, []);\n    const handleCancel = async () => {\n        if (!confirm('Are you sure you want to cancel your subscription?')) {\n            return;\n        }\n        try {\n            setIsCancelling(true);\n            await cancelSubscription();\n            toast.success('Subscription cancelled');\n            navigate('/dashboard');\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to cancel subscription');\n        }\n        finally {\n            setIsCancelling(false);\n        }\n    };\n    if (isLoading) {\n        return (_jsx(SoftLayout, { children: _jsx(\"div\", { className: \"min-h-screen bg-background flex items-center justify-center p-6\", children: _jsx(motion.div, { animate: { rotate: 360 }, transition: { duration: 2, repeat: Infinity }, children: _jsx(Loader, { className: \"w-8 h-8 text-primary\" }) }) }) }));\n    }\n    if (!planInfo) {\n        return (_jsx(SoftLayout, { children: _jsx(\"div\", { className: \"px-4 md:px-8 py-8 w-full\", children: _jsxs(SoftCard, { className: \"text-center py-16\", children: [_jsx(\"h2\", { className: \"text-2xl font-bold text-foreground mb-3\", children: \"Failed to Load Billing Information\" }), _jsx(\"p\", { className: \"text-muted-foreground\", children: \"Please try refreshing the page or contact support if the issue persists.\" })] }) }) }));\n    }\n    const planNameMap = {\n        starter: 'Starter',\n        growth: 'Growth',\n        pro: 'Pro',\n    };\n    const getUsagePercentage = (used, limit) => {\n        if (limit > 100000)\n            return 0; // unlimited\n        return Math.round((used / limit) * 100);\n    };\n    const getUsageColor = (percentage) => {\n        if (percentage >= 90)\n            return 'bg-danger-500';\n        if (percentage >= 70)\n            return 'bg-warning-500';\n        return 'bg-success-500';\n    };\n    const UsageBar = ({ label, used, limit, }) => {\n        const percentage = getUsagePercentage(used, limit);\n        const isUnlimited = limit > 100000;\n        return (_jsxs(\"div\", { className: \"mb-6\", children: [_jsxs(\"div\", { className: \"flex justify-between items-center mb-2\", children: [_jsx(\"span\", { className: \"text-sm font-medium text-foreground\", children: label }), _jsxs(\"span\", { className: \"text-sm text-muted-foreground\", children: [used, \" / \", isUnlimited ? '∞' : limit] })] }), !isUnlimited && (_jsx(\"div\", { className: \"w-full bg-muted-foreground/20 rounded-full h-2\", children: _jsx(\"div\", { className: `h-2 rounded-full ${getUsageColor(percentage)}`, style: { width: `${Math.min(percentage, 100)}%` } }) })), isUnlimited && (_jsx(\"div\", { className: \"text-sm text-success-500 dark:text-success-400\", children: \"Unlimited\" }))] }));\n    };\n    return (_jsx(SoftLayout, { children: _jsxs(\"div\", { className: \"px-4 md:px-8 py-8 w-full\", children: [_jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.5 }, className: \"mb-8\", children: [_jsx(\"h1\", { className: \"text-4xl font-bold text-foreground mb-2\", children: _jsx(\"span\", { className: \"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent\", children: \"Billing\" }) }), _jsx(\"p\", { className: \"text-muted-foreground\", children: \"Manage your subscription and view usage\" })] }), _jsx(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.5, delay: 0.1 }, className: \"mb-8\", children: _jsxs(SoftCard, { children: [_jsx(\"h2\", { className: \"text-2xl font-bold text-foreground mb-6\", children: \"Current Plan\" }), _jsxs(\"div\", { className: \"grid grid-cols-1 md:grid-cols-3 gap-8\", children: [_jsxs(SoftCard, { variant: \"gradient\", children: [_jsxs(\"h3\", { className: \"text-xl font-bold text-foreground\", children: [planNameMap[planInfo.plan], \" Plan\"] }), _jsxs(\"p\", { className: \"text-3xl font-bold text-primary mt-2\", children: [\"$\", planInfo.limits.price / 100, _jsx(\"span\", { className: \"text-lg text-muted-foreground\", children: \"/month\" })] }), _jsx(SoftButton, { variant: \"primary\", onClick: () => navigate('/subscribe'), fullWidth: true, className: \"mt-4\", children: \"Change Plan\" }), _jsx(SoftButton, { variant: \"danger\", onClick: handleCancel, disabled: isCancelling, fullWidth: true, className: \"mt-3\", children: isCancelling ? 'Cancelling...' : 'Cancel Subscription' })] }), _jsxs(\"div\", { className: \"md:col-span-2\", children: [_jsx(\"h4\", { className: \"font-semibold text-foreground mb-4\", children: \"Features included:\" }), _jsx(\"ul\", { className: \"grid grid-cols-1 md:grid-cols-2 gap-4\", children: planInfo.limits.features.map((feature, idx) => (_jsxs(motion.li, { initial: { opacity: 0, x: -20 }, animate: { opacity: 1, x: 0 }, transition: { delay: idx * 0.05 }, className: \"flex items-start gap-3\", children: [_jsx(Check, { className: \"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5\" }), _jsx(\"span\", { className: \"text-muted-foreground\", children: feature })] }, idx))) })] })] })] }) }), _jsx(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.5, delay: 0.2 }, className: \"mb-8\", children: _jsxs(SoftCard, { children: [_jsxs(\"h2\", { className: \"text-2xl font-bold text-foreground mb-6\", children: [\"Current Usage (\", new Date().toLocaleDateString(), \")\"] }), _jsxs(\"div\", { className: \"grid grid-cols-1 md:grid-cols-2 gap-8\", children: [_jsxs(\"div\", { children: [_jsx(\"h3\", { className: \"font-semibold text-foreground mb-4\", children: \"Organization\" }), _jsx(UsageBar, { label: \"Branches\", used: planInfo.usage.branches, limit: planInfo.limits.branches }), _jsx(UsageBar, { label: \"Co-Admins\", used: planInfo.usage.coAdmins, limit: planInfo.limits.coAdmins })] }), _jsxs(\"div\", { children: [_jsx(\"h3\", { className: \"font-semibold text-foreground mb-4\", children: \"Messaging\" }), _jsx(UsageBar, { label: \"Members\", used: planInfo.usage.members, limit: planInfo.limits.members }), _jsx(UsageBar, { label: \"Messages (This Month)\", used: planInfo.usage.messagesThisMonth, limit: planInfo.limits.messagesPerMonth })] })] }), _jsxs(\"div\", { className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mt-8 pt-8 border-t border-border/40\", children: [_jsxs(SoftCard, { variant: \"gradient\", children: [_jsx(\"p\", { className: \"text-sm text-muted-foreground\", children: \"Remaining Branches\" }), _jsx(\"p\", { className: \"text-2xl font-bold text-primary mt-2\", children: planInfo.remaining.branches === 999999\n                                                    ? '∞'\n                                                    : planInfo.remaining.branches })] }), _jsxs(SoftCard, { variant: \"gradient\", children: [_jsx(\"p\", { className: \"text-sm text-muted-foreground\", children: \"Remaining Members\" }), _jsx(\"p\", { className: \"text-2xl font-bold text-green-400 mt-2\", children: planInfo.remaining.members === 999999\n                                                    ? '∞'\n                                                    : planInfo.remaining.members })] }), _jsxs(SoftCard, { variant: \"gradient\", children: [_jsx(\"p\", { className: \"text-sm text-muted-foreground\", children: \"Remaining Messages\" }), _jsx(\"p\", { className: \"text-2xl font-bold text-cyan-400 mt-2\", children: planInfo.remaining.messagesPerMonth === 999999\n                                                    ? '∞'\n                                                    : planInfo.remaining.messagesPerMonth })] }), _jsxs(SoftCard, { variant: \"gradient\", children: [_jsx(\"p\", { className: \"text-sm text-muted-foreground\", children: \"Remaining Co-Admins\" }), _jsx(\"p\", { className: \"text-2xl font-bold text-amber-400 mt-2\", children: planInfo.remaining.coAdmins === 999999\n                                                    ? '∞'\n                                                    : planInfo.remaining.coAdmins })] })] })] }) }), _jsx(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.5, delay: 0.3 }, children: _jsxs(SoftCard, { children: [_jsx(\"h2\", { className: \"text-2xl font-bold text-foreground mb-4\", children: \"Billing Information\" }), _jsx(\"p\", { className: \"text-muted-foreground mb-6\", children: \"Your subscription is billed monthly. You can manage your payment method and invoices through Stripe.\" }), _jsx(SoftButton, { variant: \"primary\", children: \"Manage in Stripe\" })] }) })] }) }));\n}\nexport default BillingPage;\n//# sourceMappingURL=BillingPage.js.map"],"names":["BillingPage","navigate","useNavigate","planInfo","setPlanInfo","useState","isLoading","setIsLoading","isCancelling","setIsCancelling","useEffect","info","getPlan","error","toast","handleCancel","cancelSubscription","_jsx","SoftLayout","motion","Loader","_jsxs","SoftCard","planNameMap","getUsagePercentage","used","limit","getUsageColor","percentage","UsageBar","label","isUnlimited","SoftButton","feature","idx","Check"],"mappings":"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"}