import{u as k,r as i,j as e,S as v,C as t,B as d,_ as o}from"./index-CJzYWU1Y.js";import{a as w,c as C}from"./billing-Bpe3Wzl7.js";function S(){const m=k(),[s,y]=i.useState(null),[b,x]=i.useState(!0),[h,g]=i.useState(!1);i.useEffect(()=>{(async()=>{try{x(!0);const r=await w();y(r)}catch(r){o.error(r.message||"Failed to load billing info")}finally{x(!1)}})()},[]);const f=async()=>{if(confirm("Are you sure you want to cancel your subscription?"))try{g(!0),await C(),o.success("Subscription cancelled"),m("/dashboard")}catch(a){o.error(a.message||"Failed to cancel subscription")}finally{g(!1)}};if(b)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-secondary-50 dark:from-secondary-900 to-secondary-100 dark:to-secondary-950 p-6 transition-colors duration-normal",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(v,{size:"lg",text:"Loading billing information..."})})})});if(!s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-secondary-50 dark:from-secondary-900 to-secondary-100 dark:to-secondary-950 p-6 transition-colors duration-normal",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs(t,{variant:"highlight",className:"text-center py-16",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-3",children:"Failed to Load Billing Information"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Please try refreshing the page or contact support if the issue persists."})]})})});const j={starter:"Starter",growth:"Growth",pro:"Pro"},p=(a,r)=>r>1e5?0:Math.round(a/r*100),N=a=>a>=90?"bg-danger-500":a>=70?"bg-warning-500":"bg-success-500",n=({label:a,used:r,limit:c})=>{const u=p(r,c),l=c>1e5;return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-900 dark:text-secondary-50",children:a}),e.jsxs("span",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:[r," / ",l?"âˆž":c]})]}),!l&&e.jsx("div",{className:"w-full bg-secondary-200 dark:bg-secondary-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${N(u)}`,style:{width:`${Math.min(u,100)}%`}})}),l&&e.jsx("div",{className:"text-sm text-success-600 dark:text-success-400",children:"Unlimited"})]})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-secondary-50 dark:from-secondary-900 to-secondary-100 dark:to-secondary-950 p-6 transition-colors duration-normal",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-secondary-900 dark:text-secondary-50 mb-2",children:"ðŸ’³ Billing Settings"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Manage your subscription and view usage"})]}),e.jsxs(t,{variant:"default",className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-6",children:"Current Plan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs(t,{variant:"highlight",children:[e.jsxs("h3",{className:"text-xl font-bold text-secondary-900 dark:text-secondary-50",children:[j[s.plan]," Plan"]}),e.jsxs("p",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400 mt-2",children:["$",s.limits.price/100,e.jsx("span",{className:"text-lg text-secondary-600 dark:text-secondary-400",children:"/month"})]}),e.jsx(d,{variant:"primary",size:"md",onClick:()=>m("/subscribe"),className:"mt-4 w-full",children:"Change Plan"}),e.jsx(d,{variant:"danger",size:"md",onClick:f,disabled:h,className:"mt-2 w-full",children:h?"Cancelling...":"Cancel Subscription"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-secondary-50 mb-4",children:"Features included:"}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.limits.features.map((a,r)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-success-500 mr-3 mt-0.5",children:"âœ“"}),e.jsx("span",{className:"text-secondary-700 dark:text-secondary-300",children:a})]},r))})]})]})]}),e.jsxs(t,{variant:"default",className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-6",children:["Current Usage (",new Date().toLocaleDateString(),")"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-secondary-50 mb-4",children:"Organization"}),e.jsx(n,{label:"Branches",used:s.usage.branches,limit:s.limits.branches}),e.jsx(n,{label:"Co-Admins",used:s.usage.coAdmins,limit:s.limits.coAdmins})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-secondary-900 dark:text-secondary-50 mb-4",children:"Messaging"}),e.jsx(n,{label:"Members",used:s.usage.members,limit:s.limits.members}),e.jsx(n,{label:"Messages (This Month)",used:s.usage.messagesThisMonth,limit:s.limits.messagesPerMonth})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-8 pt-8 border-t border-secondary-200 dark:border-secondary-700",children:[e.jsxs(t,{variant:"highlight",className:"bg-primary-50 dark:bg-primary-900/30",children:[e.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Remaining Branches"}),e.jsx("p",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400 mt-2",children:s.remaining.branches===999999?"âˆž":s.remaining.branches})]}),e.jsxs(t,{variant:"highlight",className:"bg-success-50 dark:bg-success-900/30",children:[e.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Remaining Members"}),e.jsx("p",{className:"text-2xl font-bold text-success-600 dark:text-success-400 mt-2",children:s.remaining.members===999999?"âˆž":s.remaining.members})]}),e.jsxs(t,{variant:"highlight",className:"bg-info-50 dark:bg-info-900/30",children:[e.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Remaining Messages"}),e.jsx("p",{className:"text-2xl font-bold text-info-600 dark:text-info-400 mt-2",children:s.remaining.messagesPerMonth===999999?"âˆž":s.remaining.messagesPerMonth})]}),e.jsxs(t,{variant:"highlight",className:"bg-warning-50 dark:bg-warning-900/30",children:[e.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Remaining Co-Admins"}),e.jsx("p",{className:"text-2xl font-bold text-warning-600 dark:text-warning-400 mt-2",children:s.remaining.coAdmins===999999?"âˆž":s.remaining.coAdmins})]})]})]}),e.jsxs(t,{variant:"default",children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-4",children:"Billing Information"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Your subscription is billed monthly. You can manage your payment method and invoices through Stripe."}),e.jsx(d,{variant:"primary",size:"md",className:"mt-4",children:"Manage in Stripe"})]})]})})}export{S as BillingPage,S as default};
//# sourceMappingURL=BillingPage-DwzuvfCL.js.map
