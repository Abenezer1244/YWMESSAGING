{"version":3,"file":"MessageHistoryPage-CRhl06XC.js","sources":["../../src/pages/dashboard/MessageHistoryPage.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport toast from 'react-hot-toast';\nimport useMessageStore from '../../stores/messageStore';\nimport { getMessageHistory } from '../../api/messages';\nimport Button from '../../components/ui/Button';\nimport Card from '../../components/ui/Card';\nimport { Spinner } from '../../components/ui';\nexport function MessageHistoryPage() {\n    const { messages, setMessages, isLoading, setLoading } = useMessageStore();\n    const [page, setPage] = useState(1);\n    const [total, setTotal] = useState(0);\n    const [statusFilter, setStatusFilter] = useState('');\n    const limit = 20;\n    const pages = Math.ceil(total / limit);\n    useEffect(() => {\n        loadMessages();\n    }, [page, statusFilter]);\n    const loadMessages = async () => {\n        try {\n            setLoading(true);\n            const data = await getMessageHistory({\n                page,\n                limit,\n                status: statusFilter || undefined,\n            });\n            setMessages(data.data);\n            setTotal(data.pagination.total);\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to load messages');\n        }\n        finally {\n            setLoading(false);\n        }\n    };\n    const getStatusBadgeColor = (status) => {\n        switch (status) {\n            case 'sent':\n                return 'bg-success-100 dark:bg-success-900 text-success-800 dark:text-success-200';\n            case 'pending':\n                return 'bg-warning-100 dark:bg-warning-900 text-warning-800 dark:text-warning-200';\n            case 'failed':\n                return 'bg-danger-100 dark:bg-danger-900 text-danger-800 dark:text-danger-200';\n            default:\n                return 'bg-secondary-100 dark:bg-secondary-800 text-secondary-800 dark:text-secondary-200';\n        }\n    };\n    return (_jsx(\"div\", { className: \"min-h-screen bg-gradient-to-br from-secondary-50 dark:from-secondary-900 to-secondary-100 dark:to-secondary-950 p-6 transition-colors duration-normal\", children: _jsxs(\"div\", { className: \"max-w-7xl mx-auto\", children: [_jsxs(\"div\", { className: \"mb-8\", children: [_jsx(\"h1\", { className: \"text-4xl font-bold text-secondary-900 dark:text-secondary-50 mb-2\", children: \"\\uD83D\\uDCDC Message History\" }), _jsxs(\"p\", { className: \"text-secondary-600 dark:text-secondary-400\", children: [total, \" total messages\"] })] }), _jsxs(Card, { variant: \"default\", className: \"mb-6\", children: [_jsx(\"label\", { className: \"block text-sm font-semibold text-secondary-900 dark:text-secondary-50 mb-3\", children: \"\\uD83D\\uDD0D Filter by Status\" }), _jsxs(\"select\", { value: statusFilter, onChange: (e) => {\n                                setStatusFilter(e.target.value);\n                                setPage(1);\n                            }, className: \"px-4 py-2 border border-secondary-200 dark:border-secondary-700 rounded-lg bg-white dark:bg-secondary-800 text-secondary-900 dark:text-secondary-50 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors duration-normal\", children: [_jsx(\"option\", { value: \"\", children: \"All Statuses\" }), _jsx(\"option\", { value: \"pending\", children: \"Pending\" }), _jsx(\"option\", { value: \"sent\", children: \"Sent\" }), _jsx(\"option\", { value: \"failed\", children: \"Failed\" })] })] }), isLoading ? (_jsx(\"div\", { className: \"flex items-center justify-center py-20\", children: _jsx(Spinner, { size: \"lg\", text: \"Loading messages...\" }) })) : messages.length === 0 ? (_jsxs(Card, { variant: \"highlight\", className: \"text-center py-16\", children: [_jsx(\"div\", { className: \"mb-6\", children: _jsx(\"span\", { className: \"text-6xl\", children: \"\\uD83D\\uDCDC\" }) }), _jsx(\"h2\", { className: \"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-3\", children: \"No Messages Found\" }), _jsx(\"p\", { className: \"text-secondary-600 dark:text-secondary-400\", children: \"Your message history will appear here after you send messages.\" })] })) : (_jsxs(_Fragment, { children: [_jsx(Card, { variant: \"default\", className: \"overflow-hidden\", children: _jsx(\"div\", { className: \"overflow-x-auto\", children: _jsxs(\"table\", { className: \"min-w-full\", children: [_jsx(\"thead\", { className: \"bg-secondary-100 dark:bg-secondary-800 border-b border-secondary-200 dark:border-secondary-700\", children: _jsxs(\"tr\", { children: [_jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-secondary-900 dark:text-secondary-50\", children: \"Message\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-secondary-900 dark:text-secondary-50\", children: \"Recipients\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-secondary-900 dark:text-secondary-50\", children: \"Delivery\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-secondary-900 dark:text-secondary-50\", children: \"Status\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-secondary-900 dark:text-secondary-50\", children: \"Sent\" })] }) }), _jsx(\"tbody\", { className: \"divide-y divide-secondary-200 dark:divide-secondary-700\", children: messages.map((message) => (_jsxs(\"tr\", { className: \"hover:bg-secondary-50 dark:hover:bg-secondary-700/50 transition-colors duration-normal\", children: [_jsxs(\"td\", { className: \"px-6 py-4\", children: [_jsxs(\"p\", { className: \"text-sm text-secondary-900 dark:text-secondary-50 font-medium truncate max-w-xs\", children: [message.content.slice(0, 50), message.content.length > 50 ? '...' : ''] }), _jsx(\"p\", { className: \"text-xs text-secondary-600 dark:text-secondary-400 mt-1\", children: message.targetType === 'individual'\n                                                                    ? 'Individual'\n                                                                    : message.targetType === 'groups'\n                                                                        ? 'Groups'\n                                                                        : message.targetType === 'branches'\n                                                                            ? 'Branches'\n                                                                            : 'All Members' })] }), _jsx(\"td\", { className: \"px-6 py-4 whitespace-nowrap\", children: _jsx(\"div\", { className: \"text-sm text-secondary-900 dark:text-secondary-50 font-medium\", children: message.totalRecipients }) }), _jsx(\"td\", { className: \"px-6 py-4 whitespace-nowrap\", children: _jsxs(\"div\", { className: \"text-sm\", children: [_jsxs(\"p\", { className: \"text-secondary-900 dark:text-secondary-50 font-medium\", children: [message.deliveredCount, \"/\", message.totalRecipients] }), _jsxs(\"p\", { className: \"text-secondary-600 dark:text-secondary-400 text-xs\", children: [message.deliveryRate || 0, \"%\"] })] }) }), _jsx(\"td\", { className: \"px-6 py-4 whitespace-nowrap\", children: _jsx(\"span\", { className: `inline-block px-3 py-1 text-xs font-semibold rounded-full ${getStatusBadgeColor(message.status)}`, children: message.status.charAt(0).toUpperCase() + message.status.slice(1) }) }), _jsxs(\"td\", { className: \"px-6 py-4 whitespace-nowrap text-sm text-secondary-600 dark:text-secondary-400\", children: [new Date(message.createdAt).toLocaleDateString(), _jsx(\"br\", {}), new Date(message.createdAt).toLocaleTimeString()] })] }, message.id))) })] }) }) }), pages > 1 && (_jsxs(\"div\", { className: \"mt-6 flex justify-center gap-2\", children: [_jsx(Button, { variant: \"secondary\", size: \"md\", onClick: () => setPage(Math.max(1, page - 1)), disabled: page === 1, children: \"\\u2190 Previous\" }), _jsxs(\"div\", { className: \"px-4 py-2 text-secondary-700 dark:text-secondary-300 font-medium\", children: [\"Page \", page, \" of \", pages] }), _jsx(Button, { variant: \"secondary\", size: \"md\", onClick: () => setPage(Math.min(pages, page + 1)), disabled: page === pages, children: \"Next \\u2192\" })] }))] }))] }) }));\n}\nexport default MessageHistoryPage;\n//# sourceMappingURL=MessageHistoryPage.js.map"],"names":["MessageHistoryPage","messages","setMessages","isLoading","setLoading","useMessageStore","page","setPage","useState","total","setTotal","statusFilter","setStatusFilter","limit","pages","useEffect","loadMessages","data","getMessageHistory","error","toast","getStatusBadgeColor","status","_jsx","_jsxs","Card","e","Spinner","_Fragment","message","Button"],"mappings":"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"}