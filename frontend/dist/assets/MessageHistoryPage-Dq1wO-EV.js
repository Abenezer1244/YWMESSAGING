import{r,_ as b,j as e,C as c,S as f,B as m}from"./index-BIpL1vD1.js";import{u as N,g as k}from"./messages-Br4LSzZc.js";function D(){const{messages:o,setMessages:y,isLoading:h,setLoading:l}=N(),[t,n]=r.useState(1),[i,u]=r.useState(0),[d,p]=r.useState(""),x=20,a=Math.ceil(i/x);r.useEffect(()=>{g()},[t,d]);const g=async()=>{try{l(!0);const s=await k({page:t,limit:x,status:d||void 0});y(s.data),u(s.pagination.total)}catch(s){b.error(s.message||"Failed to load messages")}finally{l(!1)}},j=s=>{switch(s){case"sent":return"bg-success-100 dark:bg-success-900 text-success-800 dark:text-success-200";case"pending":return"bg-warning-100 dark:bg-warning-900 text-warning-800 dark:text-warning-200";case"failed":return"bg-danger-100 dark:bg-danger-900 text-danger-800 dark:text-danger-200";default:return"bg-secondary-100 dark:bg-secondary-800 text-secondary-800 dark:text-secondary-200"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-secondary-50 dark:from-secondary-900 to-secondary-100 dark:to-secondary-950 p-6 transition-colors duration-normal",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-secondary-900 dark:text-secondary-50 mb-2",children:"📜 Message History"}),e.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400",children:[i," total messages"]})]}),e.jsxs(c,{variant:"default",className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-secondary-900 dark:text-secondary-50 mb-3",children:"🔍 Filter by Status"}),e.jsxs("select",{value:d,onChange:s=>{p(s.target.value),n(1)},className:"px-4 py-2 border border-secondary-200 dark:border-secondary-700 rounded-lg bg-white dark:bg-secondary-800 text-secondary-900 dark:text-secondary-50 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors duration-normal",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),h?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(f,{size:"lg",text:"Loading messages..."})}):o.length===0?e.jsxs(c,{variant:"highlight",className:"text-center py-16",children:[e.jsx("div",{className:"mb-6",children:e.jsx("span",{className:"text-6xl",children:"📜"})}),e.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-secondary-50 mb-3",children:"No Messages Found"}),e.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Your message history will appear here after you send messages."})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"default",className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-secondary-100 dark:bg-secondary-800 border-b border-secondary-200 dark:border-secondary-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-secondary-900 dark:text-secondary-50",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-secondary-900 dark:text-secondary-50",children:"Recipients"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-secondary-900 dark:text-secondary-50",children:"Delivery"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-secondary-900 dark:text-secondary-50",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-secondary-900 dark:text-secondary-50",children:"Sent"})]})}),e.jsx("tbody",{className:"divide-y divide-secondary-200 dark:divide-secondary-700",children:o.map(s=>e.jsxs("tr",{className:"hover:bg-secondary-50 dark:hover:bg-secondary-700/50 transition-colors duration-normal",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("p",{className:"text-sm text-secondary-900 dark:text-secondary-50 font-medium truncate max-w-xs",children:[s.content.slice(0,50),s.content.length>50?"...":""]}),e.jsx("p",{className:"text-xs text-secondary-600 dark:text-secondary-400 mt-1",children:s.targetType==="individual"?"Individual":s.targetType==="groups"?"Groups":s.targetType==="branches"?"Branches":"All Members"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-secondary-900 dark:text-secondary-50 font-medium",children:s.totalRecipients})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"text-secondary-900 dark:text-secondary-50 font-medium",children:[s.deliveredCount,"/",s.totalRecipients]}),e.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400 text-xs",children:[s.deliveryRate||0,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${j(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-600 dark:text-secondary-400",children:[new Date(s.createdAt).toLocaleDateString(),e.jsx("br",{}),new Date(s.createdAt).toLocaleTimeString()]})]},s.id))})]})})}),a>1&&e.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[e.jsx(m,{variant:"secondary",size:"md",onClick:()=>n(Math.max(1,t-1)),disabled:t===1,children:"← Previous"}),e.jsxs("div",{className:"px-4 py-2 text-secondary-700 dark:text-secondary-300 font-medium",children:["Page ",t," of ",a]}),e.jsx(m,{variant:"secondary",size:"md",onClick:()=>n(Math.min(a,t+1)),disabled:t===a,children:"Next →"})]})]})]})})}export{D as MessageHistoryPage,D as default};
//# sourceMappingURL=MessageHistoryPage-Dq1wO-EV.js.map
