import{r as o,_ as R,j as e}from"./index-yZQ7CcO4.js";import{E as A,N as L,B,R as u,K as I,H as p,X as g,Y as x,I as f,O as j,M as y,F as K,J as b}from"./analytics-DyZkTDqI.js";import{a as T,L as $,S as n}from"./SoftLayout-Bm5_CR6M.js";import{t as s}from"./themeColors-Cduerava.js";import{d as c}from"./designTokens-9kEwpnwA.js";import{m as l}from"./proxy-BE6AFGmB.js";import"./index-DkP0Nj4C.js";import"./index-BPAMdTJq.js";const v={backgroundColor:s.background.darkDim,border:`${c.borderWidth.base} solid ${s.border.darkDim}`,borderRadius:c.borderRadius.md,color:s.text.white};function H(){const[a,N]=o.useState(null),[d,S]=o.useState([]),[i,k]=o.useState(null),[C,h]=o.useState(!0),[m,D]=o.useState(30);o.useEffect(()=>{M()},[m]);const M=async()=>{try{h(!0);const[t,r,w]=await Promise.all([A({days:m}),L(),B()]);N(t),S(r),k(w)}catch(t){R.error(t.message||"Failed to load analytics")}finally{h(!1)}};return e.jsx(T,{children:e.jsxs("div",{className:"px-4 md:px-8 py-8 w-full",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex justify-between items-center mb-8 flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:e.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Analytics"})}),e.jsx("p",{className:"text-muted-foreground",children:"Track your messaging performance and engagement"})]}),e.jsxs("select",{value:m,onChange:t=>D(parseInt(t.target.value)),className:"px-4 py-2 border border-border/40 rounded-lg bg-card/50 text-foreground focus:outline-none focus:ring-2 focus:ring-primary transition-colors duration-normal backdrop-blur-sm",children:[e.jsx("option",{value:7,children:"Last 7 days"}),e.jsx("option",{value:30,children:"Last 30 days"}),e.jsx("option",{value:90,children:"Last 90 days"})]})]}),C?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(l.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0},children:e.jsx($,{className:"w-8 h-8 text-primary"})})}):e.jsxs("div",{className:"space-y-8",children:[i&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[{label:"Total Messages",value:i.totalMessages,color:"text-primary"},{label:"Delivery Rate",value:`${i.averageDeliveryRate}%`,color:"text-green-400"},{label:"Total Members",value:i.totalMembers,color:"text-blue-400"},{label:"Branches",value:i.totalBranches,color:"text-amber-400"},{label:"Total Groups",value:i.totalGroups,color:"text-red-400"}].map((t,r)=>e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},children:e.jsxs(n,{variant:"gradient",className:"text-center",children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:t.label}),e.jsx("p",{className:`text-3xl font-bold ${t.color}`,children:t.value})]})},r))}),a&&a.byDay.length>0&&e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(n,{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Message Volume"}),e.jsx(u,{width:"100%",height:300,children:e.jsxs(I,{data:a.byDay,children:[e.jsx(p,{strokeDasharray:"3 3",stroke:s.border.dark}),e.jsx(g,{dataKey:"date",tick:{fontSize:parseInt(c.typography.fontSize.xs)},angle:-45,textAnchor:"end",height:80}),e.jsx(x,{}),e.jsx(f,{contentStyle:v}),e.jsx(j,{}),e.jsx(y,{type:"monotone",dataKey:"count",stroke:s.primary.base,name:"Messages Sent"}),e.jsx(y,{type:"monotone",dataKey:"delivered",stroke:s.success.base,name:"Delivered"}),e.jsx(y,{type:"monotone",dataKey:"failed",stroke:s.danger.base,name:"Failed"})]})})]})}),d.length>0&&e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},children:e.jsxs(n,{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Branch Comparison"}),e.jsx(u,{width:"100%",height:300,children:e.jsxs(K,{data:d,children:[e.jsx(p,{strokeDasharray:"3 3",stroke:s.border.dark}),e.jsx(g,{dataKey:"name",tick:{fontSize:parseInt(c.typography.fontSize.xs)},angle:-45,textAnchor:"end",height:80}),e.jsx(x,{yAxisId:"left"}),e.jsx(x,{yAxisId:"right",orientation:"right"}),e.jsx(f,{contentStyle:v}),e.jsx(j,{}),e.jsx(b,{yAxisId:"left",dataKey:"messageCount",fill:s.primary.base,name:"Messages Sent"}),e.jsx(b,{yAxisId:"right",dataKey:"deliveryRate",fill:s.success.base,name:"Delivery Rate (%)"})]})})]})}),d.length>0&&e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(n,{className:"overflow-hidden",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Branch Details"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"border-b border-border/40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-foreground",children:"Branch"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-foreground",children:"Members"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-foreground",children:"Groups"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-foreground",children:"Messages"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-foreground",children:"Delivery Rate"})]})}),e.jsx("tbody",{className:"divide-y divide-border/40",children:d.map((t,r)=>e.jsxs(l.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:r*.02},className:"hover:bg-muted/30 transition-colors duration-normal",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-foreground",children:t.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:t.memberCount}),e.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:t.groupCount}),e.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:t.messageCount}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${t.deliveryRate}%`}})}),e.jsxs("span",{className:"font-medium text-foreground",children:[t.deliveryRate,"%"]})]})})]},t.id))})]})})]})}),a&&e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},children:e.jsxs(n,{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Message Statistics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"Total Messages",value:a.totalMessages,color:"text-primary"},{label:"Delivered",value:a.deliveredCount,color:"text-green-400"},{label:"Failed",value:a.failedCount,color:"text-red-400"},{label:"Pending",value:a.pendingCount,color:"text-amber-400"}].map((t,r)=>e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-1",children:t.label}),e.jsx("p",{className:`text-2xl font-bold ${t.color}`,children:t.value})]},r))})]})})]})]})})}export{H as AnalyticsPage,H as default};
//# sourceMappingURL=AnalyticsPage-oNBfS9pY.js.map
