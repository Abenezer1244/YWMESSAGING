import{c as h,r as x,j as e,u as f,a as p,B as u,C as c}from"./index-jEQhhmGz.js";import{g as j}from"./billing-jZSf12vq.js";function N(){const{branches:r,currentBranchId:l,allBranchesMode:a,setCurrentBranch:d,setAllBranchesMode:o}=h(),[i,n]=x.useState(!1),t=r.find(s=>s.id===l);return r.length===0?null:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!i),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2 transition",children:[e.jsx("span",{className:"text-sm font-medium",children:a?"All Branches":t?.name||"Select Branch"}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]}),i&&e.jsx("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-gray-300 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsx("button",{onClick:()=>{o(!0),n(!1)},className:`w-full text-left px-4 py-2 rounded-lg transition ${a?"bg-blue-50 text-blue-600 font-medium":"hover:bg-gray-50"}`,children:"ðŸ“Š All Branches"}),e.jsx("div",{className:"border-t my-2"}),r.map(s=>e.jsx("button",{onClick:()=>{d(s.id),n(!1)},className:`w-full text-left px-4 py-2 rounded-lg transition ${l===s.id&&!a?"bg-blue-50 text-blue-600 font-medium":"hover:bg-gray-50"}`,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.groupCount," group",s.groupCount!==1?"s":""," â€¢ ",s.memberCount," member",s.memberCount!==1?"s":""]})]})},s.id))]})})]})}function v(){const[r,l]=x.useState(null),[a,d]=x.useState(!0);if(x.useEffect(()=>{(async()=>{try{d(!0);const g=await j();l(g)}catch(g){console.error("Failed to load trial status:",g)}finally{d(!1)}})()},[]),a||!r||!r.onTrial)return null;const o=r.daysRemaining,i=o<=3,n=o<=0;let t="bg-green-50 border-green-200",s="text-green-800",m="âœ“";return n?(t="bg-red-50 border-red-200",s="text-red-800",m="âš "):i&&(t="bg-yellow-50 border-yellow-200",s="text-yellow-800",m="!"),e.jsx("div",{className:`${t} border rounded-lg p-4 mb-6`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:`text-lg font-bold ${s}`,children:m}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${s}`,children:n?"Trial Expired":"Free Trial Active"}),e.jsx("p",{className:`text-sm ${s} mt-1`,children:n?"Your trial has expired. Please subscribe to continue using the platform.":o===1?"Your trial expires tomorrow. Subscribe now to keep your account active.":`${o} days remaining in your trial`}),!n&&e.jsx("button",{onClick:()=>window.location.href="/subscribe",className:"mt-2 text-sm font-semibold hover:underline",children:"View Plans â†’"})]})]})})}function k(){const r=f(),{user:l,church:a,logout:d}=p(),{currentBranchId:o}=h(),i=()=>{d(),r("/login")};a&&Math.ceil((new Date(a.trialEndsAt).getTime()-new Date().getTime())/(1e3*60*60*24));const n=[{label:"Branches",action:()=>r("/branches"),always:!0},{label:"Groups",action:()=>r(`/branches/${o}/groups`),conditional:!0},{label:"Members",action:()=>r("/members?groupId="),conditional:!0},{label:"Send Message",action:()=>r("/send-message"),conditional:!0},{label:"History",action:()=>r("/message-history"),conditional:!0},{label:"Templates",action:()=>r("/templates"),conditional:!0},{label:"Recurring",action:()=>r("/recurring-messages"),conditional:!0},{label:"Analytics",action:()=>r("/analytics"),conditional:!0},{label:"Billing",action:()=>r("/billing"),always:!0},{label:"Settings",action:()=>r("/admin/settings"),always:!0}];return e.jsxs("div",{className:"min-h-screen bg-background transition-colors duration-normal",children:[e.jsx("header",{className:"bg-muted shadow-sm border-b border-border transition-colors duration-normal",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary rounded-lg flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-background font-bold text-base",children:"C"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:a?.name})]})]}),e.jsx(u,{variant:"outline",size:"md",onClick:i,className:"border-border text-foreground hover:bg-muted",children:"Logout"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[n.map(t=>t.always||t.conditional&&o?e.jsx("button",{onClick:t.action,className:"px-4 py-2 text-foreground font-medium text-sm hover:bg-muted/50 rounded-lg transition-colors duration-normal border border-border hover:border-primary",children:t.label},t.label):null),e.jsx(N,{})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(v,{}),e.jsxs("div",{className:"mb-8 animate-fadeIn",children:[e.jsxs("h2",{className:"text-3xl font-bold text-foreground mb-6 tracking-tight",children:["Welcome back, ",l?.firstName,"!"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(c,{variant:"default",className:"border border-border bg-card hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"Your Account"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"text-foreground/80",children:e.jsxs("span",{className:"font-medium text-foreground",children:[l?.firstName," ",l?.lastName]})}),e.jsx("p",{className:"text-foreground/80",children:e.jsx("span",{className:"text-muted-foreground",children:l?.email})}),e.jsx("p",{className:"text-foreground/80",children:e.jsx("span",{className:"inline-block px-2 py-1 bg-primary/20 text-primary rounded text-xs font-semibold",children:l?.role})})]})]})]})}),e.jsx(c,{variant:"default",className:"border border-border bg-card hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"Church Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"text-foreground/80",children:e.jsx("span",{className:"font-medium text-foreground",children:a?.name})}),e.jsx("p",{className:"text-foreground/80",children:e.jsx("span",{className:"text-muted-foreground",children:a?.email})}),e.jsxs("p",{className:"text-foreground/80",children:["Trial ends ",e.jsx("span",{className:"font-semibold text-foreground",children:new Date(a?.trialEndsAt||"").toLocaleDateString()})]})]})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(c,{variant:"default",className:"text-center border border-border bg-card hover:shadow-md transition-all",children:[e.jsx("div",{className:"w-14 h-14 bg-blue-500/10 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"w-7 h-7 bg-blue-500 rounded-full"})}),e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"0"}),e.jsx("p",{className:"text-muted-foreground font-medium mb-4",children:"Active Branches"}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>r("/branches"),fullWidth:!0,className:"border-border text-foreground hover:bg-muted",children:"View Branches"})]}),e.jsxs(c,{variant:"default",className:"text-center border border-border bg-card hover:shadow-md transition-all",children:[e.jsx("div",{className:"w-14 h-14 bg-green-500/10 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"w-7 h-7 bg-green-500 rounded-full"})}),e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"0"}),e.jsx("p",{className:"text-muted-foreground font-medium mb-4",children:"Total Members"}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>r("/members?groupId="),fullWidth:!0,className:"border-border text-foreground hover:bg-muted",children:"Manage Members"})]}),e.jsxs(c,{variant:"default",className:"text-center border border-border bg-card hover:shadow-md transition-all",children:[e.jsx("div",{className:"w-14 h-14 bg-orange-500/10 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"w-7 h-7 bg-orange-500 rounded-full"})}),e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"0"}),e.jsx("p",{className:"text-muted-foreground font-medium mb-4",children:"Messages Sent"}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>r("/send-message"),fullWidth:!0,className:"border-border text-foreground hover:bg-muted",children:"Send Message"})]})]}),e.jsxs(c,{variant:"default",className:"border border-border bg-card",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Key Features"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{color:"blue",title:"Multi-Branch",desc:"Manage multiple church locations"},{color:"green",title:"Groups & Members",desc:"Organize and segment your congregation"},{color:"orange",title:"SMS Messaging",desc:"Send direct messages to members"},{color:"purple",title:"Templates",desc:"Reuse pre-built message templates"},{color:"pink",title:"Recurring Messages",desc:"Automate regular communications"},{color:"cyan",title:"Analytics",desc:"Track engagement and delivery rates"}].map((t,s)=>{const m={blue:"bg-blue-500/10 border-blue-500/20",green:"bg-green-500/10 border-green-500/20",orange:"bg-orange-500/10 border-orange-500/20",purple:"bg-purple-500/10 border-purple-500/20",pink:"bg-pink-500/10 border-pink-500/20",cyan:"bg-cyan-500/10 border-cyan-500/20"},b={blue:"bg-blue-500",green:"bg-green-500",orange:"bg-orange-500",purple:"bg-purple-500",pink:"bg-pink-500",cyan:"bg-cyan-500"};return e.jsxs("div",{className:`p-4 ${m[t.color]} border rounded-lg hover:shadow-md transition-all`,children:[e.jsx("div",{className:"flex items-start gap-3 mb-3",children:e.jsx("div",{className:`w-3 h-3 ${b[t.color]} rounded-full flex-shrink-0 mt-1`})}),e.jsx("h4",{className:"font-semibold text-foreground mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.desc})]},s)})})]})]})]})}export{k as DashboardPage,k as default};
//# sourceMappingURL=DashboardPage-BZJfvrW2.js.map
