{"version":3,"file":"ConversationsPage-C5ray296.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/archive.js","../../../node_modules/lucide-react/dist/esm/icons/download.js","../../../node_modules/lucide-react/dist/esm/icons/paperclip.js","../../src/api/conversations.js","../../src/components/conversations/ConversationItem.js","../../src/components/conversations/ConversationsList.js","../../src/components/LazyImage.js","../../src/components/conversations/MessageBubble.js","../../src/components/conversations/MessageThread.js","../../src/components/conversations/ReplyComposer.js","../../src/pages/dashboard/ConversationsPage.js"],"sourcesContent":["/**\n * @license lucide-react v0.552.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"20\", height: \"5\", x: \"2\", y: \"3\", rx: \"1\", key: \"1wp1u1\" }],\n  [\"path\", { d: \"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8\", key: \"1s80jp\" }],\n  [\"path\", { d: \"M10 12h4\", key: \"a56b0p\" }]\n];\nconst Archive = createLucideIcon(\"archive\", __iconNode);\n\nexport { __iconNode, Archive as default };\n//# sourceMappingURL=archive.js.map\n","/**\n * @license lucide-react v0.552.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 15V3\", key: \"m9g1x1\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"path\", { d: \"m7 10 5 5 5-5\", key: \"brsn70\" }]\n];\nconst Download = createLucideIcon(\"download\", __iconNode);\n\nexport { __iconNode, Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * @license lucide-react v0.552.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551\",\n      key: \"1miecu\"\n    }\n  ]\n];\nconst Paperclip = createLucideIcon(\"paperclip\", __iconNode);\n\nexport { __iconNode, Paperclip as default };\n//# sourceMappingURL=paperclip.js.map\n","import client from './client';\n/**\n * Get all conversations for the church\n */\nexport async function getConversations(options = {}) {\n    const params = new URLSearchParams();\n    if (options.page)\n        params.append('page', options.page.toString());\n    if (options.limit)\n        params.append('limit', options.limit.toString());\n    if (options.status)\n        params.append('status', options.status);\n    const response = await client.get(`/messages/conversations?${params.toString()}`);\n    return response.data;\n}\n/**\n * Get single conversation with messages\n */\nexport async function getConversation(conversationId, options = {}) {\n    const params = new URLSearchParams();\n    if (options.page)\n        params.append('page', options.page.toString());\n    if (options.limit)\n        params.append('limit', options.limit.toString());\n    const response = await client.get(`/messages/conversations/${conversationId}?${params.toString()}`);\n    return response.data;\n}\n/**\n * Reply to conversation with text only\n */\nexport async function replyToConversation(conversationId, content) {\n    const response = await client.post(`/messages/conversations/${conversationId}/reply`, { content });\n    return response.data;\n}\n/**\n * Reply to conversation with media\n */\nexport async function replyWithMedia(conversationId, file, content) {\n    const formData = new FormData();\n    formData.append('file', file);\n    if (content) {\n        formData.append('content', content);\n    }\n    const response = await client.post(`/messages/conversations/${conversationId}/reply-with-media`, formData, {\n        headers: {\n            'Content-Type': 'multipart/form-data',\n        },\n    });\n    return response.data;\n}\n/**\n * Mark conversation as read\n */\nexport async function markConversationAsRead(conversationId) {\n    await client.patch(`/messages/conversations/${conversationId}/read`);\n}\n/**\n * Update conversation status\n */\nexport async function updateConversationStatus(conversationId, status) {\n    const response = await client.patch(`/messages/conversations/${conversationId}/status`, { status });\n    return response.data;\n}\n//# sourceMappingURL=conversations.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { memo } from 'react';\nimport { Archive } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { SoftButton } from '../SoftUI';\nfunction ConversationItemComponent({ conversation, isSelected, onSelect, onUpdateStatus, index, }) {\n    const formatDate = (date) => {\n        const d = new Date(date);\n        const now = new Date();\n        const diffHours = (now.getTime() - d.getTime()) / (1000 * 60 * 60);\n        if (diffHours < 1) {\n            const diffMins = Math.floor((now.getTime() - d.getTime()) / (1000 * 60));\n            return `${diffMins}m ago`;\n        }\n        if (diffHours < 24) {\n            return `${Math.floor(diffHours)}h ago`;\n        }\n        return d.toLocaleDateString([], { month: 'short', day: 'numeric' });\n    };\n    const getStatusColor = (status) => {\n        switch (status) {\n            case 'open':\n                return 'bg-blue-500/20 text-blue-400';\n            case 'closed':\n                return 'bg-red-500/20 text-red-400';\n            case 'archived':\n                return 'bg-gray-500/20 text-gray-400';\n            default:\n                return 'bg-muted text-muted-foreground';\n        }\n    };\n    return (_jsx(motion.div, { initial: { opacity: 0, x: -20 }, animate: { opacity: 1, x: 0 }, transition: { delay: index * 0.05 }, children: _jsx(\"button\", { onClick: () => onSelect(conversation.id), className: `w-full text-left p-4 rounded-lg border transition-all duration-200 ${isSelected\n                ? 'border-primary bg-primary/5'\n                : 'border-border/40 bg-card/50 hover:border-border hover:bg-card'}`, children: _jsxs(\"div\", { className: \"flex items-start gap-3\", children: [conversation.unreadCount > 0 && (_jsx(\"div\", { className: \"mt-1 flex-shrink-0\", children: _jsx(\"div\", { className: \"w-2 h-2 bg-primary rounded-full\" }) })), _jsxs(\"div\", { className: \"flex-1 min-w-0\", children: [_jsxs(\"div\", { className: \"flex items-center gap-2 mb-1\", children: [_jsxs(\"h3\", { className: \"font-semibold text-foreground truncate\", children: [conversation.member.firstName, \" \", conversation.member.lastName] }), conversation.unreadCount > 0 && (_jsx(\"span\", { className: \"bg-primary/20 text-primary text-xs font-bold px-2 py-0.5 rounded-full flex-shrink-0\", children: conversation.unreadCount }))] }), _jsx(\"p\", { className: \"text-sm text-muted-foreground truncate mb-2\", children: conversation.member.phone }), _jsxs(\"div\", { className: \"flex items-center gap-2\", children: [_jsx(\"span\", { className: `text-xs font-medium px-2 py-1 rounded ${getStatusColor(conversation.status)}`, children: conversation.status }), _jsx(\"span\", { className: \"text-xs text-muted-foreground\", children: formatDate(conversation.lastMessageAt) })] })] }), isSelected && onUpdateStatus && (_jsx(\"div\", { className: \"flex-shrink-0 flex gap-1\", onClick: (e) => e.stopPropagation(), children: conversation.status !== 'archived' && (_jsx(SoftButton, { variant: \"secondary\", size: \"sm\", onClick: () => {\n                                onUpdateStatus(conversation.id, 'archived');\n                            }, className: \"p-2\", children: _jsx(Archive, { className: \"w-4 h-4\" }) })) }))] }) }) }));\n}\n/**\n * Memoized ConversationItem component\n * Prevents re-renders of individual conversation items when list updates\n * Critical for performance when displaying many conversations\n * Shallow comparison of conversation object, selection state, and callbacks\n */\nexport const ConversationItem = memo(ConversationItemComponent);\n//# sourceMappingURL=ConversationItem.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React, { useMemo } from 'react';\nimport { MessageSquare, Loader } from 'lucide-react';\nimport { motion } from 'framer-motion';\nconst { FixedSizeList: List } = require('react-window');\nimport { SoftCard } from '../SoftUI';\nimport { ConversationItem } from './ConversationItem';\n/**\n * Row renderer for virtual scrolling\n * Receives item index and style from FixedSizeList\n * Renders ConversationItem with memoization\n */\nconst Row = React.memo(function Row({ index, style, data }) {\n    const { conversations, selectedConversationId, onSelectConversation, onUpdateStatus, } = data;\n    const conversation = conversations[index];\n    return (_jsx(\"div\", { style: style, children: _jsx(\"div\", { className: \"px-2\", children: _jsx(ConversationItem, { conversation: conversation, isSelected: selectedConversationId === conversation.id, onSelect: onSelectConversation, onUpdateStatus: onUpdateStatus, index: index }) }) }));\n});\nexport function ConversationsList({ conversations, selectedConversationId, onSelectConversation, onUpdateStatus, isLoading = false, containerHeight = 600, }) {\n    /**\n     * Memoized row data object\n     * Prevents row renderer from being called unnecessarily\n     * Only recalculates when conversations or selection changes\n     */\n    const rowData = useMemo(() => ({\n        conversations,\n        selectedConversationId,\n        onSelectConversation,\n        onUpdateStatus,\n    }), [conversations, selectedConversationId, onSelectConversation, onUpdateStatus]);\n    if (isLoading) {\n        return (_jsx(\"div\", { className: \"flex items-center justify-center py-8\", children: _jsx(motion.div, { animate: { rotate: 360 }, transition: { duration: 2, repeat: Infinity }, children: _jsx(Loader, { className: \"w-6 h-6 text-primary\" }) }) }));\n    }\n    if (conversations.length === 0) {\n        return (_jsxs(SoftCard, { className: \"text-center py-12\", children: [_jsx(MessageSquare, { className: \"w-12 h-12 text-muted-foreground/50 mx-auto mb-4\" }), _jsx(\"h3\", { className: \"text-lg font-semibold text-foreground mb-2\", children: \"No Conversations\" }), _jsx(\"p\", { className: \"text-muted-foreground\", children: \"Conversations will appear here when members text your church number\" })] }));\n    }\n    return (_jsx(List, { height: containerHeight, itemCount: conversations.length, itemSize: 88, width: \"100%\", itemData: rowData, overscanCount: 5, children: Row }));\n}\n//# sourceMappingURL=ConversationsList.js.map","import { jsx as _jsx } from \"react/jsx-runtime\";\n/**\n * LazyImage Component\n * Defers image loading until the image is about to be viewed (Intersection Observer)\n * Falls back to native lazy loading for older browsers\n *\n * Benefits:\n * - Reduces initial page load time\n * - Lower bandwidth usage (off-screen images not loaded)\n * - Improves Core Web Vitals (LCP, CLS)\n * - Better performance on slow networks\n */\nimport React, { useEffect, useRef, useState } from 'react';\n/**\n * LazyImage Component\n * Uses Intersection Observer for optimal performance\n * Lazy loads images when they enter the viewport\n */\nexport const LazyImage = React.forwardRef(({ src, alt, fallback, onLoad, onError, className, style, ...props }, ref) => {\n    const imgRef = useRef(null);\n    const [isLoaded, setIsLoaded] = useState(false);\n    const [imageError, setImageError] = useState(false);\n    useEffect(() => {\n        const img = imgRef.current;\n        if (!img)\n            return;\n        // Check if browser supports Intersection Observer\n        if ('IntersectionObserver' in window) {\n            const observer = new IntersectionObserver((entries) => {\n                entries.forEach((entry) => {\n                    if (entry.isIntersecting) {\n                        // Image is about to be visible, start loading\n                        img.src = src;\n                        observer.unobserve(img);\n                        // Remove the placeholder once loaded\n                        img.onload = () => {\n                            setIsLoaded(true);\n                            onLoad?.();\n                        };\n                        img.onerror = () => {\n                            setImageError(true);\n                            onError?.();\n                        };\n                    }\n                });\n            }, {\n                // Start loading 50px before image enters viewport\n                rootMargin: '50px',\n            });\n            observer.observe(img);\n            return () => {\n                observer.disconnect();\n            };\n        }\n        else {\n            // Fallback for browsers without Intersection Observer support\n            // Just load the image normally\n            img.src = src;\n            setIsLoaded(true);\n        }\n    }, [src, onLoad, onError]);\n    return (_jsx(\"img\", { ref: imgRef, alt: alt, className: `${className || ''} ${!isLoaded && fallback ? 'blur-sm' : ''}`, style: {\n            transition: 'filter 0.3s ease-in-out',\n            ...style,\n        }, \"data-src\": src, \n        // Fallback image while loading\n        src: fallback || 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 400 300\"%3E%3Crect fill=\"%23f0f0f0\" width=\"400\" height=\"300\"/%3E%3C/svg%3E', loading: \"lazy\", ...props }));\n});\nLazyImage.displayName = 'LazyImage';\n//# sourceMappingURL=LazyImage.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { memo } from 'react';\nimport { Download } from 'lucide-react';\nimport { LazyImage } from '../LazyImage';\nfunction MessageBubbleComponent(props) {\n    const { content, direction, memberName, deliveryStatus, mediaUrl, mediaType, mediaName, mediaSizeBytes, mediaDuration, createdAt, } = props;\n    const isOutbound = direction === 'outbound';\n    const formatFileSize = (bytes) => {\n        if (!bytes)\n            return '';\n        const mb = bytes / 1024 / 1024;\n        return mb > 1 ? `${mb.toFixed(1)}MB` : `${(bytes / 1024).toFixed(0)}KB`;\n    };\n    const formatDuration = (seconds) => {\n        if (!seconds)\n            return '';\n        const mins = Math.floor(seconds / 60);\n        const secs = seconds % 60;\n        return `${mins}:${secs.toString().padStart(2, '0')}`;\n    };\n    const timestamp = new Date(createdAt).toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit',\n    });\n    return (_jsx(\"div\", { className: `flex ${isOutbound ? 'justify-end' : 'justify-start'} mb-4`, children: _jsxs(\"div\", { className: `max-w-sm rounded-lg p-3 ${isOutbound\n                ? 'bg-primary text-white'\n                : 'bg-muted text-foreground'}`, children: [!isOutbound && memberName && (_jsx(\"p\", { className: \"text-xs font-semibold mb-1 opacity-75\", children: memberName })), mediaUrl && mediaType === 'image' && (_jsx(\"a\", { href: mediaUrl, target: \"_blank\", rel: \"noopener noreferrer\", className: \"block mb-2\", children: _jsx(LazyImage, { src: mediaUrl, alt: \"Message attachment\", className: \"max-w-xs rounded-lg hover:opacity-90 cursor-pointer\" }) })), mediaUrl && mediaType === 'video' && (_jsx(\"a\", { href: mediaUrl, target: \"_blank\", rel: \"noopener noreferrer\", className: \"block mb-2 relative\", children: _jsxs(\"video\", { className: \"max-w-xs rounded-lg\", controls: true, poster: mediaUrl, children: [_jsx(\"source\", { src: mediaUrl, type: \"video/mp4\" }), \"Your browser does not support the video tag.\"] }) })), mediaUrl && mediaType === 'audio' && (_jsxs(\"div\", { className: \"mb-2\", children: [_jsxs(\"audio\", { controls: true, className: \"max-w-xs rounded-lg\", children: [_jsx(\"source\", { src: mediaUrl, type: \"audio/mpeg\" }), \"Your browser does not support the audio element.\"] }), mediaDuration && (_jsx(\"p\", { className: \"text-xs mt-1 opacity-75\", children: formatDuration(mediaDuration) }))] })), mediaUrl && mediaType === 'document' && (_jsxs(\"a\", { href: mediaUrl, target: \"_blank\", rel: \"noopener noreferrer\", className: `flex items-center gap-2 p-2 rounded-lg mb-2 ${isOutbound\n                        ? 'bg-white/20 hover:bg-white/30'\n                        : 'bg-foreground/10 hover:bg-foreground/20'}`, children: [_jsx(\"span\", { children: \"\\uD83D\\uDCC4\" }), _jsxs(\"div\", { className: \"flex-1 min-w-0\", children: [_jsx(\"p\", { className: \"text-sm font-medium truncate\", children: mediaName }), mediaSizeBytes && (_jsx(\"p\", { className: \"text-xs opacity-75\", children: formatFileSize(mediaSizeBytes) }))] }), _jsx(Download, { size: 16, className: \"flex-shrink-0\" })] })), content && !content.startsWith('[') && (_jsx(\"p\", { className: \"text-sm break-words whitespace-pre-wrap\", children: content })), _jsxs(\"div\", { className: \"flex items-center justify-between gap-2 mt-1\", children: [_jsx(\"p\", { className: `text-xs ${isOutbound ? 'text-white/80' : 'text-muted-foreground'}`, children: timestamp }), isOutbound && deliveryStatus && (_jsxs(\"span\", { className: \"text-xs opacity-75\", children: [deliveryStatus === 'pending' && '⏱️', deliveryStatus === 'delivered' && '✓✓', deliveryStatus === 'failed' && '❌'] }))] })] }) }));\n}\n/**\n * Memoized MessageBubble component\n * Prevents re-renders of individual messages when conversation re-renders\n * Shallow comparison of all message props (content, direction, media, status, etc.)\n * Critical for performance in message lists with many messages\n */\nexport const MessageBubble = memo(MessageBubbleComponent);\n//# sourceMappingURL=MessageBubble.js.map","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect, useRef } from 'react';\nimport { motion } from 'framer-motion';\nimport { Loader } from 'lucide-react';\nimport { MessageBubble } from './MessageBubble';\nimport { SoftButton } from '../SoftUI';\nexport function MessageThread({ conversation, messages, isLoading = false, page = 1, pages = 1, onLoadMore, }) {\n    const messagesEndRef = useRef(null);\n    const messagesContainerRef = useRef(null);\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n    };\n    useEffect(() => {\n        // Only scroll on initial load or when new messages arrive on current page\n        if (page === pages) {\n            scrollToBottom();\n        }\n    }, [messages, page, pages]);\n    if (!messages.length && !isLoading) {\n        return (_jsx(\"div\", { className: \"flex flex-col items-center justify-center h-full py-12 text-center\", children: _jsxs(\"div\", { className: \"text-muted-foreground\", children: [_jsx(\"p\", { className: \"text-lg font-medium mb-2\", children: \"No messages yet\" }), _jsx(\"p\", { className: \"text-sm\", children: \"This conversation is just getting started. Send a message to get started!\" })] }) }));\n    }\n    return (_jsx(\"div\", { className: \"flex flex-col h-full\", children: _jsxs(\"div\", { ref: messagesContainerRef, className: \"flex-1 overflow-y-auto px-4 py-6 space-y-4\", children: [page < pages && (_jsx(\"div\", { className: \"flex justify-center mb-4\", children: _jsx(SoftButton, { variant: \"secondary\", size: \"sm\", onClick: () => onLoadMore?.(page + 1), disabled: isLoading, children: isLoading ? (_jsxs(_Fragment, { children: [_jsx(motion.div, { animate: { rotate: 360 }, transition: { duration: 2, repeat: Infinity }, children: _jsx(Loader, { className: \"w-4 h-4 inline mr-2\" }) }), \"Loading...\"] })) : ('Load Older Messages') }) })), messages.map((message) => (_jsx(MessageBubble, { ...message }, message.id))), isLoading && (_jsx(\"div\", { className: \"flex justify-center py-4\", children: _jsx(motion.div, { animate: { rotate: 360 }, transition: { duration: 2, repeat: Infinity }, children: _jsx(Loader, { className: \"w-6 h-6 text-primary\" }) }) })), _jsx(\"div\", { ref: messagesEndRef })] }) }));\n}\n//# sourceMappingURL=MessageThread.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useRef } from 'react';\nimport { Send, Paperclip, X, AlertCircle } from 'lucide-react';\nimport { SoftButton } from '../SoftUI';\nimport Input from '../ui/Input';\nimport { Spinner } from '../ui';\nexport function ReplyComposer({ conversationId, onReply, isLoading, }) {\n    const [message, setMessage] = useState('');\n    const [selectedFile, setSelectedFile] = useState(null);\n    const [filePreview, setFilePreview] = useState(null);\n    const [uploading, setUploading] = useState(false);\n    const [error, setError] = useState(null);\n    const fileInputRef = useRef(null);\n    const handleFileSelect = async (e) => {\n        const file = e.target.files?.[0];\n        if (!file)\n            return;\n        setError(null);\n        // Validate file size (500MB)\n        const maxSize = 500 * 1024 * 1024;\n        if (file.size > maxSize) {\n            setError(`File too large. Max 500MB, got ${(file.size / 1024 / 1024).toFixed(1)}MB`);\n            return;\n        }\n        // Validate file type\n        const allowedTypes = [\n            'image/jpeg',\n            'image/png',\n            'image/gif',\n            'image/webp',\n            'video/mp4',\n            'video/quicktime',\n            'video/x-msvideo',\n            'video/x-matroska',\n            'audio/mpeg',\n            'audio/wav',\n            'audio/aac',\n            'audio/ogg',\n            'application/pdf',\n            'application/msword',\n            'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n            'application/vnd.ms-excel',\n            'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n        ];\n        if (!allowedTypes.includes(file.type)) {\n            setError(`File type not allowed: ${file.type}`);\n            return;\n        }\n        setSelectedFile(file);\n        // Show preview for images\n        if (file.type.startsWith('image/')) {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                setFilePreview(e.target?.result);\n            };\n            reader.readAsDataURL(file);\n        }\n        else {\n            setFilePreview(null);\n        }\n    };\n    const handleSend = async () => {\n        if (!message && !selectedFile)\n            return;\n        setError(null);\n        if (selectedFile) {\n            // Send with media\n            setUploading(true);\n            try {\n                const formData = new FormData();\n                formData.append('file', selectedFile);\n                if (message) {\n                    formData.append('content', message);\n                }\n                const response = await fetch(`/api/messages/conversations/${conversationId}/reply-with-media`, {\n                    method: 'POST',\n                    body: formData,\n                });\n                if (!response.ok) {\n                    const errorData = await response.json();\n                    throw new Error(errorData.error || 'Failed to send message with media');\n                }\n                // Clear state\n                setMessage('');\n                setSelectedFile(null);\n                setFilePreview(null);\n                if (fileInputRef.current)\n                    fileInputRef.current.value = '';\n                // Call onReply to refresh conversation\n                await onReply('');\n            }\n            catch (err) {\n                console.error('Upload error:', err);\n                setError(err instanceof Error ? err.message : 'Failed to send media');\n            }\n            finally {\n                setUploading(false);\n            }\n        }\n        else {\n            // Send text only\n            try {\n                const response = await fetch(`/api/messages/conversations/${conversationId}/reply`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify({ content: message }),\n                });\n                if (!response.ok) {\n                    const errorData = await response.json();\n                    throw new Error(errorData.error || 'Failed to send message');\n                }\n                // Clear state\n                setMessage('');\n                await onReply('');\n            }\n            catch (err) {\n                console.error('Send error:', err);\n                setError(err instanceof Error ? err.message : 'Failed to send message');\n            }\n        }\n    };\n    const formatFileSize = (bytes) => {\n        if (!bytes)\n            return '';\n        const mb = bytes / 1024 / 1024;\n        return mb > 1 ? `${mb.toFixed(1)}MB` : `${(bytes / 1024).toFixed(0)}KB`;\n    };\n    return (_jsxs(\"div\", { className: \"bg-card border-t border-border p-4\", children: [error && (_jsxs(\"div\", { className: \"mb-3 flex items-center gap-2 p-3 bg-red-500/10 text-red-600 rounded-lg\", children: [_jsx(AlertCircle, { size: 16, className: \"flex-shrink-0\" }), _jsx(\"p\", { className: \"text-sm\", children: error }), _jsx(\"button\", { onClick: () => setError(null), className: \"ml-auto text-red-600 hover:text-red-700\", children: _jsx(X, { size: 16 }) })] })), filePreview && (_jsxs(\"div\", { className: \"mb-3 relative inline-block\", children: [_jsx(\"img\", { src: filePreview, alt: \"Preview\", className: \"max-h-40 rounded-lg border border-border\" }), _jsx(\"button\", { onClick: () => {\n                            setSelectedFile(null);\n                            setFilePreview(null);\n                            if (fileInputRef.current)\n                                fileInputRef.current.value = '';\n                        }, className: \"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600\", children: _jsx(X, { size: 16 }) })] })), selectedFile && !filePreview && (_jsxs(\"div\", { className: \"mb-3 flex items-center gap-2 p-2 bg-muted rounded-lg\", children: [_jsx(Paperclip, { size: 16, className: \"text-muted-foreground flex-shrink-0\" }), _jsx(\"span\", { className: \"text-sm text-foreground flex-1 truncate\", children: selectedFile.name }), _jsx(\"button\", { onClick: () => {\n                            setSelectedFile(null);\n                            if (fileInputRef.current)\n                                fileInputRef.current.value = '';\n                        }, className: \"text-red-500 hover:text-red-600 flex-shrink-0\", children: _jsx(X, { size: 16 }) })] })), _jsxs(\"div\", { className: \"flex gap-2 items-end\", children: [_jsx(\"input\", { ref: fileInputRef, type: \"file\", onChange: handleFileSelect, style: { display: 'none' }, accept: \"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx\", disabled: uploading || isLoading }), _jsx(\"div\", { title: \"Attach file (image, video, audio, document)\", children: _jsx(SoftButton, { variant: \"secondary\", size: \"md\", onClick: () => fileInputRef.current?.click(), disabled: uploading || isLoading, className: \"flex-shrink-0\", children: _jsx(Paperclip, { size: 18 }) }) }), _jsx(Input, { placeholder: selectedFile\n                            ? 'Add a caption (optional)...'\n                            : 'Type a message...', value: message, onChange: (e) => setMessage(e.target.value), disabled: uploading || isLoading, onKeyPress: (e) => {\n                            if (e.key === 'Enter' && !e.shiftKey) {\n                                e.preventDefault();\n                                handleSend();\n                            }\n                        }, className: \"flex-1\" }), _jsx(SoftButton, { variant: \"primary\", size: \"md\", onClick: handleSend, disabled: !message && !selectedFile || uploading || isLoading, className: \"flex-shrink-0\", children: uploading || isLoading ? _jsx(Spinner, { size: \"sm\" }) : _jsx(Send, { size: 18 }) })] }), selectedFile && (_jsxs(\"div\", { className: \"text-xs text-muted-foreground mt-2\", children: [formatFileSize(selectedFile.size), \" \\u2022 Will be sent at full quality\"] }))] }));\n}\n//# sourceMappingURL=ReplyComposer.js.map","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { MessageSquare, Phone } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport useAuthStore from '../../stores/authStore';\nimport { getConversations, getConversation, markConversationAsRead, updateConversationStatus, } from '../../api/conversations';\nimport { SoftLayout, SoftCard, SoftButton } from '../../components/SoftUI';\nimport Input from '../../components/ui/Input';\nimport { ConversationsList } from '../../components/conversations/ConversationsList';\nimport { MessageThread } from '../../components/conversations/MessageThread';\nimport { ReplyComposer } from '../../components/conversations/ReplyComposer';\nexport function ConversationsPage() {\n    const auth = useAuthStore();\n    // List state\n    const [conversations, setConversations] = useState([]);\n    const [isLoadingConversations, setIsLoadingConversations] = useState(true);\n    const [page, setPage] = useState(1);\n    const [pages, setPages] = useState(1);\n    const [searchQuery, setSearchQuery] = useState('');\n    // Selected conversation state\n    const [selectedConversationId, setSelectedConversationId] = useState(null);\n    const [selectedConversation, setSelectedConversation] = useState(null);\n    const [messages, setMessages] = useState([]);\n    const [isLoadingMessages, setIsLoadingMessages] = useState(false);\n    const [messagesPage, setMessagesPage] = useState(1);\n    const [messagesPages, setMessagesPages] = useState(1);\n    // Load conversations on mount and when page/search changes\n    useEffect(() => {\n        loadConversations();\n    }, [page, searchQuery]);\n    const loadConversations = async () => {\n        try {\n            setIsLoadingConversations(true);\n            const data = await getConversations({\n                page,\n                limit: 20,\n            });\n            setConversations(data.data);\n            setPages(data.pagination.pages);\n            // Reset selected if current selection is not in new list\n            if (selectedConversationId &&\n                !data.data.find((c) => c.id === selectedConversationId)) {\n                setSelectedConversationId(null);\n                setSelectedConversation(null);\n                setMessages([]);\n            }\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to load conversations');\n        }\n        finally {\n            setIsLoadingConversations(false);\n        }\n    };\n    const handleSelectConversation = async (conversationId) => {\n        try {\n            setSelectedConversationId(conversationId);\n            setIsLoadingMessages(true);\n            setMessagesPage(1);\n            const data = await getConversation(conversationId, {\n                page: 1,\n                limit: 50,\n            });\n            setSelectedConversation(data.conversation);\n            setMessages(data.messages.reverse()); // Reverse to show newest at bottom\n            setMessagesPages(data.pagination.pages);\n            // Mark as read\n            await markConversationAsRead(conversationId);\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to load conversation');\n            setSelectedConversationId(null);\n        }\n        finally {\n            setIsLoadingMessages(false);\n        }\n    };\n    const handleLoadMoreMessages = async (newPage) => {\n        if (!selectedConversationId)\n            return;\n        try {\n            setIsLoadingMessages(true);\n            const data = await getConversation(selectedConversationId, {\n                page: newPage,\n                limit: 50,\n            });\n            // Append to existing messages (prepend since we're loading older messages)\n            setMessages((prev) => [...data.messages.reverse(), ...prev]);\n            setMessagesPage(newPage);\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to load messages');\n        }\n        finally {\n            setIsLoadingMessages(false);\n        }\n    };\n    const handleReply = async () => {\n        if (!selectedConversationId)\n            return;\n        try {\n            // Reload conversation to get new messages\n            const data = await getConversation(selectedConversationId, {\n                page: messagesPages,\n                limit: 50,\n            });\n            setMessages((prev) => [...prev, ...data.messages.reverse()]);\n            // Also refresh conversation list to update lastMessageAt\n            await loadConversations();\n            toast.success('Message sent');\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to send message');\n        }\n    };\n    const handleUpdateStatus = async (conversationId, status) => {\n        try {\n            await updateConversationStatus(conversationId, status);\n            setConversations((prev) => prev.map((c) => c.id === conversationId ? { ...c, status } : c));\n            if (selectedConversation?.id === conversationId) {\n                setSelectedConversation({ ...selectedConversation, status });\n            }\n            toast.success(`Conversation ${status}`);\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to update conversation');\n        }\n    };\n    return (_jsx(SoftLayout, { children: _jsxs(\"div\", { className: \"px-4 md:px-8 py-8 w-full h-full flex flex-col\", children: [_jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.5 }, className: \"mb-8\", children: [_jsx(\"div\", { className: \"flex items-start justify-between mb-6 flex-wrap gap-4\", children: _jsxs(\"div\", { children: [_jsx(\"h1\", { className: \"text-4xl font-bold text-foreground mb-2\", children: _jsx(\"span\", { className: \"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent\", children: \"Conversations\" }) }), _jsxs(\"p\", { className: \"text-muted-foreground flex items-center gap-2\", children: [_jsx(Phone, { className: \"w-4 h-4\" }), \"Members text your church number to start conversations\"] })] }) }), _jsx(\"div\", { className: \"flex gap-4 items-center\", children: _jsx(Input, { type: \"text\", placeholder: \"Search by name or phone...\", value: searchQuery, onChange: (e) => {\n                                    setSearchQuery(e.target.value);\n                                    setPage(1);\n                                }, className: \"flex-1 min-w-xs\" }) })] }), _jsxs(\"div\", { className: \"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6 min-h-0\", children: [_jsx(motion.div, { initial: { opacity: 0, x: -20 }, animate: { opacity: 1, x: 0 }, transition: { duration: 0.5 }, className: \"lg:col-span-1 flex flex-col min-h-0\", children: _jsxs(SoftCard, { className: \"flex-1 overflow-hidden flex flex-col\", children: [_jsx(\"div\", { className: \"p-4 border-b border-border/40\", children: _jsxs(\"h2\", { className: \"font-semibold text-foreground\", children: [conversations.length, \" Conversations\"] }) }), _jsx(\"div\", { className: \"flex-1 overflow-y-auto\", children: _jsx(\"div\", { className: \"p-4\", children: _jsx(ConversationsList, { conversations: conversations, selectedConversationId: selectedConversationId || undefined, onSelectConversation: handleSelectConversation, onUpdateStatus: handleUpdateStatus, isLoading: isLoadingConversations }) }) }), pages > 1 && (_jsxs(\"div\", { className: \"p-4 border-t border-border/40 flex justify-between gap-2\", children: [_jsx(SoftButton, { variant: \"secondary\", size: \"sm\", onClick: () => setPage(Math.max(1, page - 1)), disabled: page === 1, children: \"Previous\" }), _jsxs(\"span\", { className: \"text-xs text-muted-foreground self-center\", children: [\"Page \", page, \" of \", pages] }), _jsx(SoftButton, { variant: \"secondary\", size: \"sm\", onClick: () => setPage(Math.min(pages, page + 1)), disabled: page === pages, children: \"Next\" })] }))] }) }), _jsx(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.5, delay: 0.1 }, className: \"lg:col-span-2 flex flex-col min-h-0\", children: selectedConversation ? (_jsxs(SoftCard, { className: \"flex-1 flex flex-col overflow-hidden\", children: [_jsx(\"div\", { className: \"p-4 border-b border-border/40\", children: _jsxs(\"div\", { className: \"flex items-center justify-between\", children: [_jsxs(\"div\", { children: [_jsxs(\"h2\", { className: \"font-semibold text-foreground\", children: [selectedConversation.member.firstName, \" \", selectedConversation.member.lastName] }), _jsx(\"p\", { className: \"text-sm text-muted-foreground\", children: selectedConversation.member.phone })] }), _jsx(\"span\", { className: `text-xs font-medium px-3 py-1 rounded ${selectedConversation.status === 'open'\n                                                        ? 'bg-blue-500/20 text-blue-400'\n                                                        : selectedConversation.status === 'closed'\n                                                            ? 'bg-red-500/20 text-red-400'\n                                                            : 'bg-gray-500/20 text-gray-400'}`, children: selectedConversation.status })] }) }), _jsx(MessageThread, { conversation: selectedConversation, messages: messages, isLoading: isLoadingMessages, page: messagesPage, pages: messagesPages, onLoadMore: handleLoadMoreMessages }), _jsx(ReplyComposer, { conversationId: selectedConversation.id, onReply: handleReply })] })) : (_jsx(SoftCard, { className: \"flex-1 flex items-center justify-center\", children: _jsxs(\"div\", { className: \"text-center\", children: [_jsx(MessageSquare, { className: \"w-16 h-16 text-muted-foreground/50 mx-auto mb-4\" }), _jsx(\"h3\", { className: \"text-lg font-semibold text-foreground mb-2\", children: \"Select a Conversation\" }), _jsx(\"p\", { className: \"text-muted-foreground\", children: \"Choose a conversation from the list to view and reply to messages\" })] }) })) })] })] }) }));\n}\nexport default ConversationsPage;\n//# sourceMappingURL=ConversationsPage.js.map"],"names":["__iconNode","Archive","createLucideIcon","Download","Paperclip","getConversations","options","params","client","getConversation","conversationId","markConversationAsRead","updateConversationStatus","status","ConversationItemComponent","conversation","isSelected","onSelect","onUpdateStatus","index","formatDate","date","d","now","diffHours","getStatusColor","_jsx","motion","_jsxs","e","SoftButton","ConversationItem","memo","List","Row","React","style","data","conversations","selectedConversationId","onSelectConversation","ConversationsList","isLoading","containerHeight","rowData","useMemo","Loader","SoftCard","MessageSquare","LazyImage","src","alt","fallback","onLoad","onError","className","props","ref","imgRef","useRef","isLoaded","setIsLoaded","useState","imageError","setImageError","useEffect","img","observer","entries","entry","MessageBubbleComponent","content","direction","memberName","deliveryStatus","mediaUrl","mediaType","mediaName","mediaSizeBytes","mediaDuration","createdAt","isOutbound","formatFileSize","bytes","mb","formatDuration","seconds","mins","secs","timestamp","MessageBubble","MessageThread","messages","page","pages","onLoadMore","messagesEndRef","messagesContainerRef","scrollToBottom","_Fragment","message","ReplyComposer","onReply","setMessage","selectedFile","setSelectedFile","filePreview","setFilePreview","uploading","setUploading","error","setError","fileInputRef","handleFileSelect","file","maxSize","reader","handleSend","formData","response","errorData","err","AlertCircle","X","Input","Spinner","Send","ConversationsPage","useAuthStore","setConversations","isLoadingConversations","setIsLoadingConversations","setPage","setPages","searchQuery","setSearchQuery","setSelectedConversationId","selectedConversation","setSelectedConversation","setMessages","isLoadingMessages","setIsLoadingMessages","messagesPage","setMessagesPage","messagesPages","setMessagesPages","loadConversations","c","toast","handleSelectConversation","handleLoadMoreMessages","newPage","prev","handleReply","handleUpdateStatus","SoftLayout","Phone"],"mappings":"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","x_google_ignoreList":[0,1,2]}