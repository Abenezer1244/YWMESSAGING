{"version":3,"file":"MessageHistoryPage-BxL_M1IF.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/funnel.js","../../src/pages/dashboard/MessageHistoryPage.js"],"sourcesContent":["/**\n * @license lucide-react v0.552.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z\",\n      key: \"sc7q7i\"\n    }\n  ]\n];\nconst Funnel = createLucideIcon(\"funnel\", __iconNode);\n\nexport { __iconNode, Funnel as default };\n//# sourceMappingURL=funnel.js.map\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Loader, History, ChevronLeft, ChevronRight, Filter } from 'lucide-react';\nimport toast from 'react-hot-toast';\nimport useMessageStore from '../../stores/messageStore';\nimport { getMessageHistory } from '../../api/messages';\nimport { SoftLayout, SoftCard, SoftButton } from '../../components/SoftUI';\nexport function MessageHistoryPage() {\n    const { messages, setMessages, isLoading, setLoading } = useMessageStore();\n    const [page, setPage] = useState(1);\n    const [total, setTotal] = useState(0);\n    const [statusFilter, setStatusFilter] = useState('');\n    const limit = 20;\n    const pages = Math.ceil(total / limit);\n    useEffect(() => {\n        loadMessages();\n    }, [page, statusFilter]);\n    const loadMessages = async () => {\n        try {\n            setLoading(true);\n            const data = await getMessageHistory({\n                page,\n                limit,\n                status: statusFilter || undefined,\n            });\n            setMessages(data.data);\n            setTotal(data.pagination.total);\n        }\n        catch (error) {\n            toast.error(error.message || 'Failed to load messages');\n        }\n        finally {\n            setLoading(false);\n        }\n    };\n    const getStatusBadgeColor = (status) => {\n        switch (status) {\n            case 'sent':\n                return 'bg-green-500/20 text-green-400';\n            case 'pending':\n                return 'bg-yellow-500/20 text-yellow-400';\n            case 'failed':\n                return 'bg-red-500/20 text-red-400';\n            default:\n                return 'bg-slate-700/50 text-slate-300';\n        }\n    };\n    return (_jsx(SoftLayout, { children: _jsxs(\"div\", { className: \"px-4 md:px-8 py-8 w-full\", children: [_jsxs(motion.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, transition: { duration: 0.5 }, className: \"mb-8\", children: [_jsx(\"h1\", { className: \"text-4xl font-bold text-foreground mb-2\", children: _jsx(\"span\", { className: \"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent\", children: \"Message History\" }) }), _jsxs(\"p\", { className: \"text-muted-foreground\", children: [total, \" total messages\"] })] }), _jsx(motion.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.1 }, children: _jsxs(SoftCard, { className: \"mb-6\", children: [_jsxs(\"label\", { className: \"block text-sm font-semibold text-foreground mb-3 flex items-center gap-2\", children: [_jsx(Filter, { className: \"w-4 h-4\" }), \"Filter by Status\"] }), _jsxs(\"select\", { value: statusFilter, onChange: (e) => {\n                                    setStatusFilter(e.target.value);\n                                    setPage(1);\n                                }, className: \"px-4 py-2 border border-border/40 rounded-lg bg-card/50 text-foreground focus:outline-none focus:ring-2 focus:ring-primary transition-colors duration-normal backdrop-blur-sm\", children: [_jsx(\"option\", { value: \"\", children: \"All Statuses\" }), _jsx(\"option\", { value: \"pending\", children: \"Pending\" }), _jsx(\"option\", { value: \"sent\", children: \"Sent\" }), _jsx(\"option\", { value: \"failed\", children: \"Failed\" })] })] }) }), isLoading ? (_jsx(\"div\", { className: \"flex items-center justify-center py-20\", children: _jsx(motion.div, { animate: { rotate: 360 }, transition: { duration: 2, repeat: Infinity, ease: \"linear\" }, children: _jsx(Loader, { className: \"w-8 h-8 text-primary\" }) }) })) : messages.length === 0 ? (_jsx(motion.div, { initial: { opacity: 0, scale: 0.95 }, animate: { opacity: 1, scale: 1 }, transition: { delay: 0.2 }, children: _jsxs(SoftCard, { variant: \"gradient\", className: \"text-center py-16\", children: [_jsx(\"div\", { className: \"mb-6\", children: _jsx(History, { className: \"w-16 h-16 mx-auto text-muted-foreground\" }) }), _jsx(\"h2\", { className: \"text-2xl font-bold text-foreground mb-3\", children: \"No Messages Found\" }), _jsx(\"p\", { className: \"text-muted-foreground\", children: \"Your message history will appear here after you send messages.\" })] }) })) : (_jsxs(_Fragment, { children: [_jsx(motion.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.15 }, children: _jsx(SoftCard, { className: \"overflow-hidden\", children: _jsx(\"div\", { className: \"overflow-x-auto\", children: _jsxs(\"table\", { className: \"min-w-full\", children: [_jsx(\"thead\", { className: \"border-b border-border/40\", children: _jsxs(\"tr\", { children: [_jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-foreground\", children: \"Message\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-foreground\", children: \"Recipients\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-foreground\", children: \"Delivery\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-foreground\", children: \"Status\" }), _jsx(\"th\", { className: \"px-6 py-3 text-left text-sm font-semibold text-foreground\", children: \"Sent\" })] }) }), _jsx(\"tbody\", { className: \"divide-y divide-border/40\", children: messages.map((message) => (_jsxs(\"tr\", { className: \"hover:bg-muted/30 transition-colors duration-normal\", children: [_jsxs(\"td\", { className: \"px-6 py-4\", children: [_jsxs(\"p\", { className: \"text-sm text-foreground font-medium truncate max-w-xs\", children: [message.content.slice(0, 50), message.content.length > 50 ? '...' : ''] }), _jsx(\"p\", { className: \"text-xs text-muted-foreground mt-1\", children: message.targetType === 'individual'\n                                                                        ? 'Individual'\n                                                                        : message.targetType === 'groups'\n                                                                            ? 'Groups'\n                                                                            : message.targetType === 'branches'\n                                                                                ? 'Branches'\n                                                                                : 'All Members' })] }), _jsx(\"td\", { className: \"px-6 py-4 whitespace-nowrap\", children: _jsx(\"div\", { className: \"text-sm text-foreground font-medium\", children: message.totalRecipients }) }), _jsx(\"td\", { className: \"px-6 py-4 whitespace-nowrap\", children: _jsxs(\"div\", { className: \"text-sm\", children: [_jsxs(\"p\", { className: \"text-foreground font-medium\", children: [message.deliveredCount, \"/\", message.totalRecipients] }), _jsxs(\"p\", { className: \"text-muted-foreground text-xs\", children: [message.deliveryRate || 0, \"%\"] })] }) }), _jsx(\"td\", { className: \"px-6 py-4 whitespace-nowrap\", children: _jsx(\"span\", { className: `inline-block px-3 py-1 text-xs font-semibold rounded-full ${getStatusBadgeColor(message.status)}`, children: message.status.charAt(0).toUpperCase() + message.status.slice(1) }) }), _jsxs(\"td\", { className: \"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground\", children: [new Date(message.createdAt).toLocaleDateString(), _jsx(\"br\", {}), new Date(message.createdAt).toLocaleTimeString()] })] }, message.id))) })] }) }) }) }), pages > 1 && (_jsxs(motion.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, transition: { delay: 0.2 }, className: \"mt-6 flex justify-center gap-2\", children: [_jsx(SoftButton, { variant: \"secondary\", size: \"md\", onClick: () => setPage(Math.max(1, page - 1)), disabled: page === 1, icon: _jsx(ChevronLeft, { className: \"w-4 h-4\" }), children: \"Previous\" }), _jsxs(\"div\", { className: \"px-4 py-2 text-muted-foreground font-medium\", children: [\"Page \", page, \" of \", pages] }), _jsx(SoftButton, { variant: \"secondary\", size: \"md\", onClick: () => setPage(Math.min(pages, page + 1)), disabled: page === pages, icon: _jsx(ChevronRight, { className: \"w-4 h-4\" }), children: \"Next\" })] }))] }))] }) }));\n}\nexport default MessageHistoryPage;\n//# sourceMappingURL=MessageHistoryPage.js.map"],"names":["__iconNode","Funnel","createLucideIcon","MessageHistoryPage","messages","setMessages","isLoading","setLoading","useMessageStore","page","setPage","useState","total","setTotal","statusFilter","setStatusFilter","limit","pages","useEffect","loadMessages","data","getMessageHistory","error","toast","getStatusBadgeColor","status","_jsx","SoftLayout","_jsxs","motion","SoftCard","Filter","e","Loader","History","_Fragment","message","SoftButton","ChevronLeft","ChevronRight"],"mappings":"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","x_google_ignoreList":[0]}