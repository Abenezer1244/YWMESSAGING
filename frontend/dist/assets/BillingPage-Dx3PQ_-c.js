import{u as w,r as l,j as e,_ as d}from"./index-C1BtDdfM.js";import{a as M,c as S}from"./billing-xWlnxA8O.js";import{a as m,L as P,S as n}from"./SoftLayout-Z1ZOWnRS.js";import{S as x}from"./SoftButton-CeXloGfT.js";import{m as i}from"./proxy-BXiIa0WK.js";import{C as I}from"./check-npPr36lS.js";import"./index-DsZXYlY_.js";function E(){const g=w(),[s,j]=l.useState(null),[b,u]=l.useState(!0),[h,f]=l.useState(!1);l.useEffect(()=>{(async()=>{try{u(!0);const t=await M();j(t)}catch(t){d.error(t.message||"Failed to load billing info")}finally{u(!1)}})()},[]);const y=async()=>{if(confirm("Are you sure you want to cancel your subscription?"))try{f(!0),await S(),d.success("Subscription cancelled"),g("/dashboard")}catch(a){d.error(a.message||"Failed to cancel subscription")}finally{f(!1)}};if(b)return e.jsx(m,{children:e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:e.jsx(i.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0},children:e.jsx(P,{className:"w-8 h-8 text-primary"})})})});if(!s)return e.jsx(m,{children:e.jsx("div",{className:"px-4 md:px-8 py-8 w-full",children:e.jsxs(n,{className:"text-center py-16",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-3",children:"Failed to Load Billing Information"}),e.jsx("p",{className:"text-muted-foreground",children:"Please try refreshing the page or contact support if the issue persists."})]})})});const N={starter:"Starter",growth:"Growth",pro:"Pro"},v=(a,t)=>t>1e5?0:Math.round(a/t*100),C=a=>a>=90?"bg-danger-500":a>=70?"bg-warning-500":"bg-success-500",r=({label:a,used:t,limit:o})=>{const p=v(t,o),c=o>1e5;return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:a}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t," / ",c?"∞":o]})]}),!c&&e.jsx("div",{className:"w-full bg-muted-foreground/20 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${C(p)}`,style:{width:`${Math.min(p,100)}%`}})}),c&&e.jsx("div",{className:"text-sm text-success-500 dark:text-success-400",children:"Unlimited"})]})};return e.jsx(m,{children:e.jsxs("div",{className:"px-4 md:px-8 py-8 w-full",children:[e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:e.jsx("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Billing"})}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your subscription and view usage"})]}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"mb-8",children:e.jsxs(n,{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-6",children:"Current Plan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs(n,{variant:"gradient",children:[e.jsxs("h3",{className:"text-xl font-bold text-foreground",children:[N[s.plan]," Plan"]}),e.jsxs("p",{className:"text-3xl font-bold text-primary mt-2",children:["$",s.limits.price/100,e.jsx("span",{className:"text-lg text-muted-foreground",children:"/month"})]}),e.jsx(x,{variant:"primary",onClick:()=>g("/subscribe"),fullWidth:!0,className:"mt-4",children:"Change Plan"}),e.jsx(x,{variant:"danger",onClick:y,disabled:h,fullWidth:!0,className:"mt-3",children:h?"Cancelling...":"Cancel Subscription"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4",children:"Features included:"}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.limits.features.map((a,t)=>e.jsxs(i.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.05},className:"flex items-start gap-3",children:[e.jsx(I,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-muted-foreground",children:a})]},t))})]})]})]})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:e.jsxs(n,{children:[e.jsxs("h2",{className:"text-2xl font-bold text-foreground mb-6",children:["Current Usage (",new Date().toLocaleDateString(),")"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Organization"}),e.jsx(r,{label:"Branches",used:s.usage.branches,limit:s.limits.branches}),e.jsx(r,{label:"Co-Admins",used:s.usage.coAdmins,limit:s.limits.coAdmins})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Messaging"}),e.jsx(r,{label:"Members",used:s.usage.members,limit:s.limits.members}),e.jsx(r,{label:"Messages (This Month)",used:s.usage.messagesThisMonth,limit:s.limits.messagesPerMonth})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-8 pt-8 border-t border-border/40",children:[e.jsxs(n,{variant:"gradient",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Branches"}),e.jsx("p",{className:"text-2xl font-bold text-primary mt-2",children:s.remaining.branches===999999?"∞":s.remaining.branches})]}),e.jsxs(n,{variant:"gradient",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Members"}),e.jsx("p",{className:"text-2xl font-bold text-green-400 mt-2",children:s.remaining.members===999999?"∞":s.remaining.members})]}),e.jsxs(n,{variant:"gradient",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Messages"}),e.jsx("p",{className:"text-2xl font-bold text-cyan-400 mt-2",children:s.remaining.messagesPerMonth===999999?"∞":s.remaining.messagesPerMonth})]}),e.jsxs(n,{variant:"gradient",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining Co-Admins"}),e.jsx("p",{className:"text-2xl font-bold text-amber-400 mt-2",children:s.remaining.coAdmins===999999?"∞":s.remaining.coAdmins})]})]})]})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsxs(n,{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Billing Information"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Your subscription is billed monthly. You can manage your payment method and invoices through Stripe."}),e.jsx(x,{variant:"primary",children:"Manage in Stripe"})]})})]})})}export{E as BillingPage,E as default};
//# sourceMappingURL=BillingPage-Dx3PQ_-c.js.map
