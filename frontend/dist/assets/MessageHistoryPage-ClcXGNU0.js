import{r as s,_ as b,j as e,C as d,S as f,B as m}from"./index-C0qRrIwJ.js";import{u as N,g as k}from"./messages-CPUeX7pX.js";import{B as v}from"./BackButton-CBljWYrD.js";function C(){const{messages:l,setMessages:p,isLoading:y,setLoading:c}=N(),[a,i]=s.useState(1),[x,h]=s.useState(0),[n,u]=s.useState(""),o=20,r=Math.ceil(x/o);s.useEffect(()=>{g()},[a,n]);const g=async()=>{try{c(!0);const t=await k({page:a,limit:o,status:n||void 0});p(t.data),h(t.pagination.total)}catch(t){b.error(t.message||"Failed to load messages")}finally{c(!1)}},j=t=>{switch(t){case"sent":return"bg-success-100 dark:bg-success-900 text-success-800 dark:text-success-200";case"pending":return"bg-warning-100 dark:bg-warning-900 text-warning-800 dark:text-warning-200";case"failed":return"bg-danger-100 dark:bg-danger-900 text-danger-800 dark:text-danger-200";default:return"bg-secondary-100 dark:bg-secondary-800 text-secondary-800 dark:text-secondary-200"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 dark:from-primary-900 to-primary-100 dark:to-primary-950 p-6 transition-colors duration-normal",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx(v,{variant:"ghost"})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary-900 dark:text-primary-50 mb-2",children:"ðŸ“œ Message History"}),e.jsxs("p",{className:"text-primary-600 dark:text-primary-400",children:[x," total messages"]})]}),e.jsxs(d,{variant:"default",className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-primary-900 dark:text-primary-50 mb-3",children:"ðŸ” Filter by Status"}),e.jsxs("select",{value:n,onChange:t=>{u(t.target.value),i(1)},className:"px-4 py-2 border border-primary-200 dark:border-primary-700 rounded-lg bg-white dark:bg-primary-800 text-primary-900 dark:text-primary-50 focus:outline-none focus:ring-2 focus:ring-accent-500 transition-colors duration-normal",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),y?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(f,{size:"lg",text:"Loading messages..."})}):l.length===0?e.jsxs(d,{variant:"highlight",className:"text-center py-16",children:[e.jsx("div",{className:"mb-6",children:e.jsx("span",{className:"text-6xl",children:"ðŸ“œ"})}),e.jsx("h2",{className:"text-2xl font-bold text-primary-900 dark:text-primary-50 mb-3",children:"No Messages Found"}),e.jsx("p",{className:"text-primary-600 dark:text-primary-400",children:"Your message history will appear here after you send messages."})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"default",className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-primary-100 dark:bg-primary-800 border-b border-primary-200 dark:border-primary-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-primary-900 dark:text-primary-50",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-primary-900 dark:text-primary-50",children:"Recipients"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-primary-900 dark:text-primary-50",children:"Delivery"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-primary-900 dark:text-primary-50",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-primary-900 dark:text-primary-50",children:"Sent"})]})}),e.jsx("tbody",{className:"divide-y divide-primary-200 dark:divide-primary-700",children:l.map(t=>e.jsxs("tr",{className:"hover:bg-primary-50 dark:hover:bg-primary-700/50 transition-colors duration-normal",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("p",{className:"text-sm text-primary-900 dark:text-primary-50 font-medium truncate max-w-xs",children:[t.content.slice(0,50),t.content.length>50?"...":""]}),e.jsx("p",{className:"text-xs text-primary-600 dark:text-primary-400 mt-1",children:t.targetType==="individual"?"Individual":t.targetType==="groups"?"Groups":t.targetType==="branches"?"Branches":"All Members"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-primary-900 dark:text-primary-50 font-medium",children:t.totalRecipients})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"text-primary-900 dark:text-primary-50 font-medium",children:[t.deliveredCount,"/",t.totalRecipients]}),e.jsxs("p",{className:"text-primary-600 dark:text-primary-400 text-xs",children:[t.deliveryRate||0,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${j(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-primary-600 dark:text-primary-400",children:[new Date(t.createdAt).toLocaleDateString(),e.jsx("br",{}),new Date(t.createdAt).toLocaleTimeString()]})]},t.id))})]})})}),r>1&&e.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[e.jsx(m,{variant:"secondary",size:"md",onClick:()=>i(Math.max(1,a-1)),disabled:a===1,children:"â† Previous"}),e.jsxs("div",{className:"px-4 py-2 text-primary-700 dark:text-primary-300 font-medium",children:["Page ",a," of ",r]}),e.jsx(m,{variant:"secondary",size:"md",onClick:()=>i(Math.min(r,a+1)),disabled:a===r,children:"Next â†’"})]})]})]})})}export{C as MessageHistoryPage,C as default};
//# sourceMappingURL=MessageHistoryPage-ClcXGNU0.js.map
